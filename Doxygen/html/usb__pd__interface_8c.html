<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>My Project: pd/usb_pd_interface.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_695ae6a37edf2996f6d6c89c01e2f5f0.html">pd</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">usb_pd_interface.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;usb_pd_config.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="usb__pd_8h_source.html">usb_pd.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="usb__pd__phy_8h_source.html">usb_pd_phy.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="usb__pd__interface_8h_source.html">usb_pd_interface.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="usb__pd__timer_8h_source.html">usb_pd_timer.h</a>&quot;</code><br/>
<code>#include &quot;fsl_device_registers.h&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for usb_pd_interface.c:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c__incl.png" border="0" usemap="#pd_2usb__pd__interface_8c" alt=""/></div>
<map name="pd_2usb__pd__interface_8c" id="pd_2usb__pd__interface_8c">
<area shape="rect" id="node3" href="usb__pd_8h.html" title="usb_pd.h" alt="" coords="304,80,377,107"/><area shape="rect" id="node7" href="usb__pd__phy_8h.html" title="usb_pd_phy.h" alt="" coords="403,80,505,107"/><area shape="rect" id="node8" href="usb__pd__interface_8h.html" title="usb_pd_interface.h" alt="" coords="147,80,279,107"/><area shape="rect" id="node10" href="usb__pd__timer_8h.html" title="usb_pd_timer.h" alt="" coords="530,80,640,107"/><area shape="rect" id="node4" href="usb__osa_8h.html" title="usb_osa.h" alt="" coords="165,155,247,181"/><area shape="rect" id="node5" href="usb__misc_8h.html" title="usb_misc.h" alt="" coords="446,155,535,181"/><area shape="rect" id="node6" href="usb__cmsis__wrapper_8h.html" title="usb_cmsis_wrapper.h" alt="" coords="272,155,420,181"/><area shape="rect" id="node9" href="usb__pd__spec_8h.html" title="usb_pd_spec.h" alt="" coords="30,155,140,181"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8efd2af273b221ad6fe948153b704c96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__pd__interface_8c.html#a8efd2af273b221ad6fe948153b704c96">PD_MsgInit</a> (<a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *pdInstance)</td></tr>
<tr class="separator:a8efd2af273b221ad6fe948153b704c96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81174001cad1ad0a3978c41a4e21daa0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__pd__interface_8c.html#a81174001cad1ad0a3978c41a4e21daa0">PD_MsgReceived</a> (<a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *pdInstance, uint32_t msgLength, <a class="el" href="group__usb__pd__stack.html#ga04a1f331d9807a70ab9bb753f5ed1c80">pd_status_t</a> result)</td></tr>
<tr class="separator:a81174001cad1ad0a3978c41a4e21daa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ad144a0e0d32b011f83156c3edd30a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__pd__interface_8c.html#a6ad144a0e0d32b011f83156c3edd30a8">PD_MsgSendDone</a> (<a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *pdInstance, <a class="el" href="group__usb__pd__stack.html#ga04a1f331d9807a70ab9bb753f5ed1c80">pd_status_t</a> result)</td></tr>
<tr class="separator:a6ad144a0e0d32b011f83156c3edd30a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a602f8622c0ba8d21b5013537dd3dadf9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__pd__interface_8c.html#a602f8622c0ba8d21b5013537dd3dadf9">PD_StackStateMachine</a> (<a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *pdInstance)</td></tr>
<tr class="separator:a602f8622c0ba8d21b5013537dd3dadf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83de99272e34bf7bad5146401157ccff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__pd__interface_8c.html#a83de99272e34bf7bad5146401157ccff">PD_ConnectSetPowerProgress</a> (<a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *pdInstance, uint8_t state)</td></tr>
<tr class="separator:a83de99272e34bf7bad5146401157ccff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabf54379477268c9186bc3cbc84f29e2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__pd__interface_8c.html#aabf54379477268c9186bc3cbc84f29e2">PD_GetInstance</a> (void)</td></tr>
<tr class="separator:aabf54379477268c9186bc3cbc84f29e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c50cfda5ec549f60ac482d06231d26f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__pd__interface_8c.html#a8c50cfda5ec549f60ac482d06231d26f">PD_ReleaseInstance</a> (<a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *pdInstance)</td></tr>
<tr class="separator:a8c50cfda5ec549f60ac482d06231d26f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33e4ca77d64aa73779c39be033ec640b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__pd__interface_8c.html#a33e4ca77d64aa73779c39be033ec640b">PD_GetPhyInterface</a> (uint8_t phyType, const <a class="el" href="group__usb__pd__phy__drv.html#ga9494f6971e6132cb70c98b92f45af74f">pd_phy_api_interface_t</a> **controllerTable)</td></tr>
<tr class="separator:a33e4ca77d64aa73779c39be033ec640b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a555b1880b5b259c3fdcd3da821e06cf2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__usb__pd__stack.html#ga04a1f331d9807a70ab9bb753f5ed1c80">pd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__pd__interface_8c.html#a555b1880b5b259c3fdcd3da821e06cf2">PD_PhyControl</a> (<a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *pdInstance, uint32_t control, void *param)</td></tr>
<tr class="separator:a555b1880b5b259c3fdcd3da821e06cf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ab001290dc934fd6a45ad93916f5140"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__usb__pd__stack.html#ga04a1f331d9807a70ab9bb753f5ed1c80">pd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__pd__stack.html#ga3ab001290dc934fd6a45ad93916f5140">PD_InstanceInit</a> (<a class="el" href="group__usb__pd__stack.html#ga9397835347d48ef48b6b0ecba6312213">pd_handle</a> *pdHandle, <a class="el" href="group__usb__pd__stack.html#ga270b6a571db4fa308a1cce3df32f5439">pd_stack_callback_t</a> callbackFn, <a class="el" href="group__usb__pd__stack.html#gaf1142461de7d7dcc6268c286ba956265">pd_power_handle_callback_t</a> *<a class="el" href="source__charger_2pd__app_8c.html#a306f9b8029582dfb8c64f163fea3cf65">callbackFunctions</a>, void *callbackParam, <a class="el" href="group__usb__pd__stack.html#gafa6034f9e204836697da1f2fc996cbad">pd_instance_config_t</a> *config)</td></tr>
<tr class="memdesc:ga3ab001290dc934fd6a45ad93916f5140"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize PD stack instance.  <a href="group__usb__pd__stack.html#ga3ab001290dc934fd6a45ad93916f5140">More...</a><br/></td></tr>
<tr class="separator:ga3ab001290dc934fd6a45ad93916f5140"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2a517af9491514966ad9c806eb998f78"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__usb__pd__stack.html#ga04a1f331d9807a70ab9bb753f5ed1c80">pd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__pd__stack.html#ga2a517af9491514966ad9c806eb998f78">PD_InstanceDeinit</a> (<a class="el" href="group__usb__pd__stack.html#ga9397835347d48ef48b6b0ecba6312213">pd_handle</a> pdHandle)</td></tr>
<tr class="memdesc:ga2a517af9491514966ad9c806eb998f78"><td class="mdescLeft">&#160;</td><td class="mdescRight">de-initialize PD stack instance.  <a href="group__usb__pd__stack.html#ga2a517af9491514966ad9c806eb998f78">More...</a><br/></td></tr>
<tr class="separator:ga2a517af9491514966ad9c806eb998f78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4227c58a9524464e19ee6efe9615f78e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__pd__stack.html#ga4227c58a9524464e19ee6efe9615f78e">PD_InstanceTask</a> (<a class="el" href="group__usb__pd__stack.html#ga9397835347d48ef48b6b0ecba6312213">pd_handle</a> pdHandle)</td></tr>
<tr class="memdesc:ga4227c58a9524464e19ee6efe9615f78e"><td class="mdescLeft">&#160;</td><td class="mdescRight">PD stack's instance task.  <a href="group__usb__pd__stack.html#ga4227c58a9524464e19ee6efe9615f78e">More...</a><br/></td></tr>
<tr class="separator:ga4227c58a9524464e19ee6efe9615f78e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7f7f94758771b173653d27c508c8b33f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usb__pd__phy__drv.html#ga7f7f94758771b173653d27c508c8b33f">PD_Notify</a> (<a class="el" href="group__usb__pd__stack.html#ga9397835347d48ef48b6b0ecba6312213">pd_handle</a> pdHandle, uint32_t event, void *param)</td></tr>
<tr class="memdesc:ga7f7f94758771b173653d27c508c8b33f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify PD stack the PHY status.  <a href="group__usb__pd__phy__drv.html#ga7f7f94758771b173653d27c508c8b33f">More...</a><br/></td></tr>
<tr class="separator:ga7f7f94758771b173653d27c508c8b33f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af44c9a145b9a610ae07c5c7d8ab08e85"><td class="memItemLeft" align="right" valign="top">void USB_WEAK&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__pd__interface_8c.html#af44c9a145b9a610ae07c5c7d8ab08e85">PD_WaitUsec</a> (uint32_t us)</td></tr>
<tr class="separator:af44c9a145b9a610ae07c5c7d8ab08e85"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6a65e61c995d1589e43589e733f45b57"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb__pd__interface_8c.html#a6a65e61c995d1589e43589e733f45b57">s_PDInstance</a> [<a class="el" href="source__charger_2usb__pd__config_8h.html#adc5392399bc3b25128cb488858c7b328">PD_CONFIG_MAX_PORT</a>]</td></tr>
<tr class="separator:a6a65e61c995d1589e43589e733f45b57"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a83de99272e34bf7bad5146401157ccff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PD_ConnectSetPowerProgress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *&#160;</td>
          <td class="paramname"><em>pdInstance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;{</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="keywordflow">if</span> ((state != <a class="code" href="group__usb__pd__stack.html#gga1af9af0106a9413093f8e0d9b796771babd57680a848fb2ffdfcb7ce62b380348">kVbusPower_Invalid</a>) &amp;&amp; (pdInstance-&gt;<a class="code" href="struct__pd__instance.html#af4167196731cf1a846f23c4d6473181c">inProgress</a> != state))</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    {</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <span class="comment">// 设置power progress</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        pdInstance-&gt;<a class="code" href="struct__pd__instance.html#af4167196731cf1a846f23c4d6473181c">inProgress</a> = state;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        <span class="comment">// 告知phy driver vbus的状态</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <a class="code" href="usb__pd__connect_8c.html#a555b1880b5b259c3fdcd3da821e06cf2">PD_PhyControl</a>(pdInstance, <a class="code" href="group__usb__pd__phy__drv.html#ggab8bfca50e2ac042b47a697c88f84c3eda4b062c83b48914ee8edc74523699871d">PD_PHY_SET_VBUS_TRANSFORM_STATE</a>, &amp;state);</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    }</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;}</div>
<div class="ttc" id="usb__pd__connect_8c_html_a555b1880b5b259c3fdcd3da821e06cf2"><div class="ttname"><a href="usb__pd__connect_8c.html#a555b1880b5b259c3fdcd3da821e06cf2">PD_PhyControl</a></div><div class="ttdeci">pd_status_t PD_PhyControl(pd_instance_t *pdInstance, uint32_t control, void *param)</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.c:122</div></div>
<div class="ttc" id="group__usb__pd__stack_html_gga1af9af0106a9413093f8e0d9b796771babd57680a848fb2ffdfcb7ce62b380348"><div class="ttname"><a href="group__usb__pd__stack.html#gga1af9af0106a9413093f8e0d9b796771babd57680a848fb2ffdfcb7ce62b380348">kVbusPower_Invalid</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:710</div></div>
<div class="ttc" id="struct__pd__instance_html_af4167196731cf1a846f23c4d6473181c"><div class="ttname"><a href="struct__pd__instance.html#af4167196731cf1a846f23c4d6473181c">_pd_instance::inProgress</a></div><div class="ttdeci">uint8_t inProgress</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:159</div></div>
<div class="ttc" id="group__usb__pd__phy__drv_html_ggab8bfca50e2ac042b47a697c88f84c3eda4b062c83b48914ee8edc74523699871d"><div class="ttname"><a href="group__usb__pd__phy__drv.html#ggab8bfca50e2ac042b47a697c88f84c3eda4b062c83b48914ee8edc74523699871d">PD_PHY_SET_VBUS_TRANSFORM_STATE</a></div><div class="ttdef"><b>Definition:</b> usb_pd_phy.h:104</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_a83de99272e34bf7bad5146401157ccff_icgraph.png" border="0" usemap="#usb__pd__interface_8c_a83de99272e34bf7bad5146401157ccff_icgraph" alt=""/></div>
<map name="usb__pd__interface_8c_a83de99272e34bf7bad5146401157ccff_icgraph" id="usb__pd__interface_8c_a83de99272e34bf7bad5146401157ccff_icgraph">
<area shape="rect" id="node2" href="group__usb__pd__phy__drv.html#ga7f7f94758771b173653d27c508c8b33f" title="Notify PD stack the PHY status. " alt="" coords="261,269,344,296"/><area shape="rect" id="node3" href="usb__pd__ptn5110__hal_8c.html#a835e57283bb576d741f5668e2ebc55f6" title="PDPTN5110_PsStatChangeInt\lCallback" alt="" coords="691,227,893,269"/><area shape="rect" id="node4" href="usb__pd__ptn5110__hal_8c.html#a706cb45223c529b6d01188e28d28a817" title="Handler for Int10. " alt="" coords="955,293,1157,320"/><area shape="rect" id="node7" href="usb__pd__ptn5110__hal_8c.html#a8eed919866963307f312dd995cca3e82" title="Callback for VBUS Voltage Alarm Lo alert. " alt="" coords="687,345,897,386"/><area shape="rect" id="node8" href="usb__pd__ptn5110__interface_8c.html#a9bd17dd5e461a91ba93e8452b66820fa" title="PDPTN5110_Receive" alt="" coords="435,244,586,271"/><area shape="rect" id="node9" href="group__usb__pd__stack.html#gadc10377ece46e63b966463e501451e33" title="PD PTN5110 PHY ISR function. " alt="" coords="427,143,595,169"/><area shape="rect" id="node11" href="usb__pd__ptn5110__msg_8c.html#ab7229a8cdc4e1c840c8fd1a0d1d5b75c" title="Get the bist data from the HW registers (unused) " alt="" coords="397,402,624,443"/><area shape="rect" id="node12" href="usb__pd__ptn5110__msg_8c.html#aeab1126bfe7625c8fba3cb342eb6aa99" title="PDPTN5110_MsgSendCompLete" alt="" coords="401,63,620,89"/><area shape="rect" id="node15" href="usb__pd__ptn5110__msg_8c.html#ac5a47c3292f0eb098cbec28f49b8ede7" title="PDPTN5110_MsgReceiveCompLete" alt="" coords="393,469,629,496"/><area shape="rect" id="node5" href="usb__pd__ptn5110__hal_8c.html#ae5d40eccd3a7c7902b303d44cedb6a42" title="Callback to be called on assertion of INT_N by victoria. " alt="" coords="1206,293,1407,320"/><area shape="rect" id="node6" href="usb__pd__ptn5110__interface_8c.html#a91fdd39ab055725caf3867261e584c2f" title="PDPTN5110_Control" alt="" coords="1457,293,1602,320"/><area shape="rect" id="node10" href="pd__app_8c.html#af2521ef8b447748866a3ad2c818faa92" title="PORTB_PORTC_PORTD_PORTE\l_IRQHandler" alt="" coords="677,162,907,203"/><area shape="rect" id="node13" href="usb__pd__ptn5110__msg_8c.html#a9917c53219ae71793f1543d8433eae4e" title="PDPTN5110_MsgHalSendAbort\lIsrProcess" alt="" coords="687,31,897,73"/><area shape="rect" id="node14" href="usb__pd__ptn5110__msg_8c.html#a6ac6dd7f29e5cefa92f6b94392ea74b6" title="PDPTN5110_MsgHalSendSuccess\lIsrProcess" alt="" coords="677,97,907,138"/><area shape="rect" id="node16" href="usb__pd__ptn5110__msg_8c.html#aa9f537f03af07588daf3ee11e48f9f20" title="This is called by the interrupt controller when we receive a message. " alt="" coords="679,462,905,503"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aabf54379477268c9186bc3cbc84f29e2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a>* PD_GetInstance </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;{</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    uint8_t i = 0;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="usb__osa__bm_8h.html#a8dbccf46cc2f8e3b5cece6a4a84f7ae8">USB_OSA_SR_ALLOC</a>();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="usb__osa__bm_8h.html#a0485f70bf9c9a22f0340f014bc567362">USB_OSA_ENTER_CRITICAL</a>();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">for</span> (; i &lt; <a class="code" href="usb__pd__config_8h.html#adc5392399bc3b25128cb488858c7b328">PD_CONFIG_MAX_PORT</a>; i++)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="comment">/* 如果该instance没有被occupy，则可以进行初始化 */</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="usb__pd__interface_8c.html#a6a65e61c995d1589e43589e733f45b57">s_PDInstance</a>[i].occupied != 1)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            uint8_t *buffer = (uint8_t *)&amp;<a class="code" href="usb__pd__interface_8c.html#a6a65e61c995d1589e43589e733f45b57">s_PDInstance</a>[i];</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <span class="keywordflow">for</span> (uint32_t j = 0U; j &lt; <span class="keyword">sizeof</span>(<a class="code" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a>); j++)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                buffer[j] = 0x00U;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <a class="code" href="usb__pd__interface_8c.html#a6a65e61c995d1589e43589e733f45b57">s_PDInstance</a>[i].<a class="code" href="struct__pd__instance.html#a4649287fd50df5de2602a502655f7bb2">occupied</a> = 1;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <a class="code" href="usb__osa__bm_8h.html#a5b8053eca19b6df666a26fad3b07f953">USB_OSA_EXIT_CRITICAL</a>();</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="keywordflow">return</span> &amp;<a class="code" href="usb__pd__interface_8c.html#a6a65e61c995d1589e43589e733f45b57">s_PDInstance</a>[i];</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="usb__osa__bm_8h.html#a5b8053eca19b6df666a26fad3b07f953">USB_OSA_EXIT_CRITICAL</a>();</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
<div class="ttc" id="usb__osa__bm_8h_html_a5b8053eca19b6df666a26fad3b07f953"><div class="ttname"><a href="usb__osa__bm_8h.html#a5b8053eca19b6df666a26fad3b07f953">USB_OSA_EXIT_CRITICAL</a></div><div class="ttdeci">#define USB_OSA_EXIT_CRITICAL()</div><div class="ttdef"><b>Definition:</b> usb_osa_bm.h:40</div></div>
<div class="ttc" id="usb__osa__bm_8h_html_a8dbccf46cc2f8e3b5cece6a4a84f7ae8"><div class="ttname"><a href="usb__osa__bm_8h.html#a8dbccf46cc2f8e3b5cece6a4a84f7ae8">USB_OSA_SR_ALLOC</a></div><div class="ttdeci">#define USB_OSA_SR_ALLOC()</div><div class="ttdef"><b>Definition:</b> usb_osa_bm.h:38</div></div>
<div class="ttc" id="struct__pd__instance_html_a4649287fd50df5de2602a502655f7bb2"><div class="ttname"><a href="struct__pd__instance.html#a4649287fd50df5de2602a502655f7bb2">_pd_instance::occupied</a></div><div class="ttdeci">volatile uint8_t occupied</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:126</div></div>
<div class="ttc" id="usb__pd__interface_8c_html_a6a65e61c995d1589e43589e733f45b57"><div class="ttname"><a href="usb__pd__interface_8c.html#a6a65e61c995d1589e43589e733f45b57">s_PDInstance</a></div><div class="ttdeci">static pd_instance_t s_PDInstance[PD_CONFIG_MAX_PORT]</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.c:55</div></div>
<div class="ttc" id="usb__pd__interface_8h_html_a1deb7ee8a70201e41a45bef369b5d692"><div class="ttname"><a href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a></div><div class="ttdeci">struct _pd_instance pd_instance_t</div></div>
<div class="ttc" id="usb__osa__bm_8h_html_a0485f70bf9c9a22f0340f014bc567362"><div class="ttname"><a href="usb__osa__bm_8h.html#a0485f70bf9c9a22f0340f014bc567362">USB_OSA_ENTER_CRITICAL</a></div><div class="ttdeci">#define USB_OSA_ENTER_CRITICAL()</div><div class="ttdef"><b>Definition:</b> usb_osa_bm.h:39</div></div>
<div class="ttc" id="usb__pd__config_8h_html_adc5392399bc3b25128cb488858c7b328"><div class="ttname"><a href="usb__pd__config_8h.html#adc5392399bc3b25128cb488858c7b328">PD_CONFIG_MAX_PORT</a></div><div class="ttdeci">#define PD_CONFIG_MAX_PORT</div><div class="ttdoc">PD stack instance max count. </div><div class="ttdef"><b>Definition:</b> usb_pd_config.h:45</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_aabf54379477268c9186bc3cbc84f29e2_icgraph.png" border="0" usemap="#usb__pd__interface_8c_aabf54379477268c9186bc3cbc84f29e2_icgraph" alt=""/></div>
<map name="usb__pd__interface_8c_aabf54379477268c9186bc3cbc84f29e2_icgraph" id="usb__pd__interface_8c_aabf54379477268c9186bc3cbc84f29e2_icgraph">
<area shape="rect" id="node2" href="group__usb__pd__stack.html#ga3ab001290dc934fd6a45ad93916f5140" title="Initialize PD stack instance. " alt="" coords="174,5,290,32"/><area shape="rect" id="node3" href="source__charger_2main_8c.html#ae90a39427d391ee932de4fd9adbcde6a" title="PD_AppInit" alt="" coords="339,5,429,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a33e4ca77d64aa73779c39be033ec640b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void PD_GetPhyInterface </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>phyType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__usb__pd__phy__drv.html#ga9494f6971e6132cb70c98b92f45af74f">pd_phy_api_interface_t</a> **&#160;</td>
          <td class="paramname"><em>controllerTable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#if ((defined PD_CONFIG_PTN5100_PORT) &amp;&amp; (PD_CONFIG_PTN5100_PORT))</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (phyType == <a class="code" href="group__usb__pd__stack.html#gga8bd01601105e164bc0e0bb538aaa5c1ca822af45ba751bc878c6931b765585412">kPD_PhyPTN5100</a>)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        *controllerTable = &amp;s_PTN5100Interface;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#if ((defined PD_CONFIG_PTN5110_PORT) &amp;&amp; (PD_CONFIG_PTN5110_PORT))</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (phyType == <a class="code" href="group__usb__pd__stack.html#gga8bd01601105e164bc0e0bb538aaa5c1ca6f0eabe71ca45162254c941b34558d2c">kPD_PhyPTN5110</a>)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        *controllerTable = &amp;s_PTN5110Interface;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor"></span>}</div>
<div class="ttc" id="group__usb__pd__stack_html_gga8bd01601105e164bc0e0bb538aaa5c1ca6f0eabe71ca45162254c941b34558d2c"><div class="ttname"><a href="group__usb__pd__stack.html#gga8bd01601105e164bc0e0bb538aaa5c1ca6f0eabe71ca45162254c941b34558d2c">kPD_PhyPTN5110</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:93</div></div>
<div class="ttc" id="group__usb__pd__stack_html_gga8bd01601105e164bc0e0bb538aaa5c1ca822af45ba751bc878c6931b765585412"><div class="ttname"><a href="group__usb__pd__stack.html#gga8bd01601105e164bc0e0bb538aaa5c1ca822af45ba751bc878c6931b765585412">kPD_PhyPTN5100</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:95</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_a33e4ca77d64aa73779c39be033ec640b_icgraph.png" border="0" usemap="#usb__pd__interface_8c_a33e4ca77d64aa73779c39be033ec640b_icgraph" alt=""/></div>
<map name="usb__pd__interface_8c_a33e4ca77d64aa73779c39be033ec640b_icgraph" id="usb__pd__interface_8c_a33e4ca77d64aa73779c39be033ec640b_icgraph">
<area shape="rect" id="node2" href="group__usb__pd__stack.html#ga3ab001290dc934fd6a45ad93916f5140" title="Initialize PD stack instance. " alt="" coords="198,5,314,32"/><area shape="rect" id="node3" href="source__charger_2main_8c.html#ae90a39427d391ee932de4fd9adbcde6a" title="PD_AppInit" alt="" coords="363,5,453,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8efd2af273b221ad6fe948153b704c96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PD_MsgInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *&#160;</td>
          <td class="paramname"><em>pdInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    pdInstance-&gt;<a class="code" href="struct__pd__instance.html#ac2c84f6b1ff2b7c8a1b1ac9ee358ef0e">receiveState</a> = 0;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    pdInstance-&gt;<a class="code" href="struct__pd__instance.html#accf867a3b224d5e7708c3167b49eb259">receivedData</a> = NULL;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    pdInstance-&gt;<a class="code" href="struct__pd__instance.html#af70b04cd5c8187c6a0424dea57205e8c">hardResetReceived</a> = 0;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a6031ed1c3ec10c04ea5daf9a76485f68">sendingMsgHeader</a>.<a class="code" href="struct__pd__msg__header.html#a3be91c1e7084d53533ddf706f450c28b">msgHeaderVal</a> = 0;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// call phy control function, control code is PD_PHY_RESET_MSG_FUNCTION</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// PDPTN5110_Control, usb_pd_ptn5110_interface.c</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// reset message related in phy layer</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="usb__pd__msg_8c.html#a555b1880b5b259c3fdcd3da821e06cf2">PD_PhyControl</a>(pdInstance, <a class="code" href="group__usb__pd__phy__drv.html#ggab8bfca50e2ac042b47a697c88f84c3eda12e5c95c04532128d54f63e4e76d2c6e">PD_PHY_RESET_MSG_FUNCTION</a>, NULL);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
<div class="ttc" id="group__usb__pd__phy__drv_html_ggab8bfca50e2ac042b47a697c88f84c3eda12e5c95c04532128d54f63e4e76d2c6e"><div class="ttname"><a href="group__usb__pd__phy__drv.html#ggab8bfca50e2ac042b47a697c88f84c3eda12e5c95c04532128d54f63e4e76d2c6e">PD_PHY_RESET_MSG_FUNCTION</a></div><div class="ttdef"><b>Definition:</b> usb_pd_phy.h:134</div></div>
<div class="ttc" id="struct__pd__instance_html_a6031ed1c3ec10c04ea5daf9a76485f68"><div class="ttname"><a href="struct__pd__instance.html#a6031ed1c3ec10c04ea5daf9a76485f68">_pd_instance::sendingMsgHeader</a></div><div class="ttdeci">volatile pd_msg_header_t sendingMsgHeader</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:119</div></div>
<div class="ttc" id="usb__pd__msg_8c_html_a555b1880b5b259c3fdcd3da821e06cf2"><div class="ttname"><a href="usb__pd__msg_8c.html#a555b1880b5b259c3fdcd3da821e06cf2">PD_PhyControl</a></div><div class="ttdeci">pd_status_t PD_PhyControl(pd_instance_t *pdInstance, uint32_t control, void *param)</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.c:122</div></div>
<div class="ttc" id="struct__pd__instance_html_ac2c84f6b1ff2b7c8a1b1ac9ee358ef0e"><div class="ttname"><a href="struct__pd__instance.html#ac2c84f6b1ff2b7c8a1b1ac9ee358ef0e">_pd_instance::receiveState</a></div><div class="ttdeci">volatile uint8_t receiveState</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:122</div></div>
<div class="ttc" id="struct__pd__instance_html_af70b04cd5c8187c6a0424dea57205e8c"><div class="ttname"><a href="struct__pd__instance.html#af70b04cd5c8187c6a0424dea57205e8c">_pd_instance::hardResetReceived</a></div><div class="ttdeci">volatile uint8_t hardResetReceived</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:124</div></div>
<div class="ttc" id="struct__pd__instance_html_accf867a3b224d5e7708c3167b49eb259"><div class="ttname"><a href="struct__pd__instance.html#accf867a3b224d5e7708c3167b49eb259">_pd_instance::receivedData</a></div><div class="ttdeci">volatile uint32_t * receivedData</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:117</div></div>
<div class="ttc" id="struct__pd__msg__header_html_a3be91c1e7084d53533ddf706f450c28b"><div class="ttname"><a href="struct__pd__msg__header.html#a3be91c1e7084d53533ddf706f450c28b">_pd_msg_header::msgHeaderVal</a></div><div class="ttdeci">uint16_t msgHeaderVal</div><div class="ttdef"><b>Definition:</b> usb_pd.h:1008</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_a8efd2af273b221ad6fe948153b704c96_cgraph.png" border="0" usemap="#usb__pd__interface_8c_a8efd2af273b221ad6fe948153b704c96_cgraph" alt=""/></div>
<map name="usb__pd__interface_8c_a8efd2af273b221ad6fe948153b704c96_cgraph" id="usb__pd__interface_8c_a8efd2af273b221ad6fe948153b704c96_cgraph">
<area shape="rect" id="node2" href="usb__pd__msg_8c.html#a555b1880b5b259c3fdcd3da821e06cf2" title="PD_PhyControl" alt="" coords="145,5,258,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_a8efd2af273b221ad6fe948153b704c96_icgraph.png" border="0" usemap="#usb__pd__interface_8c_a8efd2af273b221ad6fe948153b704c96_icgraph" alt=""/></div>
<map name="usb__pd__interface_8c_a8efd2af273b221ad6fe948153b704c96_icgraph" id="usb__pd__interface_8c_a8efd2af273b221ad6fe948153b704c96_icgraph">
<area shape="rect" id="node2" href="group__usb__pd__stack.html#ga3ab001290dc934fd6a45ad93916f5140" title="Initialize PD stack instance. " alt="" coords="145,5,261,32"/><area shape="rect" id="node4" href="usb__pd__policy_8c.html#a82812de846825e22cc625886aa4ed653" title="PD_MsgReset" alt="" coords="149,56,257,83"/><area shape="rect" id="node3" href="source__charger_2main_8c.html#ae90a39427d391ee932de4fd9adbcde6a" title="PD_AppInit" alt="" coords="334,5,423,32"/><area shape="rect" id="node5" href="usb__pd__policy_8c.html#afbd2eb3bceb62f29229f0bff6eed6844" title="PD_PsmEnterState" alt="" coords="310,56,447,83"/><area shape="rect" id="node6" href="usb__pd__policy_8c.html#ac6e31fa3949c6ca1288f96b6c5252bba" title="PD_PsmStateMachine" alt="" coords="496,56,651,83"/><area shape="rect" id="node7" href="usb__pd__policy_8c.html#a602f8622c0ba8d21b5013537dd3dadf9" title="PD_StackStateMachine" alt="" coords="699,56,861,83"/><area shape="rect" id="node8" href="group__usb__pd__stack.html#ga4227c58a9524464e19ee6efe9615f78e" title="PD stack&#39;s instance task. " alt="" coords="910,56,1037,83"/><area shape="rect" id="node9" href="main_8c.html#a616cf54a58f0aad132292f45995c3560" title="pd_port_task" alt="" coords="1086,56,1183,83"/><area shape="rect" id="node10" href="main_8c.html#a83c983ad37627b3d0f2ba5f1d4d6efaf" title="pd_demo_task" alt="" coords="1232,56,1339,83"/><area shape="rect" id="node11" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="1387,56,1437,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a81174001cad1ad0a3978c41a4e21daa0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PD_MsgReceived </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *&#160;</td>
          <td class="paramname"><em>pdInstance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>msgLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__usb__pd__stack.html#ga04a1f331d9807a70ab9bb753f5ed1c80">pd_status_t</a>&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;{</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (pdInstance-&gt;<a class="code" href="struct__pd__instance.html#ac2c84f6b1ff2b7c8a1b1ac9ee358ef0e">receiveState</a> == 1)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        pdInstance-&gt;<a class="code" href="struct__pd__instance.html#ac2c84f6b1ff2b7c8a1b1ac9ee358ef0e">receiveState</a> = 2;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a0d570b6b188a0e6756df839f35f346b5">receivedLength</a> = msgLength;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a64014dae5dccd1adb710c12fcc8b23cf">receiveResult</a> = result;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <a class="code" href="group__usb__os__abstraction.html#gaa83073c31cced5742027d4046bd633db">USB_OsaEventSet</a>(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#ab04e9fcc994b2547509169e07ab21465">taskEventHandle</a>, <a class="code" href="usb__pd__interface_8h.html#a08a5013301d9587b47017854a2ee5981ab7866880ca831b0f650c837287bbd60f">PD_TASK_EVENT_PD_MSG</a>);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div>
<div class="ttc" id="struct__pd__instance_html_a0d570b6b188a0e6756df839f35f346b5"><div class="ttname"><a href="struct__pd__instance.html#a0d570b6b188a0e6756df839f35f346b5">_pd_instance::receivedLength</a></div><div class="ttdeci">volatile uint32_t receivedLength</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:118</div></div>
<div class="ttc" id="struct__pd__instance_html_a64014dae5dccd1adb710c12fcc8b23cf"><div class="ttname"><a href="struct__pd__instance.html#a64014dae5dccd1adb710c12fcc8b23cf">_pd_instance::receiveResult</a></div><div class="ttdeci">volatile pd_status_t receiveResult</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:120</div></div>
<div class="ttc" id="struct__pd__instance_html_ac2c84f6b1ff2b7c8a1b1ac9ee358ef0e"><div class="ttname"><a href="struct__pd__instance.html#ac2c84f6b1ff2b7c8a1b1ac9ee358ef0e">_pd_instance::receiveState</a></div><div class="ttdeci">volatile uint8_t receiveState</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:122</div></div>
<div class="ttc" id="struct__pd__instance_html_ab04e9fcc994b2547509169e07ab21465"><div class="ttname"><a href="struct__pd__instance.html#ab04e9fcc994b2547509169e07ab21465">_pd_instance::taskEventHandle</a></div><div class="ttdeci">usb_osa_event_handle taskEventHandle</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:90</div></div>
<div class="ttc" id="usb__pd__interface_8h_html_a08a5013301d9587b47017854a2ee5981ab7866880ca831b0f650c837287bbd60f"><div class="ttname"><a href="usb__pd__interface_8h.html#a08a5013301d9587b47017854a2ee5981ab7866880ca831b0f650c837287bbd60f">PD_TASK_EVENT_PD_MSG</a></div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:62</div></div>
<div class="ttc" id="group__usb__os__abstraction_html_gaa83073c31cced5742027d4046bd633db"><div class="ttname"><a href="group__usb__os__abstraction.html#gaa83073c31cced5742027d4046bd633db">USB_OsaEventSet</a></div><div class="ttdeci">usb_osa_status_t USB_OsaEventSet(usb_osa_event_handle handle, uint32_t bitMask)</div><div class="ttdoc">Sets an event flag. </div><div class="ttdef"><b>Definition:</b> usb_osa_bm.c:174</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_a81174001cad1ad0a3978c41a4e21daa0_cgraph.png" border="0" usemap="#usb__pd__interface_8c_a81174001cad1ad0a3978c41a4e21daa0_cgraph" alt=""/></div>
<map name="usb__pd__interface_8c_a81174001cad1ad0a3978c41a4e21daa0_cgraph" id="usb__pd__interface_8c_a81174001cad1ad0a3978c41a4e21daa0_cgraph">
<area shape="rect" id="node2" href="group__usb__os__abstraction.html#gaa83073c31cced5742027d4046bd633db" title="Sets an event flag. " alt="" coords="182,5,317,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_a81174001cad1ad0a3978c41a4e21daa0_icgraph.png" border="0" usemap="#usb__pd__interface_8c_a81174001cad1ad0a3978c41a4e21daa0_icgraph" alt=""/></div>
<map name="usb__pd__interface_8c_a81174001cad1ad0a3978c41a4e21daa0_icgraph" id="usb__pd__interface_8c_a81174001cad1ad0a3978c41a4e21daa0_icgraph">
<area shape="rect" id="node2" href="group__usb__pd__phy__drv.html#ga7f7f94758771b173653d27c508c8b33f" title="Notify PD stack the PHY status. " alt="" coords="181,269,264,296"/><area shape="rect" id="node3" href="usb__pd__ptn5110__hal_8c.html#a835e57283bb576d741f5668e2ebc55f6" title="PDPTN5110_PsStatChangeInt\lCallback" alt="" coords="611,227,813,269"/><area shape="rect" id="node4" href="usb__pd__ptn5110__hal_8c.html#a706cb45223c529b6d01188e28d28a817" title="Handler for Int10. " alt="" coords="875,293,1077,320"/><area shape="rect" id="node7" href="usb__pd__ptn5110__hal_8c.html#a8eed919866963307f312dd995cca3e82" title="Callback for VBUS Voltage Alarm Lo alert. " alt="" coords="607,345,817,386"/><area shape="rect" id="node8" href="usb__pd__ptn5110__interface_8c.html#a9bd17dd5e461a91ba93e8452b66820fa" title="PDPTN5110_Receive" alt="" coords="355,244,506,271"/><area shape="rect" id="node9" href="group__usb__pd__stack.html#gadc10377ece46e63b966463e501451e33" title="PD PTN5110 PHY ISR function. " alt="" coords="347,143,515,169"/><area shape="rect" id="node11" href="usb__pd__ptn5110__msg_8c.html#ab7229a8cdc4e1c840c8fd1a0d1d5b75c" title="Get the bist data from the HW registers (unused) " alt="" coords="317,402,544,443"/><area shape="rect" id="node12" href="usb__pd__ptn5110__msg_8c.html#aeab1126bfe7625c8fba3cb342eb6aa99" title="PDPTN5110_MsgSendCompLete" alt="" coords="321,63,540,89"/><area shape="rect" id="node15" href="usb__pd__ptn5110__msg_8c.html#ac5a47c3292f0eb098cbec28f49b8ede7" title="PDPTN5110_MsgReceiveCompLete" alt="" coords="313,469,549,496"/><area shape="rect" id="node5" href="usb__pd__ptn5110__hal_8c.html#ae5d40eccd3a7c7902b303d44cedb6a42" title="Callback to be called on assertion of INT_N by victoria. " alt="" coords="1126,293,1327,320"/><area shape="rect" id="node6" href="usb__pd__ptn5110__interface_8c.html#a91fdd39ab055725caf3867261e584c2f" title="PDPTN5110_Control" alt="" coords="1377,293,1522,320"/><area shape="rect" id="node10" href="pd__app_8c.html#af2521ef8b447748866a3ad2c818faa92" title="PORTB_PORTC_PORTD_PORTE\l_IRQHandler" alt="" coords="597,162,827,203"/><area shape="rect" id="node13" href="usb__pd__ptn5110__msg_8c.html#a9917c53219ae71793f1543d8433eae4e" title="PDPTN5110_MsgHalSendAbort\lIsrProcess" alt="" coords="607,31,817,73"/><area shape="rect" id="node14" href="usb__pd__ptn5110__msg_8c.html#a6ac6dd7f29e5cefa92f6b94392ea74b6" title="PDPTN5110_MsgHalSendSuccess\lIsrProcess" alt="" coords="597,97,827,138"/><area shape="rect" id="node16" href="usb__pd__ptn5110__msg_8c.html#aa9f537f03af07588daf3ee11e48f9f20" title="This is called by the interrupt controller when we receive a message. " alt="" coords="599,462,825,503"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6ad144a0e0d32b011f83156c3edd30a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PD_MsgSendDone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *&#160;</td>
          <td class="paramname"><em>pdInstance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__usb__pd__stack.html#ga04a1f331d9807a70ab9bb753f5ed1c80">pd_status_t</a>&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// 1: sending</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">if</span> (pdInstance-&gt;<a class="code" href="struct__pd__instance.html#ad19f652f47e237558f18b224b5d57e23">sendingState</a> == 1)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="comment">// 2: send call back done</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        pdInstance-&gt;<a class="code" href="struct__pd__instance.html#ad19f652f47e237558f18b224b5d57e23">sendingState</a> = 2;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="comment">// 设置为特定result</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        pdInstance-&gt;<a class="code" href="struct__pd__instance.html#ac02af68a4c0e36f39a1b3203c5638c2b">sendingResult</a> = result;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="comment">// 采用freertos中的event group，进行通知</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="group__usb__os__abstraction.html#gaa83073c31cced5742027d4046bd633db">USB_OsaEventSet</a>(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#ab04e9fcc994b2547509169e07ab21465">taskEventHandle</a>, <a class="code" href="usb__pd__interface_8h.html#a08a5013301d9587b47017854a2ee5981a01e917815dd3d2d16283e6ff86f9b1c6">PD_TASK_EVENT_SEND_DONE</a>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="ttc" id="usb__pd__interface_8h_html_a08a5013301d9587b47017854a2ee5981a01e917815dd3d2d16283e6ff86f9b1c6"><div class="ttname"><a href="usb__pd__interface_8h.html#a08a5013301d9587b47017854a2ee5981a01e917815dd3d2d16283e6ff86f9b1c6">PD_TASK_EVENT_SEND_DONE</a></div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:64</div></div>
<div class="ttc" id="struct__pd__instance_html_ad19f652f47e237558f18b224b5d57e23"><div class="ttname"><a href="struct__pd__instance.html#ad19f652f47e237558f18b224b5d57e23">_pd_instance::sendingState</a></div><div class="ttdeci">volatile uint8_t sendingState</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:125</div></div>
<div class="ttc" id="struct__pd__instance_html_ac02af68a4c0e36f39a1b3203c5638c2b"><div class="ttname"><a href="struct__pd__instance.html#ac02af68a4c0e36f39a1b3203c5638c2b">_pd_instance::sendingResult</a></div><div class="ttdeci">volatile pd_status_t sendingResult</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:121</div></div>
<div class="ttc" id="struct__pd__instance_html_ab04e9fcc994b2547509169e07ab21465"><div class="ttname"><a href="struct__pd__instance.html#ab04e9fcc994b2547509169e07ab21465">_pd_instance::taskEventHandle</a></div><div class="ttdeci">usb_osa_event_handle taskEventHandle</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:90</div></div>
<div class="ttc" id="group__usb__os__abstraction_html_gaa83073c31cced5742027d4046bd633db"><div class="ttname"><a href="group__usb__os__abstraction.html#gaa83073c31cced5742027d4046bd633db">USB_OsaEventSet</a></div><div class="ttdeci">usb_osa_status_t USB_OsaEventSet(usb_osa_event_handle handle, uint32_t bitMask)</div><div class="ttdoc">Sets an event flag. </div><div class="ttdef"><b>Definition:</b> usb_osa_bm.c:174</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_a6ad144a0e0d32b011f83156c3edd30a8_cgraph.png" border="0" usemap="#usb__pd__interface_8c_a6ad144a0e0d32b011f83156c3edd30a8_cgraph" alt=""/></div>
<map name="usb__pd__interface_8c_a6ad144a0e0d32b011f83156c3edd30a8_cgraph" id="usb__pd__interface_8c_a6ad144a0e0d32b011f83156c3edd30a8_cgraph">
<area shape="rect" id="node2" href="group__usb__os__abstraction.html#gaa83073c31cced5742027d4046bd633db" title="Sets an event flag. " alt="" coords="190,5,325,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_a6ad144a0e0d32b011f83156c3edd30a8_icgraph.png" border="0" usemap="#usb__pd__interface_8c_a6ad144a0e0d32b011f83156c3edd30a8_icgraph" alt=""/></div>
<map name="usb__pd__interface_8c_a6ad144a0e0d32b011f83156c3edd30a8_icgraph" id="usb__pd__interface_8c_a6ad144a0e0d32b011f83156c3edd30a8_icgraph">
<area shape="rect" id="node2" href="group__usb__pd__phy__drv.html#ga7f7f94758771b173653d27c508c8b33f" title="Notify PD stack the PHY status. " alt="" coords="189,269,272,296"/><area shape="rect" id="node3" href="usb__pd__ptn5110__hal_8c.html#a835e57283bb576d741f5668e2ebc55f6" title="PDPTN5110_PsStatChangeInt\lCallback" alt="" coords="619,227,821,269"/><area shape="rect" id="node4" href="usb__pd__ptn5110__hal_8c.html#a706cb45223c529b6d01188e28d28a817" title="Handler for Int10. " alt="" coords="883,293,1085,320"/><area shape="rect" id="node7" href="usb__pd__ptn5110__hal_8c.html#a8eed919866963307f312dd995cca3e82" title="Callback for VBUS Voltage Alarm Lo alert. " alt="" coords="615,345,825,386"/><area shape="rect" id="node8" href="usb__pd__ptn5110__interface_8c.html#a9bd17dd5e461a91ba93e8452b66820fa" title="PDPTN5110_Receive" alt="" coords="363,244,514,271"/><area shape="rect" id="node9" href="group__usb__pd__stack.html#gadc10377ece46e63b966463e501451e33" title="PD PTN5110 PHY ISR function. " alt="" coords="355,143,523,169"/><area shape="rect" id="node11" href="usb__pd__ptn5110__msg_8c.html#ab7229a8cdc4e1c840c8fd1a0d1d5b75c" title="Get the bist data from the HW registers (unused) " alt="" coords="325,402,552,443"/><area shape="rect" id="node12" href="usb__pd__ptn5110__msg_8c.html#aeab1126bfe7625c8fba3cb342eb6aa99" title="PDPTN5110_MsgSendCompLete" alt="" coords="329,63,548,89"/><area shape="rect" id="node15" href="usb__pd__ptn5110__msg_8c.html#ac5a47c3292f0eb098cbec28f49b8ede7" title="PDPTN5110_MsgReceiveCompLete" alt="" coords="321,469,557,496"/><area shape="rect" id="node5" href="usb__pd__ptn5110__hal_8c.html#ae5d40eccd3a7c7902b303d44cedb6a42" title="Callback to be called on assertion of INT_N by victoria. " alt="" coords="1134,293,1335,320"/><area shape="rect" id="node6" href="usb__pd__ptn5110__interface_8c.html#a91fdd39ab055725caf3867261e584c2f" title="PDPTN5110_Control" alt="" coords="1385,293,1530,320"/><area shape="rect" id="node10" href="pd__app_8c.html#af2521ef8b447748866a3ad2c818faa92" title="PORTB_PORTC_PORTD_PORTE\l_IRQHandler" alt="" coords="605,162,835,203"/><area shape="rect" id="node13" href="usb__pd__ptn5110__msg_8c.html#a9917c53219ae71793f1543d8433eae4e" title="PDPTN5110_MsgHalSendAbort\lIsrProcess" alt="" coords="615,31,825,73"/><area shape="rect" id="node14" href="usb__pd__ptn5110__msg_8c.html#a6ac6dd7f29e5cefa92f6b94392ea74b6" title="PDPTN5110_MsgHalSendSuccess\lIsrProcess" alt="" coords="605,97,835,138"/><area shape="rect" id="node16" href="usb__pd__ptn5110__msg_8c.html#aa9f537f03af07588daf3ee11e48f9f20" title="This is called by the interrupt controller when we receive a message. " alt="" coords="607,462,833,503"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a555b1880b5b259c3fdcd3da821e06cf2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__usb__pd__stack.html#ga04a1f331d9807a70ab9bb753f5ed1c80">pd_status_t</a> PD_PhyControl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *&#160;</td>
          <td class="paramname"><em>pdInstance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// usb_pd_phy.h: pd_phy_control_t enum</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> ((control == <a class="code" href="group__usb__pd__phy__drv.html#ggab8bfca50e2ac042b47a697c88f84c3edadd7a49b2857f7cc9b4708cb899950eec">PD_PHY_UPDATE_STATE</a>) ||</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        (<a class="code" href="group__usb__os__abstraction.html#gab25fb5d93d3b665ca8eadf2a670d3361">USB_OsaEventCheck</a>(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#ab04e9fcc994b2547509169e07ab21465">taskEventHandle</a>, <a class="code" href="usb__pd__interface_8h.html#a08a5013301d9587b47017854a2ee5981ac05d4679325cb8c3a8491b9812e28924">PD_TASK_EVENT_PHY_STATE_CHAGNE</a>, NULL) ==</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;         <a class="code" href="group__usb__os__abstraction.html#gga453ebd2f93aafb8c938c3a23c815f9bdab90805fb75297fda1ca60dbb2283f933">kStatus_USB_OSA_Success</a>))</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="group__usb__os__abstraction.html#ga90357f04d40469dc07104033b3c8581c">USB_OsaEventClear</a>(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#ab04e9fcc994b2547509169e07ab21465">taskEventHandle</a>, <a class="code" href="usb__pd__interface_8h.html#a08a5013301d9587b47017854a2ee5981ac05d4679325cb8c3a8491b9812e28924">PD_TASK_EVENT_PHY_STATE_CHAGNE</a>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="comment">// pd/usb_pd_interface.c中初始化，对应phy中的control函数</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        pdInstance-&gt;<a class="code" href="struct__pd__instance.html#adbed7b2cd53df40e0611a8879c903339">phyInterface</a>-&gt;<a class="code" href="struct__pd__phy__api__interface.html#a5e422dbfd66fca34934e39b451f17094">pdPhyControl</a>(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a7c1184292efe9a5ae30b6ac422c1e9f4">pdPhyHandle</a>, <a class="code" href="group__usb__pd__phy__drv.html#ggab8bfca50e2ac042b47a697c88f84c3edadd7a49b2857f7cc9b4708cb899950eec">PD_PHY_UPDATE_STATE</a>, NULL);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        NVIC_EnableIRQ((IRQn_Type)pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a2d9a457d63da9c4cb5e3feece0cbf3ec">pdConfig</a>-&gt;<a class="code" href="struct__pd__instance__config.html#a131f930f58f1a9bfe1488acb62aa2725">phyInterruptNum</a>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// call PDPTN5110_Control</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (control != <a class="code" href="group__usb__pd__phy__drv.html#ggab8bfca50e2ac042b47a697c88f84c3edadd7a49b2857f7cc9b4708cb899950eec">PD_PHY_UPDATE_STATE</a>)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">return</span> pdInstance-&gt;<a class="code" href="struct__pd__instance.html#adbed7b2cd53df40e0611a8879c903339">phyInterface</a>-&gt;<a class="code" href="struct__pd__phy__api__interface.html#a5e422dbfd66fca34934e39b451f17094">pdPhyControl</a>(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a7c1184292efe9a5ae30b6ac422c1e9f4">pdPhyHandle</a>, control, param);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__usb__pd__stack.html#ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555">kStatus_PD_Success</a>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
<div class="ttc" id="struct__pd__instance_html_adbed7b2cd53df40e0611a8879c903339"><div class="ttname"><a href="struct__pd__instance.html#adbed7b2cd53df40e0611a8879c903339">_pd_instance::phyInterface</a></div><div class="ttdeci">const pd_phy_api_interface_t * phyInterface</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:86</div></div>
<div class="ttc" id="group__usb__pd__phy__drv_html_ggab8bfca50e2ac042b47a697c88f84c3edadd7a49b2857f7cc9b4708cb899950eec"><div class="ttname"><a href="group__usb__pd__phy__drv.html#ggab8bfca50e2ac042b47a697c88f84c3edadd7a49b2857f7cc9b4708cb899950eec">PD_PHY_UPDATE_STATE</a></div><div class="ttdef"><b>Definition:</b> usb_pd_phy.h:92</div></div>
<div class="ttc" id="usb__pd__interface_8h_html_a08a5013301d9587b47017854a2ee5981ac05d4679325cb8c3a8491b9812e28924"><div class="ttname"><a href="usb__pd__interface_8h.html#a08a5013301d9587b47017854a2ee5981ac05d4679325cb8c3a8491b9812e28924">PD_TASK_EVENT_PHY_STATE_CHAGNE</a></div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:66</div></div>
<div class="ttc" id="struct__pd__instance_html_a7c1184292efe9a5ae30b6ac422c1e9f4"><div class="ttname"><a href="struct__pd__instance.html#a7c1184292efe9a5ae30b6ac422c1e9f4">_pd_instance::pdPhyHandle</a></div><div class="ttdeci">pd_phy_handle pdPhyHandle</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:81</div></div>
<div class="ttc" id="group__usb__pd__stack_html_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555"><div class="ttname"><a href="group__usb__pd__stack.html#ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555">kStatus_PD_Success</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:80</div></div>
<div class="ttc" id="struct__pd__instance__config_html_a131f930f58f1a9bfe1488acb62aa2725"><div class="ttname"><a href="struct__pd__instance__config.html#a131f930f58f1a9bfe1488acb62aa2725">_pd_instance_config::phyInterruptNum</a></div><div class="ttdeci">uint8_t phyInterruptNum</div><div class="ttdef"><b>Definition:</b> usb_pd.h:789</div></div>
<div class="ttc" id="struct__pd__instance_html_ab04e9fcc994b2547509169e07ab21465"><div class="ttname"><a href="struct__pd__instance.html#ab04e9fcc994b2547509169e07ab21465">_pd_instance::taskEventHandle</a></div><div class="ttdeci">usb_osa_event_handle taskEventHandle</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:90</div></div>
<div class="ttc" id="group__usb__os__abstraction_html_gga453ebd2f93aafb8c938c3a23c815f9bdab90805fb75297fda1ca60dbb2283f933"><div class="ttname"><a href="group__usb__os__abstraction.html#gga453ebd2f93aafb8c938c3a23c815f9bdab90805fb75297fda1ca60dbb2283f933">kStatus_USB_OSA_Success</a></div><div class="ttdef"><b>Definition:</b> usb_osa.h:66</div></div>
<div class="ttc" id="struct__pd__instance_html_a2d9a457d63da9c4cb5e3feece0cbf3ec"><div class="ttname"><a href="struct__pd__instance.html#a2d9a457d63da9c4cb5e3feece0cbf3ec">_pd_instance::pdConfig</a></div><div class="ttdeci">pd_instance_config_t * pdConfig</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:83</div></div>
<div class="ttc" id="struct__pd__phy__api__interface_html_a5e422dbfd66fca34934e39b451f17094"><div class="ttname"><a href="struct__pd__phy__api__interface.html#a5e422dbfd66fca34934e39b451f17094">_pd_phy_api_interface::pdPhyControl</a></div><div class="ttdeci">pd_status_t(* pdPhyControl)(pd_phy_handle pdPhyHandle, uint32_t control, void *param)</div><div class="ttdoc">control phy </div><div class="ttdef"><b>Definition:</b> usb_pd_phy.h:385</div></div>
<div class="ttc" id="group__usb__os__abstraction_html_ga90357f04d40469dc07104033b3c8581c"><div class="ttname"><a href="group__usb__os__abstraction.html#ga90357f04d40469dc07104033b3c8581c">USB_OsaEventClear</a></div><div class="ttdeci">usb_osa_status_t USB_OsaEventClear(usb_osa_event_handle handle, uint32_t bitMask)</div><div class="ttdoc">Clears an event flag. </div><div class="ttdef"><b>Definition:</b> usb_osa_bm.c:257</div></div>
<div class="ttc" id="group__usb__os__abstraction_html_gab25fb5d93d3b665ca8eadf2a670d3361"><div class="ttname"><a href="group__usb__os__abstraction.html#gab25fb5d93d3b665ca8eadf2a670d3361">USB_OsaEventCheck</a></div><div class="ttdeci">usb_osa_status_t USB_OsaEventCheck(usb_osa_event_handle handle, uint32_t bitMask, uint32_t *bitSet)</div><div class="ttdoc">Checks an event flag. </div><div class="ttdef"><b>Definition:</b> usb_osa_bm.c:230</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_a555b1880b5b259c3fdcd3da821e06cf2_cgraph.png" border="0" usemap="#usb__pd__interface_8c_a555b1880b5b259c3fdcd3da821e06cf2_cgraph" alt=""/></div>
<map name="usb__pd__interface_8c_a555b1880b5b259c3fdcd3da821e06cf2_cgraph" id="usb__pd__interface_8c_a555b1880b5b259c3fdcd3da821e06cf2_cgraph">
<area shape="rect" id="node2" href="group__usb__os__abstraction.html#gab25fb5d93d3b665ca8eadf2a670d3361" title="Checks an event flag. " alt="" coords="169,5,322,32"/><area shape="rect" id="node3" href="group__usb__os__abstraction.html#ga90357f04d40469dc07104033b3c8581c" title="Clears an event flag. " alt="" coords="172,56,319,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_a555b1880b5b259c3fdcd3da821e06cf2_icgraph.png" border="0" usemap="#usb__pd__interface_8c_a555b1880b5b259c3fdcd3da821e06cf2_icgraph" alt=""/></div>
<map name="usb__pd__interface_8c_a555b1880b5b259c3fdcd3da821e06cf2_icgraph" id="usb__pd__interface_8c_a555b1880b5b259c3fdcd3da821e06cf2_icgraph">
<area shape="rect" id="node2" href="usb__pd__connect_8c.html#a0608faf2438b33700fc4680061ae69ab" title="PD_ConnectSetupNewState" alt="" coords="185,503,375,530"/><area shape="rect" id="node3" href="usb__pd__connect_8c.html#a4cb64b10c04da73729388d11be51338e" title="PD_ConnectStateDrpToggle\lSrcOrSnkFirstProcess" alt="" coords="445,337,633,379"/><area shape="rect" id="node4" href="usb__pd__connect_8c.html#a6147b33e99b7812c8de585d73af2f2c4" title="PD_ConnectStateMachine" alt="" coords="715,286,893,313"/><area shape="rect" id="node6" href="usb__pd__policy_8c.html#a602f8622c0ba8d21b5013537dd3dadf9" title="PD_StackStateMachine" alt="" coords="1376,809,1539,835"/><area shape="rect" id="node8" href="usb__pd__policy_8c.html#ac1262f667cd36f90f205a468ba59b1d4" title="PD_ConnectInitRole" alt="" coords="467,555,610,582"/><area shape="rect" id="node10" href="usb__pd__policy_8c.html#afbd2eb3bceb62f29229f0bff6eed6844" title="PD_PsmEnterState" alt="" coords="979,1062,1117,1089"/><area shape="rect" id="node11" href="usb__pd__policy_8c.html#ac6e31fa3949c6ca1288f96b6c5252bba" title="PD_PsmStateMachine" alt="" coords="1173,910,1328,937"/><area shape="rect" id="node13" href="usb__pd__policy_8c.html#ac46d497d9fc03b0096c2977f6a203e02" title="PD_PsmProcessState" alt="" coords="971,1661,1125,1687"/><area shape="rect" id="node14" href="usb__pd__connect_8c.html#af6d40e216e9c36436e8363ff28113a3a" title="PD_ConnectStateSrcUnattached\lSrcProcess" alt="" coords="173,201,387,243"/><area shape="rect" id="node15" href="usb__pd__connect_8c.html#a6313417f32370723f208ee8129f7348b" title="PD_ConnectStateSrcAttach\lWaitSrcProcess" alt="" coords="187,283,373,324"/><area shape="rect" id="node16" href="usb__pd__connect_8c.html#ad9e61e9e67e7d53a66151eae69b658d8" title="PD_ConnectStateSnkAttach\lWaitSnkProcess" alt="" coords="185,380,375,421"/><area shape="rect" id="node17" href="usb__pd__connect_8c.html#a0144954fa9035cc4e57c20a6a32713c8" title="PD_ConnectStateSnkAttached\lSnkProcess" alt="" coords="179,76,381,117"/><area shape="rect" id="node18" href="usb__pd__policy_8c.html#a83de99272e34bf7bad5146401157ccff" title="PD_ConnectSetPowerProgress" alt="" coords="177,758,383,785"/><area shape="rect" id="node20" href="group__usb__pd__stack.html#gaa61d0ac40ef36db1ef5a88532f6eea90" title="start up PD command. " alt="" coords="485,1113,593,1139"/><area shape="rect" id="node23" href="usb__pd__policy_8c.html#a094d9150746a4bc943e34a883ed51c38" title="PD_PsmPrimaryStateProcess\lPdMsg" alt="" coords="705,1367,903,1408"/><area shape="rect" id="node24" href="group__usb__pd__stack.html#ga3ab001290dc934fd6a45ad93916f5140" title="Initialize PD stack instance. " alt="" coords="481,1163,597,1190"/><area shape="rect" id="node26" href="usb__pd__msg_8c.html#a8efd2af273b221ad6fe948153b704c96" title="PD_MsgInit" alt="" coords="235,859,325,886"/><area shape="rect" id="node27" href="usb__pd__policy_8c.html#a82812de846825e22cc625886aa4ed653" title="PD_MsgReset" alt="" coords="485,859,593,886"/><area shape="rect" id="node28" href="usb__pd__policy_8c.html#a4c31fc7951e54e4e153f64d3a8e229ef" title="PD_MsgDisable" alt="" coords="221,2091,339,2118"/><area shape="rect" id="node29" href="usb__pd__policy_8c.html#aa2694544089f6e2d123810cd48b27d6e" title="PD_PsmDisconnect" alt="" coords="468,2091,609,2118"/><area shape="rect" id="node31" href="usb__pd__policy_8c.html#a1ae8632e71437586ae348c78f1518772" title="PD_MsgSetPortRole" alt="" coords="467,1467,611,1494"/><area shape="rect" id="node33" href="usb__pd__policy_8c.html#a31725b2a47c3137de52deb06cfb27e56" title="PD_MsgWaitSendResult" alt="" coords="455,1585,623,1611"/><area shape="rect" id="node36" href="usb__pd__policy_8c.html#ab97edd8ad822d84ac4c3c60716d949e6" title="PD_MsgSendHardReset" alt="" coords="197,1011,363,1038"/><area shape="rect" id="node37" href="usb__pd__policy_8c.html#a76b0f4cfb65f3523c10e8e472f42d9c4" title="PD_MsgStopReceive" alt="" coords="730,2041,878,2067"/><area shape="rect" id="node38" href="usb__pd__msg_8c.html#a0f4c4b5235e5789a5b705a458ff97bfe" title="PD_MsgSrcStartCommand" alt="" coords="189,1265,371,1291"/><area shape="rect" id="node40" href="usb__pd__policy_8c.html#a90012fae056618ce9b4431bd004a852a" title="PD_MsgSrcEndCommand" alt="" coords="192,961,368,987"/><area shape="rect" id="node41" href="usb__pd__msg_8c.html#a5181f0cdc3342fe4e3898f08f5cf73b6" title="PD_MsgSnkCheckStartCommand" alt="" coords="169,1315,391,1342"/><area shape="rect" id="node42" href="usb__pd__policy_8c.html#a275c11fb3caf0d669e274a15f4c39f61" title="PD_PsmReset" alt="" coords="483,1366,594,1393"/><area shape="rect" id="node43" href="usb__pd__policy_8c.html#a39aa541f6a8e3843b3ab18fdcf533768" title="PD_PortTaskEventProcess" alt="" coords="189,1939,371,1966"/><area shape="rect" id="node44" href="usb__pd__policy_8c.html#a8afdb6c45b33f168a2fb95395714bdfa" title="PD_DpmDischargeVbus" alt="" coords="456,657,621,683"/><area shape="rect" id="node45" href="usb__pd__policy_8c.html#ac70b1975475b5b94815c02eb5be41e1a" title="PD_DpmSetVconn" alt="" coords="737,1889,871,1915"/><area shape="rect" id="node46" href="usb__pd__policy_8c.html#ade792f3a5e9ffb477a9598ad4a3fb697" title="PD_DpmCheckVbus" alt="" coords="732,1787,876,1814"/><area shape="rect" id="node47" href="usb__pd__policy_8c.html#abdde9b20d8e38e68b6de66b1e9ece3eb" title="PD_DpmCheckLessOrEqualVsafe5v" alt="" coords="685,1737,923,1763"/><area shape="rect" id="node49" href="usb__pd__policy_8c.html#a95fba600d6ef64c773c5bbe23666aa6e" title="PD_DpmCheckVsafe0V" alt="" coords="722,1113,886,1139"/><area shape="rect" id="node50" href="group__usb__pd__stack.html#gac3d77e334213f541028d2da518086ca2" title="Control PD stack and get info from PD stack. " alt="" coords="235,1214,325,1241"/><area shape="rect" id="node9" href="usb__pd__policy_8c.html#a3aa051f964b97e729b999996b3cf4efe" title="PD_ConnectSetPRSwapRole" alt="" coords="441,454,637,481"/><area shape="rect" id="node12" href="usb__pd__policy_8c.html#af415d8897be39b06937aa0c1316abca9" title="PD_ConnectAltModeEnterFail" alt="" coords="705,809,903,835"/><area shape="rect" id="node5" href="usb__pd__policy_8c.html#a25116c60801fe4f4def90e3e42614b54" title="PD_ConnectCheck" alt="" coords="1183,298,1318,325"/><area shape="rect" id="node7" href="group__usb__pd__stack.html#ga4227c58a9524464e19ee6efe9615f78e" title="PD stack&#39;s instance task. " alt="" coords="1587,809,1714,835"/><area shape="rect" id="node19" href="usb__pd__policy_8c.html#ac674e40520a08c8895ec4e852a3751c7" title="PD_PsmSetNormalPower" alt="" coords="451,707,626,734"/><area shape="rect" id="node22" href="usb__pd__policy_8c.html#a694e9dd685d69f5b21d23e6bbee6e7d9" title="PD_DpmAppCallback" alt="" coords="463,961,614,987"/><area shape="rect" id="node21" href="pd__app__demo_8c.html#a35a5744ceb43d67dc3bf4d2040c39a54" title="USB_PDDemoProcessMenu" alt="" coords="709,1214,899,1241"/><area shape="rect" id="node25" href="source__charger_2main_8c.html#ae90a39427d391ee932de4fd9adbcde6a" title="PD_AppInit" alt="" coords="759,1163,849,1190"/><area shape="rect" id="node30" href="usb__pd__policy_8c.html#abc2774ff9e02e6ff6ff4a5fb8088c344" title="PD_DpmDisconnect" alt="" coords="733,2091,875,2118"/><area shape="rect" id="node32" href="usb__pd__policy_8c.html#aec90d4fab260652b95f5027a080bff6b" title="PD_PsmConnect" alt="" coords="742,1433,866,1459"/><area shape="rect" id="node34" href="usb__pd__policy_8c.html#aebb9e4a574913ad404235c42dd319730" title="PD_MsgSendControlTransition" alt="" coords="703,1635,905,1662"/><area shape="rect" id="node35" href="usb__pd__policy_8c.html#a954ab3161cbbe8dcb01c1904d4796ec5" title="PD_MsgSendDataTransition" alt="" coords="710,1585,898,1611"/><area shape="rect" id="node39" href="usb__pd__policy_8c.html#a26fc00ebd036043cf62cc2e558becd5c" title="PD_PsmStartCommand" alt="" coords="457,1290,620,1317"/><area shape="rect" id="node48" href="group__usb__pd__phy__drv.html#ga7f7f94758771b173653d27c508c8b33f" title="Notify PD stack the PHY status. " alt="" coords="1007,1737,1089,1763"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8c50cfda5ec549f60ac482d06231d26f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void PD_ReleaseInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *&#160;</td>
          <td class="paramname"><em>pdInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="usb__osa__bm_8h.html#a8dbccf46cc2f8e3b5cece6a4a84f7ae8">USB_OSA_SR_ALLOC</a>();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="usb__osa__bm_8h.html#a0485f70bf9c9a22f0340f014bc567362">USB_OSA_ENTER_CRITICAL</a>();</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a4649287fd50df5de2602a502655f7bb2">occupied</a> = 0;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="usb__osa__bm_8h.html#a5b8053eca19b6df666a26fad3b07f953">USB_OSA_EXIT_CRITICAL</a>();</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div>
<div class="ttc" id="usb__osa__bm_8h_html_a5b8053eca19b6df666a26fad3b07f953"><div class="ttname"><a href="usb__osa__bm_8h.html#a5b8053eca19b6df666a26fad3b07f953">USB_OSA_EXIT_CRITICAL</a></div><div class="ttdeci">#define USB_OSA_EXIT_CRITICAL()</div><div class="ttdef"><b>Definition:</b> usb_osa_bm.h:40</div></div>
<div class="ttc" id="usb__osa__bm_8h_html_a8dbccf46cc2f8e3b5cece6a4a84f7ae8"><div class="ttname"><a href="usb__osa__bm_8h.html#a8dbccf46cc2f8e3b5cece6a4a84f7ae8">USB_OSA_SR_ALLOC</a></div><div class="ttdeci">#define USB_OSA_SR_ALLOC()</div><div class="ttdef"><b>Definition:</b> usb_osa_bm.h:38</div></div>
<div class="ttc" id="struct__pd__instance_html_a4649287fd50df5de2602a502655f7bb2"><div class="ttname"><a href="struct__pd__instance.html#a4649287fd50df5de2602a502655f7bb2">_pd_instance::occupied</a></div><div class="ttdeci">volatile uint8_t occupied</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:126</div></div>
<div class="ttc" id="usb__osa__bm_8h_html_a0485f70bf9c9a22f0340f014bc567362"><div class="ttname"><a href="usb__osa__bm_8h.html#a0485f70bf9c9a22f0340f014bc567362">USB_OSA_ENTER_CRITICAL</a></div><div class="ttdeci">#define USB_OSA_ENTER_CRITICAL()</div><div class="ttdef"><b>Definition:</b> usb_osa_bm.h:39</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_a8c50cfda5ec549f60ac482d06231d26f_icgraph.png" border="0" usemap="#usb__pd__interface_8c_a8c50cfda5ec549f60ac482d06231d26f_icgraph" alt=""/></div>
<map name="usb__pd__interface_8c_a8c50cfda5ec549f60ac482d06231d26f_icgraph" id="usb__pd__interface_8c_a8c50cfda5ec549f60ac482d06231d26f_icgraph">
<area shape="rect" id="node2" href="group__usb__pd__stack.html#ga3ab001290dc934fd6a45ad93916f5140" title="Initialize PD stack instance. " alt="" coords="209,5,325,32"/><area shape="rect" id="node4" href="group__usb__pd__stack.html#ga2a517af9491514966ad9c806eb998f78" title="de&#45;initialize PD stack instance. " alt="" coords="201,56,333,83"/><area shape="rect" id="node3" href="source__charger_2main_8c.html#ae90a39427d391ee932de4fd9adbcde6a" title="PD_AppInit" alt="" coords="406,5,495,32"/><area shape="rect" id="node5" href="battery_2pd__app__demo_8c.html#a5a66a0380a323ac58a24d481949aaf05" title="PD_DemoPDReset" alt="" coords="382,56,519,83"/><area shape="rect" id="node6" href="battery_2pd__app__demo_8c.html#a8695f73a631d0d7fa71c0d0301d6ff18" title="PD_DemoTaskFun" alt="" coords="569,56,703,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a602f8622c0ba8d21b5013537dd3dadf9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PD_StackStateMachine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> *&#160;</td>
          <td class="paramname"><em>pdInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;{</div>
<div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;    uint32_t taskEventSet;</div>
<div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;    <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338">TypeCState_t</a> connectStatus;</div>
<div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;    uint8_t smState = 0;</div>
<div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;    uint8_t connected;</div>
<div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;</div>
<div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;    <span class="comment">//initializeLabel表示state machine是否被初始化过</span></div>
<div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;    <span class="comment">//为0表示没有</span></div>
<div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;    <span class="keywordflow">if</span> (pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a2edcb21b9d568937192741d32381d2b1">initializeLabel</a> == 0)</div>
<div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;    {</div>
<div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;        pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a2edcb21b9d568937192741d32381d2b1">initializeLabel</a> = 1;</div>
<div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;        pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aefbe7a5da39f65fa52efdc9cbae4d9cc">isConnected</a> = 0;</div>
<div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;        <span class="comment">/* We want to override any existing MTP-based connection */</span></div>
<div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;        <span class="comment">// 根据typec power role (typec_power_role_config_t) init</span></div>
<div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;        <a class="code" href="usb__pd__policy_8c.html#ac1262f667cd36f90f205a468ba59b1d4">PD_ConnectInitRole</a>(pdInstance, pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aa7854ddf70e64f92b178cc5d787037a2">pdPowerPortConfig</a>-&gt;<a class="code" href="struct__pd__power__port__config.html#a649079672f270a65578bd41e0e624e16">typecRole</a>, 0);</div>
<div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;        <span class="comment">// curConnectState</span></div>
<div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;        pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aa310a61602eb5d34b4b511ce4ad60f1d">connectedResult</a> = <a class="code" href="usb__pd__policy_8c.html#a1fb3d7072f44bb8959b640f553c45e02">PD_ConnectGetStateMachine</a>(pdInstance);</div>
<div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;        <a class="code" href="usb__pd__policy_8c.html#ac70b1975475b5b94815c02eb5be41e1a">PD_DpmSetVconn</a>(pdInstance, 0);</div>
<div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;    }</div>
<div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;    <span class="comment">// 该event group在init func中已经建立了</span></div>
<div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;    <span class="comment">// not auto clear</span></div>
<div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;    <a class="code" href="group__usb__os__abstraction.html#ga5ce587209d676871f3ec62900054febd">USB_OsaEventWait</a>(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#ab04e9fcc994b2547509169e07ab21465">taskEventHandle</a>, 0xffu, 0, pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a2505651a0001ea647306dbd800927778">waitTime</a>, &amp;taskEventSet);</div>
<div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;    pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a2505651a0001ea647306dbd800927778">waitTime</a> = <a class="code" href="usb__pd__interface_8h.html#ac3471f042971fd1641303f2622b844c1">PD_WAIT_EVENT_TIME</a>;</div>
<div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;    <a class="code" href="usb__pd__policy_8c.html#a39aa541f6a8e3843b3ab18fdcf533768">PD_PortTaskEventProcess</a>(pdInstance, taskEventSet);</div>
<div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;    <span class="keywordflow">if</span> (taskEventSet &amp; <a class="code" href="usb__pd__interface_8h.html#a08a5013301d9587b47017854a2ee5981ae5b6c5a346b9ba137369e1193675227b">PD_TASK_EVENT_TYPEC_STATE_PROCESS</a>)</div>
<div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;    {</div>
<div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;        <a class="code" href="group__usb__os__abstraction.html#ga90357f04d40469dc07104033b3c8581c">USB_OsaEventClear</a>(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#ab04e9fcc994b2547509169e07ab21465">taskEventHandle</a>, PD_TASK_EVENT_TYPEC_STATE_PROCESS);</div>
<div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;    }</div>
<div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;</div>
<div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;    <span class="comment">/* Process Type-C state change by PD stack */</span></div>
<div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;    <span class="comment">// return curConnectState</span></div>
<div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;    connectStatus = <a class="code" href="usb__pd__policy_8c.html#a1fb3d7072f44bb8959b640f553c45e02">PD_ConnectGetStateMachine</a>(pdInstance);</div>
<div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160;    <span class="keywordflow">if</span> (connectStatus != pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aa310a61602eb5d34b4b511ce4ad60f1d">connectedResult</a>)</div>
<div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;    {</div>
<div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;        pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aa310a61602eb5d34b4b511ce4ad60f1d">connectedResult</a> = connectStatus;</div>
<div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;    }</div>
<div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;</div>
<div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;    <span class="comment">/* Process Type-C state change by Type-C state machine */</span></div>
<div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;    connected = <a class="code" href="usb__pd__policy_8c.html#a25116c60801fe4f4def90e3e42614b54">PD_ConnectCheck</a>(pdInstance);</div>
<div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;    connectStatus = <a class="code" href="usb__pd__policy_8c.html#a1fb3d7072f44bb8959b640f553c45e02">PD_ConnectGetStateMachine</a>(pdInstance);</div>
<div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;    <span class="keywordflow">if</span> (connected != <a class="code" href="usb__pd__interface_8h.html#a924ee365c422092460915bc8cd8b9cbba4e1bf59f2d40fb235c0afed35f455701">kConnectState_NotStable</a>)</div>
<div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;    {</div>
<div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;        <span class="keywordflow">if</span> (connected == <a class="code" href="usb__pd__interface_8h.html#a924ee365c422092460915bc8cd8b9cbba56560172992b012a9e3ea7a47885bd40">kConnectState_Connected</a>)</div>
<div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;        {</div>
<div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;            connected = 1;</div>
<div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;        }</div>
<div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;        {</div>
<div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;            connected = 0;</div>
<div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;        }</div>
<div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160;        <span class="comment">/* connect state change */</span></div>
<div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;        <span class="keywordflow">if</span> ((connected != pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aefbe7a5da39f65fa52efdc9cbae4d9cc">isConnected</a>) ||</div>
<div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;            ((pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aefbe7a5da39f65fa52efdc9cbae4d9cc">isConnected</a>) &amp;&amp; (connectStatus != pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aa310a61602eb5d34b4b511ce4ad60f1d">connectedResult</a>)))</div>
<div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;        {</div>
<div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;            <span class="comment">/* change from disconnect to connect */</span></div>
<div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;            <span class="keywordflow">if</span> ((!(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aefbe7a5da39f65fa52efdc9cbae4d9cc">isConnected</a>)) &amp;&amp; (connected))</div>
<div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;            {</div>
<div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;                <span class="keywordflow">switch</span> (connectStatus)</div>
<div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;                {</div>
<div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a08ce67bf9e0a4d46237c40642b049bcc">TYPEC_ATTACHED_SRC</a>:</div>
<div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a06a469da27f359966648eda899622706">TYPEC_ATTACHED_SNK</a>:</div>
<div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;                        pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a007de2aa1ac9ae814d10d26a949dd61d">pendingSOP</a> = <a class="code" href="group__usb__pd__stack.html#gga7a924235403e0acab44d01e720091aa1aaa62220b2caaa3d1273068a3e03969d4">kPD_MsgSOPMask</a>;</div>
<div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;                        <span class="keywordflow">if</span> (connectStatus == <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a08ce67bf9e0a4d46237c40642b049bcc">TYPEC_ATTACHED_SRC</a>)</div>
<div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160;                        {</div>
<div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aea65859fe3a8409ac66aa9f54fb119bf">curPowerRole</a> = <a class="code" href="group__usb__pd__stack.html#gga46146487374ddc31d48f33b2b6a26f8ba9fdae65ce89c7d877981a3abef33a2cb">kPD_PowerRoleSource</a>;</div>
<div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a766dd3de4bdd34f1eebcd41d1425327a">curDataRole</a> = <a class="code" href="group__usb__pd__stack.html#gga25760887aa95821023cc0ab5e151f828ad5849c6d513a7161652bf49bf5096e61">kPD_DataRoleDFP</a>;</div>
<div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a1b1254d08a7d1b7809c37ac0e1253ed5">psmPresentlyVconnSource</a> = <a class="code" href="group__usb__pd__stack.html#ggab67908aebf6cb10704f4ec6127761e28a239cd9fcbe39abba0bc8959dc1a24e37">kPD_IsVconnSource</a>;</div>
<div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160;                        }</div>
<div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;                        {</div>
<div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aea65859fe3a8409ac66aa9f54fb119bf">curPowerRole</a> = <a class="code" href="group__usb__pd__stack.html#gga46146487374ddc31d48f33b2b6a26f8bafca465150c227ef579c7a2bfc47b4072">kPD_PowerRoleSink</a>;</div>
<div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a766dd3de4bdd34f1eebcd41d1425327a">curDataRole</a> = <a class="code" href="group__usb__pd__stack.html#gga25760887aa95821023cc0ab5e151f828a20fd8fe92eea59b9fd7dd0691e395baa">kPD_DataRoleUFP</a>;</div>
<div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a1b1254d08a7d1b7809c37ac0e1253ed5">psmPresentlyVconnSource</a> = <a class="code" href="group__usb__pd__stack.html#ggab67908aebf6cb10704f4ec6127761e28ad27a489c262689fb72562c3a59cb9727">kPD_NotVconnSource</a>;</div>
<div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;                        }</div>
<div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;</div>
<div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a1e60a88a2cd942ba4bd065ee2b9438d3">TYPEC_AUDIO_ACCESSORY</a>:</div>
<div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a09376cb7ece9c3734d29379623b63a69">TYPEC_UNORIENTED_DEBUG_ACCESSORY_SRC</a>:</div>
<div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338abe78848b46b7ac825cdc24493593a500">TYPEC_DEBUG_ACCESSORY_SNK</a>:</div>
<div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a52743b32e531cf3605d534ae3d2bf014">TYPEC_POWERED_ACCESSORY</a>:</div>
<div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;                        <span class="comment">/* do nothing */</span></div>
<div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;                        <span class="comment">/* pdInstance-&gt;curPowerRole = kPD_PowerRoleSource; */</span></div>
<div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;                        <span class="comment">/* pdInstance-&gt;curDataRole = kPD_DataRoleDFP; */</span></div>
<div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;</div>
<div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;<span class="preprocessor">#if (defined PD_CONFIG_DEBUG_ACCESSORY_SUPPORT) &amp;&amp; (PD_CONFIG_DEBUG_ACCESSORY_SUPPORT)</span></div>
<div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;<span class="preprocessor"></span>                    <span class="keywordflow">case</span> <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338aa6be0b74b1649d54569a428ef0e326a4">TYPEC_ORIENTED_DEBUG_ACCESSORY_SRC</a>:</div>
<div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="usb__pd__interface_8h.html#a447c32bfcfe6d47479635166462cfcd2">PD_CONFIG_DEBUG_ACCESSORY_ROLE</a> == CONFIG_DEBUG_ACCESSORY_NONE)</div>
<div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;                        {</div>
<div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;                            <span class="comment">/* Wait for disconnection */</span></div>
<div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;                        }</div>
<div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;                        {</div>
<div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aea65859fe3a8409ac66aa9f54fb119bf">curPowerRole</a> = <a class="code" href="group__usb__pd__stack.html#gga46146487374ddc31d48f33b2b6a26f8ba9fdae65ce89c7d877981a3abef33a2cb">kPD_PowerRoleSource</a>;</div>
<div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a766dd3de4bdd34f1eebcd41d1425327a">curDataRole</a> = <a class="code" href="group__usb__pd__stack.html#gga25760887aa95821023cc0ab5e151f828ad5849c6d513a7161652bf49bf5096e61">kPD_DataRoleDFP</a>;</div>
<div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a1b1254d08a7d1b7809c37ac0e1253ed5">psmPresentlyVconnSource</a> = <a class="code" href="group__usb__pd__stack.html#ggab67908aebf6cb10704f4ec6127761e28a239cd9fcbe39abba0bc8959dc1a24e37">kPD_IsVconnSource</a>;</div>
<div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;                        }</div>
<div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;<span class="preprocessor"></span>                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;                }</div>
<div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;</div>
<div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;                <span class="comment">// call PD_DpmDemoAppCallback in pd_app.c</span></div>
<div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;                <a class="code" href="usb__pd__policy_8c.html#a694e9dd685d69f5b21d23e6bbee6e7d9">PD_DpmAppCallback</a>(pdInstance, <a class="code" href="group__usb__pd__stack.html#gga6e10571af6af1a42760ea442ab580eb8adbefad204068244fdf75ba1ff211fbfc">PD_CONNECTED</a>, NULL, 0);</div>
<div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;                <a class="code" href="usb__pd__policy_8c.html#a150b2573c8bfe54de3d77cd020d85bc0">PD_DpmConnect</a>(pdInstance);</div>
<div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;            }</div>
<div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;            <span class="comment">/* still connect, but role change. For example: Try.SRC */</span></div>
<div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aefbe7a5da39f65fa52efdc9cbae4d9cc">isConnected</a>) &amp;&amp; (connected) &amp;&amp; (connectStatus != pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aa310a61602eb5d34b4b511ce4ad60f1d">connectedResult</a>))</div>
<div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;            {</div>
<div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;                <span class="keywordflow">switch</span> (connectStatus)</div>
<div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;                {</div>
<div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a08ce67bf9e0a4d46237c40642b049bcc">TYPEC_ATTACHED_SRC</a>:</div>
<div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a06a469da27f359966648eda899622706">TYPEC_ATTACHED_SNK</a>:</div>
<div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;                        pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a007de2aa1ac9ae814d10d26a949dd61d">pendingSOP</a> = <a class="code" href="group__usb__pd__stack.html#gga7a924235403e0acab44d01e720091aa1aaa62220b2caaa3d1273068a3e03969d4">kPD_MsgSOPMask</a>;</div>
<div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;                        <span class="keywordflow">if</span> (connectStatus == <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a08ce67bf9e0a4d46237c40642b049bcc">TYPEC_ATTACHED_SRC</a>)</div>
<div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;                        {</div>
<div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aea65859fe3a8409ac66aa9f54fb119bf">curPowerRole</a> = <a class="code" href="group__usb__pd__stack.html#gga46146487374ddc31d48f33b2b6a26f8ba9fdae65ce89c7d877981a3abef33a2cb">kPD_PowerRoleSource</a>;</div>
<div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a766dd3de4bdd34f1eebcd41d1425327a">curDataRole</a> = <a class="code" href="group__usb__pd__stack.html#gga25760887aa95821023cc0ab5e151f828ad5849c6d513a7161652bf49bf5096e61">kPD_DataRoleDFP</a>;</div>
<div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a1b1254d08a7d1b7809c37ac0e1253ed5">psmPresentlyVconnSource</a> = <a class="code" href="group__usb__pd__stack.html#ggab67908aebf6cb10704f4ec6127761e28a239cd9fcbe39abba0bc8959dc1a24e37">kPD_IsVconnSource</a>;</div>
<div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;                        }</div>
<div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;                        {</div>
<div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aea65859fe3a8409ac66aa9f54fb119bf">curPowerRole</a> = <a class="code" href="group__usb__pd__stack.html#gga46146487374ddc31d48f33b2b6a26f8bafca465150c227ef579c7a2bfc47b4072">kPD_PowerRoleSink</a>;</div>
<div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a766dd3de4bdd34f1eebcd41d1425327a">curDataRole</a> = <a class="code" href="group__usb__pd__stack.html#gga25760887aa95821023cc0ab5e151f828a20fd8fe92eea59b9fd7dd0691e395baa">kPD_DataRoleUFP</a>;</div>
<div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a1b1254d08a7d1b7809c37ac0e1253ed5">psmPresentlyVconnSource</a> = <a class="code" href="group__usb__pd__stack.html#ggab67908aebf6cb10704f4ec6127761e28ad27a489c262689fb72562c3a59cb9727">kPD_NotVconnSource</a>;</div>
<div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;                        }</div>
<div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;</div>
<div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a1e60a88a2cd942ba4bd065ee2b9438d3">TYPEC_AUDIO_ACCESSORY</a>:</div>
<div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a09376cb7ece9c3734d29379623b63a69">TYPEC_UNORIENTED_DEBUG_ACCESSORY_SRC</a>:</div>
<div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338abe78848b46b7ac825cdc24493593a500">TYPEC_DEBUG_ACCESSORY_SNK</a>:</div>
<div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a52743b32e531cf3605d534ae3d2bf014">TYPEC_POWERED_ACCESSORY</a>:</div>
<div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;</div>
<div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;<span class="preprocessor">#if (defined PD_CONFIG_DEBUG_ACCESSORY_SUPPORT) &amp;&amp; (PD_CONFIG_DEBUG_ACCESSORY_SUPPORT)</span></div>
<div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;<span class="preprocessor"></span>                    <span class="keywordflow">case</span> <a class="code" href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338aa6be0b74b1649d54569a428ef0e326a4">TYPEC_ORIENTED_DEBUG_ACCESSORY_SRC</a>:</div>
<div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="usb__pd__interface_8h.html#a447c32bfcfe6d47479635166462cfcd2">PD_CONFIG_DEBUG_ACCESSORY_ROLE</a> == CONFIG_DEBUG_ACCESSORY_NONE)</div>
<div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;                        {</div>
<div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;                            <span class="comment">/* Wait for disconnection */</span></div>
<div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;                        }</div>
<div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;                        {</div>
<div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aea65859fe3a8409ac66aa9f54fb119bf">curPowerRole</a> = <a class="code" href="group__usb__pd__stack.html#gga46146487374ddc31d48f33b2b6a26f8ba9fdae65ce89c7d877981a3abef33a2cb">kPD_PowerRoleSource</a>;</div>
<div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a766dd3de4bdd34f1eebcd41d1425327a">curDataRole</a> = <a class="code" href="group__usb__pd__stack.html#gga25760887aa95821023cc0ab5e151f828ad5849c6d513a7161652bf49bf5096e61">kPD_DataRoleDFP</a>;</div>
<div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;                            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a1b1254d08a7d1b7809c37ac0e1253ed5">psmPresentlyVconnSource</a> = <a class="code" href="group__usb__pd__stack.html#ggab67908aebf6cb10704f4ec6127761e28a239cd9fcbe39abba0bc8959dc1a24e37">kPD_IsVconnSource</a>;</div>
<div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;                        }</div>
<div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;<span class="preprocessor"></span>                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;                }</div>
<div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;                <a class="code" href="usb__pd__policy_8c.html#a694e9dd685d69f5b21d23e6bbee6e7d9">PD_DpmAppCallback</a>(pdInstance, <a class="code" href="group__usb__pd__stack.html#gga6e10571af6af1a42760ea442ab580eb8afb6d14742fec55ac288edda0d928683a">PD_CONNECT_ROLE_CHANGE</a>, NULL, 0);</div>
<div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;            }</div>
<div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;            <span class="comment">/* change from connect to disconnect */</span></div>
<div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aefbe7a5da39f65fa52efdc9cbae4d9cc">isConnected</a>) &amp;&amp; (!(connected)))</div>
<div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;            {</div>
<div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;                <a class="code" href="usb__pd__policy_8c.html#a694e9dd685d69f5b21d23e6bbee6e7d9">PD_DpmAppCallback</a>(pdInstance, <a class="code" href="group__usb__pd__stack.html#gga6e10571af6af1a42760ea442ab580eb8ac8d3cd4dd7fa3432e364a9a3d6602563">PD_DISCONNECTED</a>, NULL, 0);</div>
<div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;                <a class="code" href="usb__pd__policy_8c.html#abc2774ff9e02e6ff6ff4a5fb8088c344">PD_DpmDisconnect</a>(pdInstance);</div>
<div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160;                pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a2edcb21b9d568937192741d32381d2b1">initializeLabel</a> = 0;</div>
<div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;            }</div>
<div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;            {</div>
<div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;            }</div>
<div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;</div>
<div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160;            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aefbe7a5da39f65fa52efdc9cbae4d9cc">isConnected</a> = connected;</div>
<div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;        }</div>
<div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aefbe7a5da39f65fa52efdc9cbae4d9cc">isConnected</a>) <span class="comment">/* connect result stable and connected */</span></div>
<div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;        {</div>
<div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#abb01fbdcfbc66eba6c7d5d85e91e62e4">noConnectButVBusExit</a> = 0;</div>
<div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;            smState = <a class="code" href="usb__pd__policy_8c.html#ac6e31fa3949c6ca1288f96b6c5252bba">PD_PsmStateMachine</a>(pdInstance);</div>
<div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;</div>
<div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;            <span class="comment">/* Force a partner disconnect if the PSM has requested a error recovery */</span></div>
<div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;            <span class="keywordflow">if</span> (smState == <a class="code" href="usb__pd__policy_8c.html#ad9afbdaee91955dd5e1a909853a02119a068485ee233ba1ee47e054c6e8d8490f">kSM_ErrorRecovery</a>)</div>
<div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;            {</div>
<div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;                pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aefbe7a5da39f65fa52efdc9cbae4d9cc">isConnected</a> = 0;</div>
<div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;                <a class="code" href="usb__pd__policy_8c.html#a694e9dd685d69f5b21d23e6bbee6e7d9">PD_DpmAppCallback</a>(pdInstance, <a class="code" href="group__usb__pd__stack.html#gga6e10571af6af1a42760ea442ab580eb8ac8d3cd4dd7fa3432e364a9a3d6602563">PD_DISCONNECTED</a>, NULL, 0);</div>
<div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;                <a class="code" href="usb__pd__policy_8c.html#abc2774ff9e02e6ff6ff4a5fb8088c344">PD_DpmDisconnect</a>(pdInstance);</div>
<div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;</div>
<div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;                <a class="code" href="usb__pd__policy_8c.html#ac1262f667cd36f90f205a468ba59b1d4">PD_ConnectInitRole</a>(pdInstance, pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aa7854ddf70e64f92b178cc5d787037a2">pdPowerPortConfig</a>-&gt;<a class="code" href="struct__pd__power__port__config.html#a649079672f270a65578bd41e0e624e16">typecRole</a>, 1);</div>
<div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;                pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a2edcb21b9d568937192741d32381d2b1">initializeLabel</a> = 0;</div>
<div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;                pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a2505651a0001ea647306dbd800927778">waitTime</a> = <a class="code" href="usb__pd__interface_8h.html#ac3471f042971fd1641303f2622b844c1">PD_WAIT_EVENT_TIME</a>;</div>
<div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;            }</div>
<div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (smState == <a class="code" href="usb__pd__policy_8c.html#ad9afbdaee91955dd5e1a909853a02119a660d4f138319988dc5abf216bf0a2a44">kSM_Continue</a>)</div>
<div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;            {</div>
<div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;                pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a2505651a0001ea647306dbd800927778">waitTime</a> = <a class="code" href="usb__pd__interface_8h.html#ac3471f042971fd1641303f2622b844c1">PD_WAIT_EVENT_TIME</a>;</div>
<div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;            }</div>
<div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;            {</div>
<div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;                pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a2505651a0001ea647306dbd800927778">waitTime</a> = 0; <span class="comment">/* wait for ever */</span></div>
<div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;            }</div>
<div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;        }</div>
<div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;        {</div>
<div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;        }</div>
<div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;</div>
<div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;<span class="preprocessor">#if (defined PD_CONFIG_PD3_FAST_ROLE_SWAP_ENABLE) &amp;&amp; (PD_CONFIG_PD3_FAST_ROLE_SWAP_ENABLE)</span></div>
<div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;<span class="preprocessor"></span>        <span class="comment">/* check FR_Swap signal */</span></div>
<div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__usb__os__abstraction.html#gab25fb5d93d3b665ca8eadf2a670d3361">USB_OsaEventCheck</a>(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#ab04e9fcc994b2547509169e07ab21465">taskEventHandle</a>, <a class="code" href="usb__pd__interface_8h.html#a08a5013301d9587b47017854a2ee5981ace1c61e1c2c9768ffea7e4ed3552dabd">PD_TASK_EVENT_FR_SWAP_SINGAL</a>, NULL) ==</div>
<div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;            <a class="code" href="group__usb__os__abstraction.html#gga453ebd2f93aafb8c938c3a23c815f9bdab90805fb75297fda1ca60dbb2283f933">kStatus_USB_OSA_Success</a>)</div>
<div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;        {</div>
<div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;            <span class="keywordflow">if</span> (!(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aefbe7a5da39f65fa52efdc9cbae4d9cc">isConnected</a>))</div>
<div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;            {</div>
<div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;                <a class="code" href="group__usb__os__abstraction.html#ga90357f04d40469dc07104033b3c8581c">USB_OsaEventClear</a>(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#ab04e9fcc994b2547509169e07ab21465">taskEventHandle</a>, <a class="code" href="usb__pd__interface_8h.html#a08a5013301d9587b47017854a2ee5981ace1c61e1c2c9768ffea7e4ed3552dabd">PD_TASK_EVENT_FR_SWAP_SINGAL</a>);</div>
<div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;</div>
<div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;                <span class="comment">/* when receiving FR_Swap signal, PTN5110 will open source vbus defaultly.  */</span></div>
<div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;                <span class="keywordflow">if</span> (pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a2d9a457d63da9c4cb5e3feece0cbf3ec">pdConfig</a>-&gt;<a class="code" href="struct__pd__instance__config.html#a1f5e597bbfc0af871a5e887c34eb3aca">phyType</a> == <a class="code" href="group__usb__pd__stack.html#gga8bd01601105e164bc0e0bb538aaa5c1ca6f0eabe71ca45162254c941b34558d2c">kPD_PhyPTN5110</a>)</div>
<div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;                {</div>
<div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;                    pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a519457e415e4eb39231c3e32316ffc83">callbackFns</a>-&gt;<a class="code" href="struct__pd__power__callback.html#a1afed4126bcbe1ba278eb27f31e99c9c">PD_SrcTurnOffVbus</a>(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a0eb7710a55cb5eb2a57355d772b26f74">callbackParam</a>, <a class="code" href="group__usb__pd__stack.html#gga1af9af0106a9413093f8e0d9b796771badc5ad96f1d56cc3354757de9aea78896">kVbusPower_Stable</a>);</div>
<div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;                }</div>
<div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;            }</div>
<div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;        }</div>
<div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;</div>
<div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;        <span class="comment">/* check unreasonable situation */</span></div>
<div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;        <span class="keywordflow">if</span> (!(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aefbe7a5da39f65fa52efdc9cbae4d9cc">isConnected</a>))</div>
<div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;        {</div>
<div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;            <a class="code" href="usb__pd__policy_8c.html#a555b1880b5b259c3fdcd3da821e06cf2">PD_PhyControl</a>(pdInstance, <a class="code" href="group__usb__pd__phy__drv.html#ggab8bfca50e2ac042b47a697c88f84c3eda4a23adc388bf03852d850ff3919328d6">PD_PHY_GET_VBUS_POWER_STATE</a>, &amp;taskEventSet);</div>
<div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;            <span class="keywordflow">if</span> (taskEventSet &amp; (<a class="code" href="group__usb__pd__phy__drv.html#ga1f2e4aed47a47caec2aba9edb2236e42">PD_VBUS_POWER_STATE_VSAFE5V_MASK</a> | <a class="code" href="group__usb__pd__phy__drv.html#gabe6758409c7aeff91de688fe7cefa195">PD_VBUS_POWER_STATE_VBUS_MASK</a>))</div>
<div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;            {</div>
<div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;                pdInstance-&gt;<a class="code" href="struct__pd__instance.html#abb01fbdcfbc66eba6c7d5d85e91e62e4">noConnectButVBusExit</a>++;</div>
<div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;                pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a519457e415e4eb39231c3e32316ffc83">callbackFns</a>-&gt;<a class="code" href="struct__pd__power__callback.html#a1afed4126bcbe1ba278eb27f31e99c9c">PD_SrcTurnOffVbus</a>(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a0eb7710a55cb5eb2a57355d772b26f74">callbackParam</a>, <a class="code" href="group__usb__pd__stack.html#gga1af9af0106a9413093f8e0d9b796771badc5ad96f1d56cc3354757de9aea78896">kVbusPower_Stable</a>);</div>
<div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;                <span class="keywordflow">if</span> (pdInstance-&gt;<a class="code" href="struct__pd__instance.html#abb01fbdcfbc66eba6c7d5d85e91e62e4">noConnectButVBusExit</a> &gt;= 100)</div>
<div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;                {</div>
<div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;                    <a class="code" href="struct__pd__phy__config.html">pd_phy_config_t</a> phyConfig;</div>
<div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;</div>
<div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;                    pdInstance-&gt;<a class="code" href="struct__pd__instance.html#abb01fbdcfbc66eba6c7d5d85e91e62e4">noConnectButVBusExit</a> = 0;</div>
<div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;                    pdInstance-&gt;<a class="code" href="struct__pd__instance.html#adbed7b2cd53df40e0611a8879c903339">phyInterface</a>-&gt;<a class="code" href="struct__pd__phy__api__interface.html#a9e36ebe547c2ed82866597b2afc54bd0">pdPhyDeinit</a>(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a7c1184292efe9a5ae30b6ac422c1e9f4">pdPhyHandle</a>);</div>
<div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;                    phyConfig.<a class="code" href="struct__pd__phy__config.html#aa5aa79cabb041cefecc0483c840f75a1">interface</a> = pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a2d9a457d63da9c4cb5e3feece0cbf3ec">pdConfig</a>-&gt;<a class="code" href="struct__pd__instance__config.html#acb93f9cec67a95c40730be43c80d3214">phyInterface</a>;</div>
<div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;                    phyConfig.<a class="code" href="struct__pd__phy__config.html#aa606732850969dd6c9bd06b608e8015c">i2cConfig</a>.<a class="code" href="struct__pd__i2c__interface__config.html#abef5bc903024c7f0c489407549948987">slaveAddress</a> = pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a2d9a457d63da9c4cb5e3feece0cbf3ec">pdConfig</a>-&gt;<a class="code" href="struct__pd__instance__config.html#a7e72c5dda8b81981ebd3062f6999bce1">interfaceParam</a>;</div>
<div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;                    pdInstance-&gt;<a class="code" href="struct__pd__instance.html#adbed7b2cd53df40e0611a8879c903339">phyInterface</a>-&gt;<a class="code" href="struct__pd__phy__api__interface.html#a8f9666a7543d431aec266710dbc8d78c">pdPhyInit</a>(pdInstance, &amp;(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#a7c1184292efe9a5ae30b6ac422c1e9f4">pdPhyHandle</a>), &amp;phyConfig);</div>
<div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;                }</div>
<div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;            }</div>
<div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;        }</div>
<div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;        {</div>
<div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;            pdInstance-&gt;<a class="code" href="struct__pd__instance.html#abb01fbdcfbc66eba6c7d5d85e91e62e4">noConnectButVBusExit</a> = 0;</div>
<div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;        }</div>
<div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;<span class="preprocessor"></span>    }</div>
<div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;    pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aa310a61602eb5d34b4b511ce4ad60f1d">connectedResult</a> = connectStatus;</div>
<div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;</div>
<div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;<span class="preprocessor"></span>    <span class="comment">/* unclear error recovery */</span></div>
<div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;    connectStatus = <a class="code" href="usb__pd__policy_8c.html#a1fb3d7072f44bb8959b640f553c45e02">PD_ConnectGetStateMachine</a>(pdInstance);</div>
<div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;    <span class="keywordflow">if</span> (connectStatus == <a class="code" href="usb__pd__policy_8c.html#aa173143bdf6b1a4a301e5576b364d5d6">PD_ConnectGetInitRoleState</a>(pdInstance, pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aa7854ddf70e64f92b178cc5d787037a2">pdPowerPortConfig</a>-&gt;<a class="code" href="struct__pd__power__port__config.html#a649079672f270a65578bd41e0e624e16">typecRole</a>))</div>
<div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;    {</div>
<div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;        pdInstance-&gt;typeCStateNeedRecovery++;</div>
<div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;    }</div>
<div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;    {</div>
<div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;        pdInstance-&gt;typeCStateNeedRecovery = 0;</div>
<div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;    }</div>
<div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;    <span class="keywordflow">if</span> ((!(pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aefbe7a5da39f65fa52efdc9cbae4d9cc">isConnected</a>)) &amp;&amp; (pdInstance-&gt;typeCStateNeedRecovery &gt;= 100))</div>
<div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;    {</div>
<div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;        pdInstance-&gt;typeCStateNeedRecovery = 0;</div>
<div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;        <a class="code" href="usb__pd__policy_8c.html#ac1262f667cd36f90f205a468ba59b1d4">PD_ConnectInitRole</a>(pdInstance, pdInstance-&gt;<a class="code" href="struct__pd__instance.html#aa7854ddf70e64f92b178cc5d787037a2">pdPowerPortConfig</a>-&gt;<a class="code" href="struct__pd__power__port__config.html#a649079672f270a65578bd41e0e624e16">typecRole</a>, 1);</div>
<div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;    }</div>
<div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;<span class="preprocessor"></span>}</div>
<div class="ttc" id="struct__pd__i2c__interface__config_html_abef5bc903024c7f0c489407549948987"><div class="ttname"><a href="struct__pd__i2c__interface__config.html#abef5bc903024c7f0c489407549948987">_pd_i2c_interface_config::slaveAddress</a></div><div class="ttdeci">uint8_t slaveAddress</div><div class="ttdef"><b>Definition:</b> usb_cmsis_wrapper.h:55</div></div>
<div class="ttc" id="group__usb__pd__stack_html_ggab67908aebf6cb10704f4ec6127761e28a239cd9fcbe39abba0bc8959dc1a24e37"><div class="ttname"><a href="group__usb__pd__stack.html#ggab67908aebf6cb10704f4ec6127761e28a239cd9fcbe39abba0bc8959dc1a24e37">kPD_IsVconnSource</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:289</div></div>
<div class="ttc" id="group__usb__pd__stack_html_gga6e10571af6af1a42760ea442ab580eb8ac8d3cd4dd7fa3432e364a9a3d6602563"><div class="ttname"><a href="group__usb__pd__stack.html#gga6e10571af6af1a42760ea442ab580eb8ac8d3cd4dd7fa3432e364a9a3d6602563">PD_DISCONNECTED</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:563</div></div>
<div class="ttc" id="group__usb__pd__stack_html_gga7a924235403e0acab44d01e720091aa1aaa62220b2caaa3d1273068a3e03969d4"><div class="ttname"><a href="group__usb__pd__stack.html#gga7a924235403e0acab44d01e720091aa1aaa62220b2caaa3d1273068a3e03969d4">kPD_MsgSOPMask</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:226</div></div>
<div class="ttc" id="struct__pd__instance_html_adbed7b2cd53df40e0611a8879c903339"><div class="ttname"><a href="struct__pd__instance.html#adbed7b2cd53df40e0611a8879c903339">_pd_instance::phyInterface</a></div><div class="ttdeci">const pd_phy_api_interface_t * phyInterface</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:86</div></div>
<div class="ttc" id="usb__pd__interface_8h_html_a08a5013301d9587b47017854a2ee5981ae5b6c5a346b9ba137369e1193675227b"><div class="ttname"><a href="usb__pd__interface_8h.html#a08a5013301d9587b47017854a2ee5981ae5b6c5a346b9ba137369e1193675227b">PD_TASK_EVENT_TYPEC_STATE_PROCESS</a></div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:69</div></div>
<div class="ttc" id="struct__pd__phy__api__interface_html_a9e36ebe547c2ed82866597b2afc54bd0"><div class="ttname"><a href="struct__pd__phy__api__interface.html#a9e36ebe547c2ed82866597b2afc54bd0">_pd_phy_api_interface::pdPhyDeinit</a></div><div class="ttdeci">pd_status_t(* pdPhyDeinit)(pd_phy_handle pdPhyHandle)</div><div class="ttdoc">de-initialize phy instance </div><div class="ttdef"><b>Definition:</b> usb_pd_phy.h:341</div></div>
<div class="ttc" id="struct__pd__instance_html_a1b1254d08a7d1b7809c37ac0e1253ed5"><div class="ttname"><a href="struct__pd__instance.html#a1b1254d08a7d1b7809c37ac0e1253ed5">_pd_instance::psmPresentlyVconnSource</a></div><div class="ttdeci">uint8_t psmPresentlyVconnSource</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:163</div></div>
<div class="ttc" id="struct__pd__instance_html_aa7854ddf70e64f92b178cc5d787037a2"><div class="ttname"><a href="struct__pd__instance.html#aa7854ddf70e64f92b178cc5d787037a2">_pd_instance::pdPowerPortConfig</a></div><div class="ttdeci">pd_power_port_config_t * pdPowerPortConfig</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:84</div></div>
<div class="ttc" id="usb__pd__interface_8h_html_a924ee365c422092460915bc8cd8b9cbba4e1bf59f2d40fb235c0afed35f455701"><div class="ttname"><a href="usb__pd__interface_8h.html#a924ee365c422092460915bc8cd8b9cbba4e1bf59f2d40fb235c0afed35f455701">kConnectState_NotStable</a></div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:74</div></div>
<div class="ttc" id="group__usb__pd__phy__drv_html_ga1f2e4aed47a47caec2aba9edb2236e42"><div class="ttname"><a href="group__usb__pd__phy__drv.html#ga1f2e4aed47a47caec2aba9edb2236e42">PD_VBUS_POWER_STATE_VSAFE5V_MASK</a></div><div class="ttdeci">#define PD_VBUS_POWER_STATE_VSAFE5V_MASK</div><div class="ttdoc">In the return value of PHY control (PD_PHY_GET_VBUS_POWER_STATE), this bit set means vbus is vsafe5v...</div><div class="ttdef"><b>Definition:</b> usb_pd_phy.h:43</div></div>
<div class="ttc" id="struct__pd__phy__api__interface_html_a8f9666a7543d431aec266710dbc8d78c"><div class="ttname"><a href="struct__pd__phy__api__interface.html#a8f9666a7543d431aec266710dbc8d78c">_pd_phy_api_interface::pdPhyInit</a></div><div class="ttdeci">pd_status_t(* pdPhyInit)(pd_handle upperLayerHandle, pd_phy_handle *pdPhyHandle, pd_phy_config_t *phyConfig)</div><div class="ttdoc">Initializes PD PHY module. </div><div class="ttdef"><b>Definition:</b> usb_pd_phy.h:330</div></div>
<div class="ttc" id="group__usb__pd__phy__drv_html_gabe6758409c7aeff91de688fe7cefa195"><div class="ttname"><a href="group__usb__pd__phy__drv.html#gabe6758409c7aeff91de688fe7cefa195">PD_VBUS_POWER_STATE_VBUS_MASK</a></div><div class="ttdeci">#define PD_VBUS_POWER_STATE_VBUS_MASK</div><div class="ttdoc">In the return value of PHY control (PD_PHY_GET_VBUS_POWER_STATE), this bit set means vbus exist...</div><div class="ttdef"><b>Definition:</b> usb_pd_phy.h:47</div></div>
<div class="ttc" id="group__usb__pd__stack_html_gga6e10571af6af1a42760ea442ab580eb8adbefad204068244fdf75ba1ff211fbfc"><div class="ttname"><a href="group__usb__pd__stack.html#gga6e10571af6af1a42760ea442ab580eb8adbefad204068244fdf75ba1ff211fbfc">PD_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:559</div></div>
<div class="ttc" id="usb__pd__policy_8c_html_ad9afbdaee91955dd5e1a909853a02119a660d4f138319988dc5abf216bf0a2a44"><div class="ttname"><a href="usb__pd__policy_8c.html#ad9afbdaee91955dd5e1a909853a02119a660d4f138319988dc5abf216bf0a2a44">kSM_Continue</a></div><div class="ttdef"><b>Definition:</b> usb_pd_policy.c:85</div></div>
<div class="ttc" id="group__usb__pd__stack_html_gga8bd01601105e164bc0e0bb538aaa5c1ca6f0eabe71ca45162254c941b34558d2c"><div class="ttname"><a href="group__usb__pd__stack.html#gga8bd01601105e164bc0e0bb538aaa5c1ca6f0eabe71ca45162254c941b34558d2c">kPD_PhyPTN5110</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:93</div></div>
<div class="ttc" id="group__usb__pd__stack_html_gga46146487374ddc31d48f33b2b6a26f8ba9fdae65ce89c7d877981a3abef33a2cb"><div class="ttname"><a href="group__usb__pd__stack.html#gga46146487374ddc31d48f33b2b6a26f8ba9fdae65ce89c7d877981a3abef33a2cb">kPD_PowerRoleSource</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:269</div></div>
<div class="ttc" id="usb__pd__spec_8h_html_a9a1674d34c926c8ecd0f9f70e2da0338a1e60a88a2cd942ba4bd065ee2b9438d3"><div class="ttname"><a href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a1e60a88a2cd942ba4bd065ee2b9438d3">TYPEC_AUDIO_ACCESSORY</a></div><div class="ttdef"><b>Definition:</b> usb_pd_spec.h:366</div></div>
<div class="ttc" id="struct__pd__phy__config_html_aa5aa79cabb041cefecc0483c840f75a1"><div class="ttname"><a href="struct__pd__phy__config.html#aa5aa79cabb041cefecc0483c840f75a1">_pd_phy_config::interface</a></div><div class="ttdeci">uint8_t interface</div><div class="ttdef"><b>Definition:</b> usb_pd_phy.h:276</div></div>
<div class="ttc" id="usb__pd__policy_8c_html_a150b2573c8bfe54de3d77cd020d85bc0"><div class="ttname"><a href="usb__pd__policy_8c.html#a150b2573c8bfe54de3d77cd020d85bc0">PD_DpmConnect</a></div><div class="ttdeci">void PD_DpmConnect(pd_instance_t *pdInstance)</div><div class="ttdef"><b>Definition:</b> usb_pd_policy.c:6471</div></div>
<div class="ttc" id="group__usb__pd__stack_html_gga46146487374ddc31d48f33b2b6a26f8bafca465150c227ef579c7a2bfc47b4072"><div class="ttname"><a href="group__usb__pd__stack.html#gga46146487374ddc31d48f33b2b6a26f8bafca465150c227ef579c7a2bfc47b4072">kPD_PowerRoleSink</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:268</div></div>
<div class="ttc" id="usb__pd__policy_8c_html_a555b1880b5b259c3fdcd3da821e06cf2"><div class="ttname"><a href="usb__pd__policy_8c.html#a555b1880b5b259c3fdcd3da821e06cf2">PD_PhyControl</a></div><div class="ttdeci">pd_status_t PD_PhyControl(pd_instance_t *pdInstance, uint32_t control, void *param)</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.c:122</div></div>
<div class="ttc" id="struct__pd__instance__config_html_a1f5e597bbfc0af871a5e887c34eb3aca"><div class="ttname"><a href="struct__pd__instance__config.html#a1f5e597bbfc0af871a5e887c34eb3aca">_pd_instance_config::phyType</a></div><div class="ttdeci">uint8_t phyType</div><div class="ttdef"><b>Definition:</b> usb_pd.h:791</div></div>
<div class="ttc" id="struct__pd__instance_html_a2505651a0001ea647306dbd800927778"><div class="ttname"><a href="struct__pd__instance.html#a2505651a0001ea647306dbd800927778">_pd_instance::waitTime</a></div><div class="ttdeci">volatile uint16_t waitTime</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:175</div></div>
<div class="ttc" id="usb__pd__spec_8h_html_a9a1674d34c926c8ecd0f9f70e2da0338a08ce67bf9e0a4d46237c40642b049bcc"><div class="ttname"><a href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a08ce67bf9e0a4d46237c40642b049bcc">TYPEC_ATTACHED_SRC</a></div><div class="ttdef"><b>Definition:</b> usb_pd_spec.h:359</div></div>
<div class="ttc" id="struct__pd__instance_html_aa310a61602eb5d34b4b511ce4ad60f1d"><div class="ttname"><a href="struct__pd__instance.html#aa310a61602eb5d34b4b511ce4ad60f1d">_pd_instance::connectedResult</a></div><div class="ttdeci">volatile uint8_t connectedResult</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:151</div></div>
<div class="ttc" id="struct__pd__instance_html_a7c1184292efe9a5ae30b6ac422c1e9f4"><div class="ttname"><a href="struct__pd__instance.html#a7c1184292efe9a5ae30b6ac422c1e9f4">_pd_instance::pdPhyHandle</a></div><div class="ttdeci">pd_phy_handle pdPhyHandle</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:81</div></div>
<div class="ttc" id="usb__pd__spec_8h_html_a9a1674d34c926c8ecd0f9f70e2da0338"><div class="ttname"><a href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338">TypeCState_t</a></div><div class="ttdeci">TypeCState_t</div><div class="ttdef"><b>Definition:</b> usb_pd_spec.h:351</div></div>
<div class="ttc" id="group__usb__pd__stack_html_gga6e10571af6af1a42760ea442ab580eb8afb6d14742fec55ac288edda0d928683a"><div class="ttname"><a href="group__usb__pd__stack.html#gga6e10571af6af1a42760ea442ab580eb8afb6d14742fec55ac288edda0d928683a">PD_CONNECT_ROLE_CHANGE</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:561</div></div>
<div class="ttc" id="usb__pd__spec_8h_html_a9a1674d34c926c8ecd0f9f70e2da0338a52743b32e531cf3605d534ae3d2bf014"><div class="ttname"><a href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a52743b32e531cf3605d534ae3d2bf014">TYPEC_POWERED_ACCESSORY</a></div><div class="ttdef"><b>Definition:</b> usb_pd_spec.h:369</div></div>
<div class="ttc" id="usb__pd__policy_8c_html_a39aa541f6a8e3843b3ab18fdcf533768"><div class="ttname"><a href="usb__pd__policy_8c.html#a39aa541f6a8e3843b3ab18fdcf533768">PD_PortTaskEventProcess</a></div><div class="ttdeci">void PD_PortTaskEventProcess(pd_instance_t *pdInstance, uint32_t eventSet)</div><div class="ttdef"><b>Definition:</b> usb_pd_policy.c:662</div></div>
<div class="ttc" id="usb__pd__policy_8c_html_ac1262f667cd36f90f205a468ba59b1d4"><div class="ttname"><a href="usb__pd__policy_8c.html#ac1262f667cd36f90f205a468ba59b1d4">PD_ConnectInitRole</a></div><div class="ttdeci">void PD_ConnectInitRole(pd_instance_t *pdInstance, uint32_t typecRole, uint8_t errorRecovery)</div><div class="ttdef"><b>Definition:</b> usb_pd_connect.c:1656</div></div>
<div class="ttc" id="usb__pd__interface_8h_html_a447c32bfcfe6d47479635166462cfcd2"><div class="ttname"><a href="usb__pd__interface_8h.html#a447c32bfcfe6d47479635166462cfcd2">PD_CONFIG_DEBUG_ACCESSORY_ROLE</a></div><div class="ttdeci">#define PD_CONFIG_DEBUG_ACCESSORY_ROLE</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:53</div></div>
<div class="ttc" id="struct__pd__instance_html_a2edcb21b9d568937192741d32381d2b1"><div class="ttname"><a href="struct__pd__instance.html#a2edcb21b9d568937192741d32381d2b1">_pd_instance::initializeLabel</a></div><div class="ttdeci">volatile uint8_t initializeLabel</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:149</div></div>
<div class="ttc" id="usb__pd__spec_8h_html_a9a1674d34c926c8ecd0f9f70e2da0338a06a469da27f359966648eda899622706"><div class="ttname"><a href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a06a469da27f359966648eda899622706">TYPEC_ATTACHED_SNK</a></div><div class="ttdef"><b>Definition:</b> usb_pd_spec.h:360</div></div>
<div class="ttc" id="struct__pd__instance_html_a766dd3de4bdd34f1eebcd41d1425327a"><div class="ttname"><a href="struct__pd__instance.html#a766dd3de4bdd34f1eebcd41d1425327a">_pd_instance::curDataRole</a></div><div class="ttdeci">uint8_t curDataRole</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:155</div></div>
<div class="ttc" id="group__usb__os__abstraction_html_ga5ce587209d676871f3ec62900054febd"><div class="ttname"><a href="group__usb__os__abstraction.html#ga5ce587209d676871f3ec62900054febd">USB_OsaEventWait</a></div><div class="ttdeci">usb_osa_status_t USB_OsaEventWait(usb_osa_event_handle handle, uint32_t bitMask, uint32_t flag, uint32_t timeout, uint32_t *bitSet)</div><div class="ttdoc">Waits for an event flag. </div><div class="ttdef"><b>Definition:</b> usb_osa_bm.c:189</div></div>
<div class="ttc" id="group__usb__pd__stack_html_ggab67908aebf6cb10704f4ec6127761e28ad27a489c262689fb72562c3a59cb9727"><div class="ttname"><a href="group__usb__pd__stack.html#ggab67908aebf6cb10704f4ec6127761e28ad27a489c262689fb72562c3a59cb9727">kPD_NotVconnSource</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:288</div></div>
<div class="ttc" id="usb__pd__spec_8h_html_a9a1674d34c926c8ecd0f9f70e2da0338abe78848b46b7ac825cdc24493593a500"><div class="ttname"><a href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338abe78848b46b7ac825cdc24493593a500">TYPEC_DEBUG_ACCESSORY_SNK</a></div><div class="ttdef"><b>Definition:</b> usb_pd_spec.h:374</div></div>
<div class="ttc" id="struct__pd__instance_html_a519457e415e4eb39231c3e32316ffc83"><div class="ttname"><a href="struct__pd__instance.html#a519457e415e4eb39231c3e32316ffc83">_pd_instance::callbackFns</a></div><div class="ttdeci">pd_power_handle_callback_t * callbackFns</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:88</div></div>
<div class="ttc" id="usb__pd__policy_8c_html_ac70b1975475b5b94815c02eb5be41e1a"><div class="ttname"><a href="usb__pd__policy_8c.html#ac70b1975475b5b94815c02eb5be41e1a">PD_DpmSetVconn</a></div><div class="ttdeci">void PD_DpmSetVconn(pd_instance_t *pdInstance, uint8_t enable)</div><div class="ttdef"><b>Definition:</b> usb_pd_policy.c:6548</div></div>
<div class="ttc" id="struct__pd__instance_html_a007de2aa1ac9ae814d10d26a949dd61d"><div class="ttname"><a href="struct__pd__instance.html#a007de2aa1ac9ae814d10d26a949dd61d">_pd_instance::pendingSOP</a></div><div class="ttdeci">volatile uint8_t pendingSOP</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:161</div></div>
<div class="ttc" id="usb__pd__interface_8h_html_a08a5013301d9587b47017854a2ee5981ace1c61e1c2c9768ffea7e4ed3552dabd"><div class="ttname"><a href="usb__pd__interface_8h.html#a08a5013301d9587b47017854a2ee5981ace1c61e1c2c9768ffea7e4ed3552dabd">PD_TASK_EVENT_FR_SWAP_SINGAL</a></div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:68</div></div>
<div class="ttc" id="struct__pd__power__port__config_html_a649079672f270a65578bd41e0e624e16"><div class="ttname"><a href="struct__pd__power__port__config.html#a649079672f270a65578bd41e0e624e16">_pd_power_port_config::typecRole</a></div><div class="ttdeci">uint8_t typecRole</div><div class="ttdef"><b>Definition:</b> usb_pd.h:748</div></div>
<div class="ttc" id="usb__pd__policy_8c_html_ac6e31fa3949c6ca1288f96b6c5252bba"><div class="ttname"><a href="usb__pd__policy_8c.html#ac6e31fa3949c6ca1288f96b6c5252bba">PD_PsmStateMachine</a></div><div class="ttdeci">uint8_t PD_PsmStateMachine(pd_instance_t *pdInstance)</div><div class="ttdef"><b>Definition:</b> usb_pd_policy.c:6483</div></div>
<div class="ttc" id="struct__pd__instance_html_ab04e9fcc994b2547509169e07ab21465"><div class="ttname"><a href="struct__pd__instance.html#ab04e9fcc994b2547509169e07ab21465">_pd_instance::taskEventHandle</a></div><div class="ttdeci">usb_osa_event_handle taskEventHandle</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:90</div></div>
<div class="ttc" id="usb__pd__policy_8c_html_ad9afbdaee91955dd5e1a909853a02119a068485ee233ba1ee47e054c6e8d8490f"><div class="ttname"><a href="usb__pd__policy_8c.html#ad9afbdaee91955dd5e1a909853a02119a068485ee233ba1ee47e054c6e8d8490f">kSM_ErrorRecovery</a></div><div class="ttdef"><b>Definition:</b> usb_pd_policy.c:87</div></div>
<div class="ttc" id="group__usb__pd__phy__drv_html_ggab8bfca50e2ac042b47a697c88f84c3eda4a23adc388bf03852d850ff3919328d6"><div class="ttname"><a href="group__usb__pd__phy__drv.html#ggab8bfca50e2ac042b47a697c88f84c3eda4a23adc388bf03852d850ff3919328d6">PD_PHY_GET_VBUS_POWER_STATE</a></div><div class="ttdef"><b>Definition:</b> usb_pd_phy.h:108</div></div>
<div class="ttc" id="struct__pd__phy__config_html"><div class="ttname"><a href="struct__pd__phy__config.html">_pd_phy_config</a></div><div class="ttdoc">Configure PD PHY. </div><div class="ttdef"><b>Definition:</b> usb_pd_phy.h:273</div></div>
<div class="ttc" id="usb__pd__policy_8c_html_a25116c60801fe4f4def90e3e42614b54"><div class="ttname"><a href="usb__pd__policy_8c.html#a25116c60801fe4f4def90e3e42614b54">PD_ConnectCheck</a></div><div class="ttdeci">uint8_t PD_ConnectCheck(pd_instance_t *pdInstance)</div><div class="ttdef"><b>Definition:</b> usb_pd_connect.c:1785</div></div>
<div class="ttc" id="usb__pd__spec_8h_html_a9a1674d34c926c8ecd0f9f70e2da0338a09376cb7ece9c3734d29379623b63a69"><div class="ttname"><a href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338a09376cb7ece9c3734d29379623b63a69">TYPEC_UNORIENTED_DEBUG_ACCESSORY_SRC</a></div><div class="ttdef"><b>Definition:</b> usb_pd_spec.h:372</div></div>
<div class="ttc" id="group__usb__os__abstraction_html_gga453ebd2f93aafb8c938c3a23c815f9bdab90805fb75297fda1ca60dbb2283f933"><div class="ttname"><a href="group__usb__os__abstraction.html#gga453ebd2f93aafb8c938c3a23c815f9bdab90805fb75297fda1ca60dbb2283f933">kStatus_USB_OSA_Success</a></div><div class="ttdef"><b>Definition:</b> usb_osa.h:66</div></div>
<div class="ttc" id="usb__pd__interface_8h_html_a924ee365c422092460915bc8cd8b9cbba56560172992b012a9e3ea7a47885bd40"><div class="ttname"><a href="usb__pd__interface_8h.html#a924ee365c422092460915bc8cd8b9cbba56560172992b012a9e3ea7a47885bd40">kConnectState_Connected</a></div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:75</div></div>
<div class="ttc" id="struct__pd__instance__config_html_a7e72c5dda8b81981ebd3062f6999bce1"><div class="ttname"><a href="struct__pd__instance__config.html#a7e72c5dda8b81981ebd3062f6999bce1">_pd_instance_config::interfaceParam</a></div><div class="ttdeci">uint32_t interfaceParam</div><div class="ttdef"><b>Definition:</b> usb_pd.h:795</div></div>
<div class="ttc" id="struct__pd__instance_html_a2d9a457d63da9c4cb5e3feece0cbf3ec"><div class="ttname"><a href="struct__pd__instance.html#a2d9a457d63da9c4cb5e3feece0cbf3ec">_pd_instance::pdConfig</a></div><div class="ttdeci">pd_instance_config_t * pdConfig</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:83</div></div>
<div class="ttc" id="usb__pd__policy_8c_html_abc2774ff9e02e6ff6ff4a5fb8088c344"><div class="ttname"><a href="usb__pd__policy_8c.html#abc2774ff9e02e6ff6ff4a5fb8088c344">PD_DpmDisconnect</a></div><div class="ttdeci">void PD_DpmDisconnect(pd_instance_t *pdInstance)</div><div class="ttdef"><b>Definition:</b> usb_pd_policy.c:6465</div></div>
<div class="ttc" id="usb__pd__policy_8c_html_a694e9dd685d69f5b21d23e6bbee6e7d9"><div class="ttname"><a href="usb__pd__policy_8c.html#a694e9dd685d69f5b21d23e6bbee6e7d9">PD_DpmAppCallback</a></div><div class="ttdeci">pd_status_t PD_DpmAppCallback(pd_instance_t *pdInstance, uint32_t event, void *param, uint8_t done)</div><div class="ttdef"><b>Definition:</b> usb_pd_policy.c:7336</div></div>
<div class="ttc" id="group__usb__os__abstraction_html_ga90357f04d40469dc07104033b3c8581c"><div class="ttname"><a href="group__usb__os__abstraction.html#ga90357f04d40469dc07104033b3c8581c">USB_OsaEventClear</a></div><div class="ttdeci">usb_osa_status_t USB_OsaEventClear(usb_osa_event_handle handle, uint32_t bitMask)</div><div class="ttdoc">Clears an event flag. </div><div class="ttdef"><b>Definition:</b> usb_osa_bm.c:257</div></div>
<div class="ttc" id="struct__pd__instance_html_aefbe7a5da39f65fa52efdc9cbae4d9cc"><div class="ttname"><a href="struct__pd__instance.html#aefbe7a5da39f65fa52efdc9cbae4d9cc">_pd_instance::isConnected</a></div><div class="ttdeci">volatile uint8_t isConnected</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:150</div></div>
<div class="ttc" id="usb__pd__policy_8c_html_aa173143bdf6b1a4a301e5576b364d5d6"><div class="ttname"><a href="usb__pd__policy_8c.html#aa173143bdf6b1a4a301e5576b364d5d6">PD_ConnectGetInitRoleState</a></div><div class="ttdeci">TypeCState_t PD_ConnectGetInitRoleState(pd_instance_t *pdInstance, uint32_t typecRole)</div><div class="ttdef"><b>Definition:</b> usb_pd_connect.c:1607</div></div>
<div class="ttc" id="group__usb__pd__stack_html_gga1af9af0106a9413093f8e0d9b796771badc5ad96f1d56cc3354757de9aea78896"><div class="ttname"><a href="group__usb__pd__stack.html#gga1af9af0106a9413093f8e0d9b796771badc5ad96f1d56cc3354757de9aea78896">kVbusPower_Stable</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:712</div></div>
<div class="ttc" id="group__usb__pd__stack_html_gga25760887aa95821023cc0ab5e151f828a20fd8fe92eea59b9fd7dd0691e395baa"><div class="ttname"><a href="group__usb__pd__stack.html#gga25760887aa95821023cc0ab5e151f828a20fd8fe92eea59b9fd7dd0691e395baa">kPD_DataRoleUFP</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:278</div></div>
<div class="ttc" id="struct__pd__power__callback_html_a1afed4126bcbe1ba278eb27f31e99c9c"><div class="ttname"><a href="struct__pd__power__callback.html#a1afed4126bcbe1ba278eb27f31e99c9c">_pd_power_callback::PD_SrcTurnOffVbus</a></div><div class="ttdeci">pd_status_t(* PD_SrcTurnOffVbus)(void *callbackParam, uint8_t powerProgress)</div><div class="ttdoc">source turn off vbus power. </div><div class="ttdef"><b>Definition:</b> usb_pd.h:1266</div></div>
<div class="ttc" id="struct__pd__instance_html_abb01fbdcfbc66eba6c7d5d85e91e62e4"><div class="ttname"><a href="struct__pd__instance.html#abb01fbdcfbc66eba6c7d5d85e91e62e4">_pd_instance::noConnectButVBusExit</a></div><div class="ttdeci">volatile uint8_t noConnectButVBusExit</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:173</div></div>
<div class="ttc" id="struct__pd__instance_html_a0eb7710a55cb5eb2a57355d772b26f74"><div class="ttname"><a href="struct__pd__instance.html#a0eb7710a55cb5eb2a57355d772b26f74">_pd_instance::callbackParam</a></div><div class="ttdeci">void * callbackParam</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:89</div></div>
<div class="ttc" id="struct__pd__instance_html_aea65859fe3a8409ac66aa9f54fb119bf"><div class="ttname"><a href="struct__pd__instance.html#aea65859fe3a8409ac66aa9f54fb119bf">_pd_instance::curPowerRole</a></div><div class="ttdeci">uint8_t curPowerRole</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:154</div></div>
<div class="ttc" id="usb__pd__spec_8h_html_a9a1674d34c926c8ecd0f9f70e2da0338aa6be0b74b1649d54569a428ef0e326a4"><div class="ttname"><a href="usb__pd__spec_8h.html#a9a1674d34c926c8ecd0f9f70e2da0338aa6be0b74b1649d54569a428ef0e326a4">TYPEC_ORIENTED_DEBUG_ACCESSORY_SRC</a></div><div class="ttdef"><b>Definition:</b> usb_pd_spec.h:373</div></div>
<div class="ttc" id="struct__pd__instance__config_html_acb93f9cec67a95c40730be43c80d3214"><div class="ttname"><a href="struct__pd__instance__config.html#acb93f9cec67a95c40730be43c80d3214">_pd_instance_config::phyInterface</a></div><div class="ttdeci">uint8_t phyInterface</div><div class="ttdef"><b>Definition:</b> usb_pd.h:793</div></div>
<div class="ttc" id="usb__pd__interface_8h_html_ac3471f042971fd1641303f2622b844c1"><div class="ttname"><a href="usb__pd__interface_8h.html#ac3471f042971fd1641303f2622b844c1">PD_WAIT_EVENT_TIME</a></div><div class="ttdeci">#define PD_WAIT_EVENT_TIME</div><div class="ttdef"><b>Definition:</b> usb_pd_interface.h:55</div></div>
<div class="ttc" id="struct__pd__phy__config_html_aa606732850969dd6c9bd06b608e8015c"><div class="ttname"><a href="struct__pd__phy__config.html#aa606732850969dd6c9bd06b608e8015c">_pd_phy_config::i2cConfig</a></div><div class="ttdeci">pd_i2c_interface_config_t i2cConfig</div><div class="ttdef"><b>Definition:</b> usb_pd_phy.h:281</div></div>
<div class="ttc" id="group__usb__pd__stack_html_gga25760887aa95821023cc0ab5e151f828ad5849c6d513a7161652bf49bf5096e61"><div class="ttname"><a href="group__usb__pd__stack.html#gga25760887aa95821023cc0ab5e151f828ad5849c6d513a7161652bf49bf5096e61">kPD_DataRoleDFP</a></div><div class="ttdef"><b>Definition:</b> usb_pd.h:279</div></div>
<div class="ttc" id="usb__pd__policy_8c_html_a1fb3d7072f44bb8959b640f553c45e02"><div class="ttname"><a href="usb__pd__policy_8c.html#a1fb3d7072f44bb8959b640f553c45e02">PD_ConnectGetStateMachine</a></div><div class="ttdeci">TypeCState_t PD_ConnectGetStateMachine(pd_instance_t *pdInstance)</div><div class="ttdef"><b>Definition:</b> usb_pd_connect.c:1791</div></div>
<div class="ttc" id="group__usb__os__abstraction_html_gab25fb5d93d3b665ca8eadf2a670d3361"><div class="ttname"><a href="group__usb__os__abstraction.html#gab25fb5d93d3b665ca8eadf2a670d3361">USB_OsaEventCheck</a></div><div class="ttdeci">usb_osa_status_t USB_OsaEventCheck(usb_osa_event_handle handle, uint32_t bitMask, uint32_t *bitSet)</div><div class="ttdoc">Checks an event flag. </div><div class="ttdef"><b>Definition:</b> usb_osa_bm.c:230</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_a602f8622c0ba8d21b5013537dd3dadf9_cgraph.png" border="0" usemap="#usb__pd__interface_8c_a602f8622c0ba8d21b5013537dd3dadf9_cgraph" alt=""/></div>
<map name="usb__pd__interface_8c_a602f8622c0ba8d21b5013537dd3dadf9_cgraph" id="usb__pd__interface_8c_a602f8622c0ba8d21b5013537dd3dadf9_cgraph">
<area shape="rect" id="node2" href="usb__pd__policy_8c.html#ac1262f667cd36f90f205a468ba59b1d4" title="PD_ConnectInitRole" alt="" coords="729,81,871,108"/><area shape="rect" id="node11" href="usb__pd__policy_8c.html#a1fb3d7072f44bb8959b640f553c45e02" title="PD_ConnectGetStateMachine" alt="" coords="217,2555,415,2581"/><area shape="rect" id="node12" href="usb__pd__policy_8c.html#ac70b1975475b5b94815c02eb5be41e1a" title="PD_DpmSetVconn" alt="" coords="733,1440,867,1467"/><area shape="rect" id="node13" href="usb__pd__policy_8c.html#a555b1880b5b259c3fdcd3da821e06cf2" title="PD_PhyControl" alt="" coords="1261,1795,1374,1821"/><area shape="rect" id="node14" href="group__usb__os__abstraction.html#gab25fb5d93d3b665ca8eadf2a670d3361" title="Checks an event flag. " alt="" coords="1457,1288,1610,1315"/><area shape="rect" id="node15" href="group__usb__os__abstraction.html#ga90357f04d40469dc07104033b3c8581c" title="Clears an event flag. " alt="" coords="1460,1845,1607,1872"/><area shape="rect" id="node16" href="group__usb__os__abstraction.html#ga5ce587209d676871f3ec62900054febd" title="Waits for an event flag. " alt="" coords="997,2099,1139,2125"/><area shape="rect" id="node17" href="usb__pd__policy_8c.html#a39aa541f6a8e3843b3ab18fdcf533768" title="PD_PortTaskEventProcess" alt="" coords="977,1845,1159,1872"/><area shape="rect" id="node18" href="usb__pd__policy_8c.html#a25116c60801fe4f4def90e3e42614b54" title="PD_ConnectCheck" alt="" coords="249,763,383,789"/><area shape="rect" id="node31" href="usb__pd__policy_8c.html#a694e9dd685d69f5b21d23e6bbee6e7d9" title="PD_DpmAppCallback" alt="" coords="725,1136,875,1163"/><area shape="rect" id="node35" href="usb__pd__policy_8c.html#a150b2573c8bfe54de3d77cd020d85bc0" title="PD_DpmConnect" alt="" coords="253,2403,379,2429"/><area shape="rect" id="node40" href="usb__pd__policy_8c.html#abc2774ff9e02e6ff6ff4a5fb8088c344" title="PD_DpmDisconnect" alt="" coords="729,2352,871,2379"/><area shape="rect" id="node43" href="usb__pd__policy_8c.html#ac6e31fa3949c6ca1288f96b6c5252bba" title="PD_PsmStateMachine" alt="" coords="239,1845,393,1872"/><area shape="rect" id="node50" href="usb__pd__policy_8c.html#aa173143bdf6b1a4a301e5576b364d5d6" title="PD_ConnectGetInitRoleState" alt="" coords="219,2605,413,2632"/><area shape="rect" id="node3" href="usb__pd__connect_8c.html#a83de99272e34bf7bad5146401157ccff" title="PD_ConnectSetPowerProgress" alt="" coords="965,107,1171,133"/><area shape="rect" id="node4" href="usb__pd__connect_8c.html#a555b1880b5b259c3fdcd3da821e06cf2" title="PD_PhyControl" alt="" coords="1261,364,1374,391"/><area shape="rect" id="node5" href="usb__pd__connect_8c.html#a0608faf2438b33700fc4680061ae69ab" title="PD_ConnectSetupNewState" alt="" coords="973,309,1163,336"/><area shape="rect" id="node7" href="usb__pd__timer_8c.html#afa3b5394c429c185ea93be16ddb1545f" title="PD_TimerStart" alt="" coords="1263,528,1372,555"/><area shape="rect" id="node9" href="usb__pd__timer_8c.html#afd2f667e16635d3db0523f13afe7610c" title="PD_TimerCheckValidTimeOut" alt="" coords="969,579,1167,605"/><area shape="rect" id="node10" href="usb__pd__connect_8c.html#aa173143bdf6b1a4a301e5576b364d5d6" title="PD_ConnectGetInitRoleState" alt="" coords="971,5,1165,32"/><area shape="rect" id="node6" href="usb__pd__timer_8c.html#a453ba4a7609afd86d5e6b9fb8759b6b5" title="PD_TimerClear" alt="" coords="1261,908,1373,935"/><area shape="rect" id="node8" href="usb__pd__connect_8c.html#a0328bd52ba61da793f163660077a0076" title="PD_ConnectSetMonitorCC" alt="" coords="1227,309,1407,336"/><area shape="rect" id="node19" href="usb__pd__connect_8c.html#a6147b33e99b7812c8de585d73af2f2c4" title="PD_ConnectStateMachine" alt="" coords="465,508,642,535"/><area shape="rect" id="node30" href="usb__pd__connect_8c.html#ab61b3d8329ec92553e670b6b0997fa81" title="PD_ConnectState" alt="" coords="489,763,617,789"/><area shape="rect" id="node20" href="usb__pd__connect_8c.html#a4cb64b10c04da73729388d11be51338e" title="PD_ConnectStateDrpToggle\lSrcOrSnkFirstProcess" alt="" coords="706,234,894,275"/><area shape="rect" id="node21" href="usb__pd__connect_8c.html#af6d40e216e9c36436e8363ff28113a3a" title="PD_ConnectStateSrcUnattached\lSrcProcess" alt="" coords="693,467,907,509"/><area shape="rect" id="node22" href="usb__pd__connect_8c.html#a6313417f32370723f208ee8129f7348b" title="PD_ConnectStateSrcAttach\lWaitSrcProcess" alt="" coords="707,701,893,742"/><area shape="rect" id="node23" href="usb__pd__connect_8c.html#a3941fedd707bcdc334532b184d27787f" title="PD_ConnectStateSrcAttached\lSrcProcess" alt="" coords="700,402,900,443"/><area shape="rect" id="node24" href="usb__pd__connect_8c.html#ae84ce27d88537e1fb4335d7cb8a304a5" title="PD_ConnectStateSnkUnattached\lSnkProcess" alt="" coords="691,533,909,574"/><area shape="rect" id="node25" href="usb__pd__connect_8c.html#ad9e61e9e67e7d53a66151eae69b658d8" title="PD_ConnectStateSnkAttach\lWaitSnkProcess" alt="" coords="705,766,895,807"/><area shape="rect" id="node27" href="usb__pd__connect_8c.html#a0144954fa9035cc4e57c20a6a32713c8" title="PD_ConnectStateSnkAttached\lSnkProcess" alt="" coords="967,361,1169,402"/><area shape="rect" id="node28" href="usb__pd__connect_8c.html#a8afdb6c45b33f168a2fb95395714bdfa" title="PD_DpmDischargeVbus" alt="" coords="985,1035,1151,1061"/><area shape="rect" id="node29" href="group__usb__os__abstraction.html#gaa83073c31cced5742027d4046bd633db" title="Sets an event flag. " alt="" coords="733,132,867,159"/><area shape="rect" id="node26" href="usb__pd__timer_8c.html#a3d4072fbbc7b10a05c795eaf9ed33f5f" title="PD_TimerCheckInvalidOrTimeOut" alt="" coords="957,1237,1179,1264"/><area shape="rect" id="node32" href="usb__pd__policy_8c.html#a90012fae056618ce9b4431bd004a852a" title="PD_MsgSrcEndCommand" alt="" coords="1229,1401,1405,1428"/><area shape="rect" id="node34" href="usb__pd__policy_8c.html#a83de99272e34bf7bad5146401157ccff" title="PD_ConnectSetPowerProgress" alt="" coords="965,1136,1171,1163"/><area shape="rect" id="node33" href="usb__pd__msg_8c.html#a555b1880b5b259c3fdcd3da821e06cf2" title="PD_PhyControl" alt="" coords="1477,2087,1590,2113"/><area shape="rect" id="node36" href="usb__pd__timer_8c.html#a815f84fb85fcde5a2efa4af5a02e323c" title="PD_TimerCancelAllTimers" alt="" coords="1229,2352,1406,2379"/><area shape="rect" id="node37" href="usb__pd__policy_8c.html#aec90d4fab260652b95f5027a080bff6b" title="PD_PsmConnect" alt="" coords="491,2301,615,2328"/><area shape="rect" id="node38" href="usb__pd__policy_8c.html#a275c11fb3caf0d669e274a15f4c39f61" title="PD_PsmReset" alt="" coords="1013,2251,1123,2277"/><area shape="rect" id="node39" href="usb__pd__policy_8c.html#a1ae8632e71437586ae348c78f1518772" title="PD_MsgSetPortRole" alt="" coords="728,2048,872,2075"/><area shape="rect" id="node41" href="usb__pd__policy_8c.html#aa2694544089f6e2d123810cd48b27d6e" title="PD_PsmDisconnect" alt="" coords="997,2301,1139,2328"/><area shape="rect" id="node42" href="usb__pd__policy_8c.html#a4c31fc7951e54e4e153f64d3a8e229ef" title="PD_MsgDisable" alt="" coords="1259,2288,1376,2315"/><area shape="rect" id="node44" href="usb__pd__policy_8c.html#afbd2eb3bceb62f29229f0bff6eed6844" title="PD_PsmEnterState" alt="" coords="485,1744,622,1771"/><area shape="rect" id="node49" href="usb__pd__policy_8c.html#ac46d497d9fc03b0096c2977f6a203e02" title="PD_PsmProcessState" alt="" coords="476,1263,631,1289"/><area shape="rect" id="node45" href="usb__pd__policy_8c.html#a82812de846825e22cc625886aa4ed653" title="PD_MsgReset" alt="" coords="1263,2124,1371,2151"/><area shape="rect" id="node46" href="usb__pd__policy_8c.html#ab97edd8ad822d84ac4c3c60716d949e6" title="PD_MsgSendHardReset" alt="" coords="1234,2187,1401,2213"/><area shape="rect" id="node47" href="usb__pd__policy_8c.html#a3020cc9ec6198c8c996b4c0dbdba937d" title="PD_MsgSend" alt="" coords="749,1744,851,1771"/><area shape="rect" id="node48" href="usb__pd__policy_8c.html#a31725b2a47c3137de52deb06cfb27e56" title="PD_MsgWaitSendResult" alt="" coords="716,1997,884,2024"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_a602f8622c0ba8d21b5013537dd3dadf9_icgraph.png" border="0" usemap="#usb__pd__interface_8c_a602f8622c0ba8d21b5013537dd3dadf9_icgraph" alt=""/></div>
<map name="usb__pd__interface_8c_a602f8622c0ba8d21b5013537dd3dadf9_icgraph" id="usb__pd__interface_8c_a602f8622c0ba8d21b5013537dd3dadf9_icgraph">
<area shape="rect" id="node2" href="group__usb__pd__stack.html#ga4227c58a9524464e19ee6efe9615f78e" title="PD stack&#39;s instance task. " alt="" coords="217,5,343,32"/><area shape="rect" id="node3" href="main_8c.html#a616cf54a58f0aad132292f45995c3560" title="pd_port_task" alt="" coords="393,5,490,32"/><area shape="rect" id="node4" href="main_8c.html#a83c983ad37627b3d0f2ba5f1d4d6efaf" title="pd_demo_task" alt="" coords="539,5,645,32"/><area shape="rect" id="node5" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="693,5,744,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af44c9a145b9a610ae07c5c7d8ab08e85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USB_WEAK PD_WaitUsec </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>us</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;{</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    uint32_t usDelay;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">while</span> (us--)</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        usDelay = 15;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordflow">while</span> (--usDelay)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            __ASM(<span class="stringliteral">&quot;nop&quot;</span>);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="usb__pd__interface_8c_af44c9a145b9a610ae07c5c7d8ab08e85_icgraph.png" border="0" usemap="#usb__pd__interface_8c_af44c9a145b9a610ae07c5c7d8ab08e85_icgraph" alt=""/></div>
<map name="usb__pd__interface_8c_af44c9a145b9a610ae07c5c7d8ab08e85_icgraph" id="usb__pd__interface_8c_af44c9a145b9a610ae07c5c7d8ab08e85_icgraph">
<area shape="rect" id="node2" href="usb__pd__ptn5110__hal_8c.html#ab27634b6bde2ceba45309f646cece211" title="Check for PorComplete status and wait if needed. " alt="" coords="161,5,407,46"/><area shape="rect" id="node3" href="usb__pd__ptn5110__interface_8c.html#a661c1fb39c7530ec757dffc93443b203" title="PDPTN5110_Init" alt="" coords="457,12,578,39"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a6a65e61c995d1589e43589e733f45b57"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usb__pd__interface_8h.html#a1deb7ee8a70201e41a45bef369b5d692">pd_instance_t</a> s_PDInstance[<a class="el" href="source__charger_2usb__pd__config_8h.html#adc5392399bc3b25128cb488858c7b328">PD_CONFIG_MAX_PORT</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Aug 16 2017 13:51:13 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
