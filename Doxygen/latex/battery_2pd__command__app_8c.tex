\hypertarget{battery_2pd__command__app_8c}{\section{demo/pd\-\_\-battery/pd\-\_\-command\-\_\-app.c File Reference}
\label{battery_2pd__command__app_8c}\index{demo/pd\-\_\-battery/pd\-\_\-command\-\_\-app.\-c@{demo/pd\-\_\-battery/pd\-\_\-command\-\_\-app.\-c}}
}
{\ttfamily \#include $<$stdint.\-h$>$}\\*
{\ttfamily \#include $<$stdbool.\-h$>$}\\*
{\ttfamily \#include \char`\"{}usb\-\_\-pd\-\_\-config.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}usb\-\_\-pd.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}usb\-\_\-pd\-\_\-phy.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pd\-\_\-app.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}fsl\-\_\-debug\-\_\-console.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pd\-\_\-power\-\_\-interface.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pd\-\_\-command\-\_\-interface.\-h\char`\"{}}\\*
Include dependency graph for pd\-\_\-command\-\_\-app.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{battery_2pd__command__app_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{battery_2pd__command__app_8c_a94e26762d115010a2e40112c73b2003d}{P\-D\-\_\-\-Demo\-Reset} (\hyperlink{pd__app_8h_a43bb8eb90b29f6cc276fd6368cef34c2}{pd\-\_\-app\-\_\-t} $\ast$pd\-App\-Instance)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_a320c5867d39cdebb0bc6e98084c6be69}{P\-D\-\_\-\-Demo\-Find\-P\-D\-O} (\hyperlink{pd__app_8h_a43bb8eb90b29f6cc276fd6368cef34c2}{pd\-\_\-app\-\_\-t} $\ast$pd\-App\-Instance, \hyperlink{group__usb__pd__stack_ga4dcb1103574222cf94d4b45128f2b884}{pd\-\_\-rdo\-\_\-t} $\ast$rdo, uint32\-\_\-t $\ast$voltage)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_a9a594323bf987df556436495d9d6dd2a}{P\-D\-\_\-\-Dpm\-Soft\-Reset\-Callback} (void $\ast$callback\-Param)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_a34306bb735461e522c573f87e8a4049b}{P\-D\-\_\-\-Dpm\-Hard\-Reset\-Callback} (void $\ast$callback\-Param)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_a1d232a97d0a852565547c1952e83faa6}{P\-D\-\_\-\-Dpm\-Power\-Role\-Swap\-Request\-Callback} (void $\ast$callback\-Param, uint8\-\_\-t fr\-Swap, uint8\-\_\-t $\ast$evaluate\-Result)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_a3d92f8202fc73da16faf6d8496bae858}{P\-D\-\_\-\-Dpm\-Power\-Role\-Swap\-Result\-Callback} (void $\ast$callback\-Param, uint8\-\_\-t success, uint8\-\_\-t fail\-Result\-Type)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_ac9514370755ca84c517e49e833ada971}{P\-D\-\_\-\-Dpm\-Vconn\-Swap\-Request\-Callback} (void $\ast$callback\-Param, uint8\-\_\-t $\ast$evaluate\-Result)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_a6f9aaba280e24edd2c837cd689d50eeb}{P\-D\-\_\-\-Dpm\-Vconn\-Swap\-Result\-Callback} (void $\ast$callback\-Param, uint8\-\_\-t success, uint8\-\_\-t fail\-Result\-Type)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_a0012931c6c686dd4bdab89e0b3c6414d}{P\-D\-\_\-\-Dpm\-Src\-R\-D\-O\-Request\-Callback} (void $\ast$callback\-Param, \hyperlink{group__usb__pd__stack_ga4dcb1103574222cf94d4b45128f2b884}{pd\-\_\-rdo\-\_\-t} rdo, uint8\-\_\-t $\ast$negotiate\-Result)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_a098ead626f2b20fb29afb3e8b9d5350b}{P\-D\-\_\-\-Dpm\-Src\-Pre\-Contract\-Still\-Valid\-Callback} (void $\ast$callback\-Param, uint8\-\_\-t $\ast$is\-Still\-Valid)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_a67ae7c023946ebdcdb306e1e96b3f45e}{P\-D\-\_\-\-Dpm\-Src\-R\-D\-O\-Result\-Callback} (void $\ast$callback\-Param, uint8\-\_\-t success, uint8\-\_\-t fail\-Result\-Type)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_aef2aa35be6feb902cbecde3673322473}{P\-D\-\_\-\-Dpm\-Receive\-Partner\-Src\-Caps\-Callback} (void $\ast$callback\-Param, \hyperlink{group__usb__pd__stack_ga1f893b05affdc0ac42173f4dfdfaa258}{pd\-\_\-capabilities\-\_\-t} $\ast$caps)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_a5043c66ba7fcf337c4333144f43ed630}{P\-D\-\_\-\-Dpm\-Get\-Partner\-Src\-Caps\-Fail\-Callback} (void $\ast$callback\-Param, uint8\-\_\-t fail\-Result\-Type)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_adcf04a0dae4086c9517955cf3d447126}{P\-D\-\_\-\-Dpm\-Snk\-Get\-Request\-R\-D\-O\-Callback} (void $\ast$callback\-Param, \hyperlink{group__usb__pd__stack_ga4dcb1103574222cf94d4b45128f2b884}{pd\-\_\-rdo\-\_\-t} $\ast$rdo)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_a1a5c446f863f9b45b09e5b428c5c2613}{P\-D\-\_\-\-Dpm\-Snk\-R\-D\-O\-Result\-Callback} (void $\ast$callback\-Param, uint8\-\_\-t success, uint8\-\_\-t fail\-Result\-Type)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_afcdd95ee527ae1405c5d816317badd5f}{P\-D\-\_\-\-Dpm\-Src\-Goto\-Min\-Result\-Callback} (void $\ast$callback\-Param, uint8\-\_\-t success, uint8\-\_\-t fail\-Result\-Type)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_ad4459653e54df154cb838bea4ccfd4e1}{P\-D\-\_\-\-Dpm\-Snk\-Goto\-Min\-Result\-Callback} (void $\ast$callback\-Param, uint8\-\_\-t success, uint8\-\_\-t fail\-Result\-Type)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_adfab2b7d8a3ba6b4a8e138ac138d2398}{P\-D\-\_\-\-Dpm\-Receive\-Partner\-Snk\-Caps\-Callback} (void $\ast$callback\-Param, \hyperlink{group__usb__pd__stack_ga1f893b05affdc0ac42173f4dfdfaa258}{pd\-\_\-capabilities\-\_\-t} $\ast$caps)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{battery_2pd__command__app_8c_ac82c79e04c70ce07454c8549666b7d5f}{P\-D\-\_\-\-Dpm\-Get\-Partner\-Snk\-Caps\-Fail\-Callback} (void $\ast$callback\-Param, uint8\-\_\-t fail\-Result\-Type)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{battery_2pd__command__app_8c_a320c5867d39cdebb0bc6e98084c6be69}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Demo\-Find\-P\-D\-O@{P\-D\-\_\-\-Demo\-Find\-P\-D\-O}}
\index{P\-D\-\_\-\-Demo\-Find\-P\-D\-O@{P\-D\-\_\-\-Demo\-Find\-P\-D\-O}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Demo\-Find\-P\-D\-O}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Demo\-Find\-P\-D\-O (
\begin{DoxyParamCaption}
\item[{{\bf pd\-\_\-app\-\_\-t} $\ast$}]{pd\-App\-Instance, }
\item[{{\bf pd\-\_\-rdo\-\_\-t} $\ast$}]{rdo, }
\item[{uint32\-\_\-t $\ast$}]{voltage}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_a320c5867d39cdebb0bc6e98084c6be69}

\begin{DoxyCode}
644 \{
645     uint32\_t index;
646     \hyperlink{struct__pd__source__pdo}{pd\_source\_pdo\_t} sourcePDO;
647     \textcolor{keyword}{volatile} uint32\_t requestVoltage;
648     \textcolor{keyword}{volatile} uint32\_t requestCurrent;
649     uint8\_t findSourceCap = 0;
650 
651     \textcolor{keywordflow}{if} (pdAppInstance->\hyperlink{struct__pd__app_a7cd2902dee071f9f64b078bd4ac955be}{partnerSourceCapNumber} == 0)
652     \{
653         \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073a4d58370b8ee8d3d2a4c477f7a3f84dda}{kStatus\_PD\_Error};
654     \}
655 
656     \textcolor{comment}{/* default rdo as 5V - 0.5A or less */}
657     *voltage = 5000;
658     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.objectPosition = 1;
659     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.giveBack = 0;
660     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.capabilityMismatch = 0;
661     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.usbCommunicationsCapable = 0;
662     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.noUsbSuspend = 1;
663     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.operateValue = 500 / \hyperlink{group__usb__pd__stack_ga63746ad31eee8f5912a846952e6645b6}{PD\_PDO\_CURRENT\_UNIT};
664     \textcolor{keywordflow}{if} (rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.operateValue > pdAppInstance->\hyperlink{struct__pd__app_ac8c4ef05a14fc26bacd62f1937726488}{partnerSourceCaps}[0].
      \hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.\hyperlink{struct__pd__source__fixed__pdo_a1bb1756a3f7fe82e0395efac18eb8f41}{maxCurrent})
665     \{
666         rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.operateValue = pdAppInstance->\hyperlink{struct__pd__app_ac8c4ef05a14fc26bacd62f1937726488}{partnerSourceCaps}[0].
      \hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.\hyperlink{struct__pd__source__fixed__pdo_a1bb1756a3f7fe82e0395efac18eb8f41}{maxCurrent};
667     \}
668     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.maxOrMinOperateValue = rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.operateValue;
669 
670     requestVoltage = \hyperlink{pd__app_8h_a82e13f4a1a5efe1195e2ef07def0113b}{PD\_DEMO\_EXPECTED\_VOLTAGE};
671     requestCurrent = \hyperlink{pd__app_8h_a3c0b76dbecdec400c32f77c6af78a98f}{PD\_DEMO\_EXPECTED\_CURRENT};
672 
673     \textcolor{keywordflow}{for} (index = 0; index < pdAppInstance->\hyperlink{struct__pd__app_a7cd2902dee071f9f64b078bd4ac955be}{partnerSourceCapNumber}; ++index)
674     \{
675         sourcePDO.\hyperlink{struct__pd__source__pdo_ae7c1220b81dd8506c6731d7a6adc6ac9}{PDOValue} = pdAppInstance->\hyperlink{struct__pd__app_ac8c4ef05a14fc26bacd62f1937726488}{partnerSourceCaps}[index].
      \hyperlink{struct__pd__source__pdo_ae7c1220b81dd8506c6731d7a6adc6ac9}{PDOValue};
676         \textcolor{keywordflow}{switch} (sourcePDO.\hyperlink{struct__pd__source__pdo_ad1af05b25c2dfc8f72eea50707536c10}{commonPDO}.\hyperlink{struct__pd__pdo__common_a5a1a819ee8e548be9b972852c75aa597}{pdoType})
677         \{
678             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggab9f5d08f382b92b55a7f5f224a231dc9a92d0f35b314a01e880e257e5af3c9e62}{kPDO\_Fixed}:
679             \{
680                 \textcolor{keywordflow}{if} ((sourcePDO.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.\hyperlink{struct__pd__source__fixed__pdo_abba8fe6a9f4c4f6ac33cbfe075945e6a}{voltage} * 
      \hyperlink{group__usb__pd__stack_ga83cbb5a0a1b721ddb0f815077c854e8e}{PD\_PDO\_VOLTAGE\_UNIT} == requestVoltage) &&
681                     (sourcePDO.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.\hyperlink{struct__pd__source__fixed__pdo_a1bb1756a3f7fe82e0395efac18eb8f41}{maxCurrent} * 
      \hyperlink{group__usb__pd__stack_ga63746ad31eee8f5912a846952e6645b6}{PD\_PDO\_CURRENT\_UNIT} >= requestCurrent))
682                 \{
683                     *voltage = sourcePDO.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.\hyperlink{struct__pd__source__fixed__pdo_abba8fe6a9f4c4f6ac33cbfe075945e6a}{voltage} * 
      \hyperlink{group__usb__pd__stack_ga83cbb5a0a1b721ddb0f815077c854e8e}{PD\_PDO\_VOLTAGE\_UNIT};
684                     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.objectPosition = (index + 1);
685                     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.operateValue = requestCurrent / 
      \hyperlink{group__usb__pd__stack_ga63746ad31eee8f5912a846952e6645b6}{PD\_PDO\_CURRENT\_UNIT};
686                     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.maxOrMinOperateValue = rdo->
      \hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.operateValue;
687                     findSourceCap = 1;
688                 \}
689                 \textcolor{keywordflow}{break};
690             \}
691 
692             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggab9f5d08f382b92b55a7f5f224a231dc9ab2765d7b98d6e0922c4937be6d2ab618}{kPDO\_Variable}:
693             \{
694                 \textcolor{keywordflow}{if} ((sourcePDO.\hyperlink{struct__pd__source__pdo_a81d5ae3b407a289661136aa515ba1942}{variablePDO}.\hyperlink{struct__pd__source__variable__pdo_a713018c825f51d1a6a7186582b40a106}{minVoltage} * 
      \hyperlink{group__usb__pd__stack_ga83cbb5a0a1b721ddb0f815077c854e8e}{PD\_PDO\_VOLTAGE\_UNIT} <= requestVoltage) &&
695                     (sourcePDO.\hyperlink{struct__pd__source__pdo_a81d5ae3b407a289661136aa515ba1942}{variablePDO}.\hyperlink{struct__pd__source__variable__pdo_a493ced8078579d68ade7dfbce819b4d1}{maxVoltage} * 
      \hyperlink{group__usb__pd__stack_ga83cbb5a0a1b721ddb0f815077c854e8e}{PD\_PDO\_VOLTAGE\_UNIT} >= requestVoltage) &&
696                     (sourcePDO.\hyperlink{struct__pd__source__pdo_a81d5ae3b407a289661136aa515ba1942}{variablePDO}.\hyperlink{struct__pd__source__variable__pdo_a8a24367204d3381f0670311a88c0b2e6}{maxCurrent} * 
      \hyperlink{group__usb__pd__stack_ga63746ad31eee8f5912a846952e6645b6}{PD\_PDO\_CURRENT\_UNIT} >= requestCurrent))
697                 \{
698                     *voltage = sourcePDO.\hyperlink{struct__pd__source__pdo_a81d5ae3b407a289661136aa515ba1942}{variablePDO}.\hyperlink{struct__pd__source__variable__pdo_a713018c825f51d1a6a7186582b40a106}{minVoltage} * 
      \hyperlink{group__usb__pd__stack_ga83cbb5a0a1b721ddb0f815077c854e8e}{PD\_PDO\_VOLTAGE\_UNIT};
699                     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.objectPosition = (index + 1);
700                     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.operateValue = requestCurrent / 
      \hyperlink{group__usb__pd__stack_ga63746ad31eee8f5912a846952e6645b6}{PD\_PDO\_CURRENT\_UNIT};
701                     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.maxOrMinOperateValue = rdo->
      \hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.operateValue;
702                     findSourceCap = 1;
703                 \}
704                 \textcolor{keywordflow}{break};
705             \}
706 
707             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggab9f5d08f382b92b55a7f5f224a231dc9a42f5a5c21d0523dca99c8e14b2ec23a0}{kPDO\_Battery}:
708             \{
709                 \textcolor{keywordflow}{if} ((sourcePDO.\hyperlink{struct__pd__source__pdo_ae677c279b52a30bc6ca29600d978757e}{batteryPDO}.\hyperlink{struct__pd__source__battery__pdo_a5c799cc37ea460e9bfeea8a05242cf54}{minVoltage} * 
      \hyperlink{group__usb__pd__stack_ga83cbb5a0a1b721ddb0f815077c854e8e}{PD\_PDO\_VOLTAGE\_UNIT} <= requestVoltage) &&
710                     (sourcePDO.\hyperlink{struct__pd__source__pdo_ae677c279b52a30bc6ca29600d978757e}{batteryPDO}.\hyperlink{struct__pd__source__battery__pdo_af818fd645542287499a65f559ef6d571}{maxVoltage} * 
      \hyperlink{group__usb__pd__stack_ga83cbb5a0a1b721ddb0f815077c854e8e}{PD\_PDO\_VOLTAGE\_UNIT} >= requestVoltage) &&
711                     (sourcePDO.\hyperlink{struct__pd__source__pdo_ae677c279b52a30bc6ca29600d978757e}{batteryPDO}.\hyperlink{struct__pd__source__battery__pdo_ae4498258205f03a10afdb32e445a57ef}{maxAllowPower} * 
      \hyperlink{group__usb__pd__stack_ga18642aa62f457d8501be4bddf6608e80}{PD\_PDO\_POWER\_UNIT} >=
712                      (requestVoltage * requestCurrent / 1000)))
713                 \{
714                     *voltage = sourcePDO.\hyperlink{struct__pd__source__pdo_ae677c279b52a30bc6ca29600d978757e}{batteryPDO}.\hyperlink{struct__pd__source__battery__pdo_a5c799cc37ea460e9bfeea8a05242cf54}{minVoltage} * 
      \hyperlink{group__usb__pd__stack_ga83cbb5a0a1b721ddb0f815077c854e8e}{PD\_PDO\_VOLTAGE\_UNIT};
715                     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.objectPosition = (index + 1);
716                     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.operateValue = (requestVoltage * requestCurrent) / 1000 / 
      \hyperlink{group__usb__pd__stack_ga18642aa62f457d8501be4bddf6608e80}{PD\_PDO\_POWER\_UNIT};
717                     rdo->\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.maxOrMinOperateValue = rdo->
      \hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.operateValue;
718                     findSourceCap = 1;
719                 \}
720                 \textcolor{keywordflow}{break};
721             \}
722 
723             \textcolor{keywordflow}{default}:
724                 \textcolor{keywordflow}{break};
725         \}
726 
727         \textcolor{keywordflow}{if} (findSourceCap)
728         \{
729             \textcolor{keywordflow}{break};
730         \}
731     \}
732 
733     \textcolor{keywordflow}{if} (findSourceCap)
734     \{
735         \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
736     \}
737     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073a4d58370b8ee8d3d2a4c477f7a3f84dda}{kStatus\_PD\_Error};
738 \}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=322pt]{battery_2pd__command__app_8c_a320c5867d39cdebb0bc6e98084c6be69_icgraph}
\end{center}
\end{figure}


\hypertarget{battery_2pd__command__app_8c_a94e26762d115010a2e40112c73b2003d}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Demo\-Reset@{P\-D\-\_\-\-Demo\-Reset}}
\index{P\-D\-\_\-\-Demo\-Reset@{P\-D\-\_\-\-Demo\-Reset}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Demo\-Reset}]{\setlength{\rightskip}{0pt plus 5cm}void P\-D\-\_\-\-Demo\-Reset (
\begin{DoxyParamCaption}
\item[{{\bf pd\-\_\-app\-\_\-t} $\ast$}]{pd\-App\-Instance}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_a94e26762d115010a2e40112c73b2003d}

\begin{DoxyCode}
104 \{
105     \hyperlink{pd__app_8c_a31ad0b046935918c7fa0fed8885192c8}{g\_PowerPortConfig}.\hyperlink{struct__pd__power__port__config_a12847f31ee382d4bdee4067c9ee177f4}{sourceCaps} = (uint32\_t *)&pdAppInstance->
      \hyperlink{struct__pd__app_ad908e0fab5fa09248c7412253ce41095}{selfSourcePdo1};
106     if (pdAppInstance->\hyperlink{struct__pd__app_a0c2c01fcb1b30a9b27dbb8ea83d7647b}{batteryQuantity} > 30)
107     \{
108         \hyperlink{pd__app_8c_a31ad0b046935918c7fa0fed8885192c8}{g\_PowerPortConfig}.\hyperlink{struct__pd__power__port__config_a7cf6689616437623deb3b42e5467e26f}{sourceCapCount} = 2;
109     \}
110     \textcolor{keywordflow}{else}
111     \{
112         \hyperlink{pd__app_8c_a31ad0b046935918c7fa0fed8885192c8}{g\_PowerPortConfig}.\hyperlink{struct__pd__power__port__config_a7cf6689616437623deb3b42e5467e26f}{sourceCapCount} = 1;
113     \}
114     pdAppInstance->\hyperlink{struct__pd__app_aff1ed842707beaa8768ec52f9e22c91b}{partnerRequestRDO}.\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.objectPosition = 0; \textcolor{comment}{/* invalid */}
115     pdAppInstance->\hyperlink{struct__pd__app_aa51e69529584a27879d6822e64f6c1c1}{contractValid} = 0;
116     pdAppInstance->\hyperlink{struct__pd__app_ab62809cc014aa5182f48a2414a7d785c}{demoState} = \hyperlink{battery_2pd__app_8h_a163c4cd07f08eb6973342f288c3b2273ace280bef3638a7f786959e6ec35b570b}{kDemoState\_Start};
117     pdAppInstance->\hyperlink{struct__pd__app_a7cd2902dee071f9f64b078bd4ac955be}{partnerSourceCapNumber} = 0;
118 \}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{battery_2pd__command__app_8c_a94e26762d115010a2e40112c73b2003d_icgraph}
\end{center}
\end{figure}


\hypertarget{battery_2pd__command__app_8c_ac82c79e04c70ce07454c8549666b7d5f}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Get\-Partner\-Snk\-Caps\-Fail\-Callback@{P\-D\-\_\-\-Dpm\-Get\-Partner\-Snk\-Caps\-Fail\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Get\-Partner\-Snk\-Caps\-Fail\-Callback@{P\-D\-\_\-\-Dpm\-Get\-Partner\-Snk\-Caps\-Fail\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Get\-Partner\-Snk\-Caps\-Fail\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Get\-Partner\-Snk\-Caps\-Fail\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{uint8\-\_\-t}]{fail\-Result\-Type}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_ac82c79e04c70ce07454c8549666b7d5f}

\begin{DoxyCode}
389 \{
390     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
391 
392     \textcolor{keywordflow}{if} (pdAppInstance->\hyperlink{struct__pd__app_a5fb16448ac6d446eaf7fc758bff182d0}{commandWait} == 1)
393     \{
394         pdAppInstance->\hyperlink{struct__pd__app_a5fb16448ac6d446eaf7fc758bff182d0}{commandWait} = 0;
395         pdAppInstance->\hyperlink{struct__pd__app_aad9f6262f331cbc8c594dada122c31dd}{commandResult} = failResultType;
396     \}
397     \textcolor{keywordflow}{switch} (failResultType)
398     \{
399         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca2037b8a85f98d8d2413d589dbe7ea4fd}{kCommandResult\_Error}:
400             PRINTF(\textcolor{stringliteral}{"get snk cap fail"});
401             \textcolor{keywordflow}{break};
402 
403         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045caa7d52b6983bc63b06da53587776a1664}{kCommandResult\_NotSupported}:
404             PRINTF(\textcolor{stringliteral}{"get snk cap replying not supported"});
405             \textcolor{keywordflow}{break};
406     \}
407 
408     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
409 \}
\end{DoxyCode}
\hypertarget{battery_2pd__command__app_8c_a5043c66ba7fcf337c4333144f43ed630}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Get\-Partner\-Src\-Caps\-Fail\-Callback@{P\-D\-\_\-\-Dpm\-Get\-Partner\-Src\-Caps\-Fail\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Get\-Partner\-Src\-Caps\-Fail\-Callback@{P\-D\-\_\-\-Dpm\-Get\-Partner\-Src\-Caps\-Fail\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Get\-Partner\-Src\-Caps\-Fail\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Get\-Partner\-Src\-Caps\-Fail\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{uint8\-\_\-t}]{fail\-Result\-Type}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_a5043c66ba7fcf337c4333144f43ed630}

\begin{DoxyCode}
258 \{
259     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
260 
261     \textcolor{keywordflow}{if} (pdAppInstance->\hyperlink{struct__pd__app_a5fb16448ac6d446eaf7fc758bff182d0}{commandWait} == 1)
262     \{
263         pdAppInstance->\hyperlink{struct__pd__app_a5fb16448ac6d446eaf7fc758bff182d0}{commandWait} = 0;
264         pdAppInstance->\hyperlink{struct__pd__app_aad9f6262f331cbc8c594dada122c31dd}{commandResult} = failResultType;
265     \}
266     \textcolor{keywordflow}{switch} (failResultType)
267     \{
268         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca2037b8a85f98d8d2413d589dbe7ea4fd}{kCommandResult\_Error}:
269             PRINTF(\textcolor{stringliteral}{"get src cap fail"});
270             \textcolor{keywordflow}{break};
271 
272         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045caa7d52b6983bc63b06da53587776a1664}{kCommandResult\_NotSupported}:
273             PRINTF(\textcolor{stringliteral}{"get src cap replying not supported"});
274             \textcolor{keywordflow}{break};
275     \}
276 
277     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
278 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{battery_2pd__command__app_8c_a5043c66ba7fcf337c4333144f43ed630_cgraph}
\end{center}
\end{figure}


\hypertarget{battery_2pd__command__app_8c_a34306bb735461e522c573f87e8a4049b}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Hard\-Reset\-Callback@{P\-D\-\_\-\-Dpm\-Hard\-Reset\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Hard\-Reset\-Callback@{P\-D\-\_\-\-Dpm\-Hard\-Reset\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Hard\-Reset\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Hard\-Reset\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_a34306bb735461e522c573f87e8a4049b}

\begin{DoxyCode}
68 \{
69     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
70 
71     \hyperlink{battery_2pd__command__app_8c_a94e26762d115010a2e40112c73b2003d}{PD\_DemoReset}(pdAppInstance);
72     \textcolor{comment}{/* reset state, The Sink shall not draw more than iSafe0mA when VBUS is driven to vSafe0V. */}
73     PRINTF(\textcolor{stringliteral}{"hard reset request\(\backslash\)r\(\backslash\)n"});
74     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
75 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{battery_2pd__command__app_8c_a34306bb735461e522c573f87e8a4049b_cgraph}
\end{center}
\end{figure}


\hypertarget{battery_2pd__command__app_8c_a1d232a97d0a852565547c1952e83faa6}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Power\-Role\-Swap\-Request\-Callback@{P\-D\-\_\-\-Dpm\-Power\-Role\-Swap\-Request\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Power\-Role\-Swap\-Request\-Callback@{P\-D\-\_\-\-Dpm\-Power\-Role\-Swap\-Request\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Power\-Role\-Swap\-Request\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Power\-Role\-Swap\-Request\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{uint8\-\_\-t}]{fr\-Swap, }
\item[{uint8\-\_\-t $\ast$}]{evaluate\-Result}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_a1d232a97d0a852565547c1952e83faa6}

\begin{DoxyCode}
78 \{
79     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
80 
81     *evaluateResult = ((pdAppInstance->\hyperlink{struct__pd__app_ae6928ddf7cec733c1244b9f6a2034452}{prSwapAccept}) ? 
      \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca5cbc28129fbc8ef711e9af7a9400d858}{kCommandResult\_Accept} : \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca1f47bf73466bcfd41a0e492b4ee77221}{kCommandResult\_Reject});
82     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
83 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{battery_2pd__command__app_8c_a1d232a97d0a852565547c1952e83faa6_cgraph}
\end{center}
\end{figure}


\hypertarget{battery_2pd__command__app_8c_a3d92f8202fc73da16faf6d8496bae858}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Power\-Role\-Swap\-Result\-Callback@{P\-D\-\_\-\-Dpm\-Power\-Role\-Swap\-Result\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Power\-Role\-Swap\-Result\-Callback@{P\-D\-\_\-\-Dpm\-Power\-Role\-Swap\-Result\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Power\-Role\-Swap\-Result\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Power\-Role\-Swap\-Result\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{uint8\-\_\-t}]{success, }
\item[{uint8\-\_\-t}]{fail\-Result\-Type}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_a3d92f8202fc73da16faf6d8496bae858}

\begin{DoxyCode}
86 \{
87     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
88 
89     \textcolor{keywordflow}{if} (pdAppInstance->\hyperlink{struct__pd__app_a5fb16448ac6d446eaf7fc758bff182d0}{commandWait} == 1)
90     \{
91         pdAppInstance->\hyperlink{struct__pd__app_a5fb16448ac6d446eaf7fc758bff182d0}{commandWait} = 0;
92         pdAppInstance->\hyperlink{struct__pd__app_aad9f6262f331cbc8c594dada122c31dd}{commandResult} = (success ? 
      \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca41691f050dc39a33f802354eacc3df48}{kCommandResult\_Success} : failResultType);
93     \}
94 
95     \textcolor{keywordflow}{if} (success)
96     \{
97         \hyperlink{battery_2pd__command__app_8c_a94e26762d115010a2e40112c73b2003d}{PD\_DemoReset}(pdAppInstance);
98         \hyperlink{group__usb__pd__stack_gac3d77e334213f541028d2da518086ca2}{PD\_Control}(pdAppInstance->\hyperlink{struct__pd__app_a604cb18a01edb2da262e6d53fe41b70e}{pdHandle}, 
      \hyperlink{group__usb__pd__stack_gga0edd2a390d28d96646bc71aac1858af1a04f2cae987c5f93bcd07bcffd679548e}{PD\_CONTROL\_GET\_POWER\_ROLE}, &pdAppInstance->
      \hyperlink{struct__pd__app_af2438fe1e518c3b17672853036e7487e}{selfPowerRole});
99         \textcolor{keywordflow}{if} (pdAppInstance->\hyperlink{struct__pd__app_af2438fe1e518c3b17672853036e7487e}{selfPowerRole} == \hyperlink{group__usb__pd__stack_gga46146487374ddc31d48f33b2b6a26f8ba9fdae65ce89c7d877981a3abef33a2cb}{kPD\_PowerRoleSource})
100         \{
101             PRINTF(\textcolor{stringliteral}{"enter source\(\backslash\)r\(\backslash\)n"});
102         \}
103         \textcolor{keywordflow}{else}
104         \{
105             PRINTF(\textcolor{stringliteral}{"enter sink\(\backslash\)r\(\backslash\)n"});
106         \}
107     \}
108     \textcolor{keywordflow}{else}
109     \{
110         \textcolor{keywordflow}{switch} (failResultType)
111         \{
112             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca1f47bf73466bcfd41a0e492b4ee77221}{kCommandResult\_Reject}:
113                 PRINTF(\textcolor{stringliteral}{"pr swap result: reject\(\backslash\)r\(\backslash\)n"});
114                 \textcolor{keywordflow}{break};
115 
116             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045cabbcc951c401dbb830050a5ece204079a}{kCommandResult\_Wait}:
117                 PRINTF(\textcolor{stringliteral}{"pr swap result: wait\(\backslash\)r\(\backslash\)n"});
118                 \textcolor{keywordflow}{break};
119 
120             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca2037b8a85f98d8d2413d589dbe7ea4fd}{kCommandResult\_Error}:
121                 PRINTF(\textcolor{stringliteral}{"pr swap result: fail\(\backslash\)r\(\backslash\)n"});
122                 \textcolor{keywordflow}{break};
123 
124             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045caa7d52b6983bc63b06da53587776a1664}{kCommandResult\_NotSupported}:
125                 \textcolor{keywordflow}{break};
126 
127             \textcolor{keywordflow}{default}:
128                 \textcolor{keywordflow}{break};
129         \}
130     \}
131 
132     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
133 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{battery_2pd__command__app_8c_a3d92f8202fc73da16faf6d8496bae858_cgraph}
\end{center}
\end{figure}


\hypertarget{battery_2pd__command__app_8c_adfab2b7d8a3ba6b4a8e138ac138d2398}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Receive\-Partner\-Snk\-Caps\-Callback@{P\-D\-\_\-\-Dpm\-Receive\-Partner\-Snk\-Caps\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Receive\-Partner\-Snk\-Caps\-Callback@{P\-D\-\_\-\-Dpm\-Receive\-Partner\-Snk\-Caps\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Receive\-Partner\-Snk\-Caps\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Receive\-Partner\-Snk\-Caps\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{{\bf pd\-\_\-capabilities\-\_\-t} $\ast$}]{caps}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_adfab2b7d8a3ba6b4a8e138ac138d2398}

\begin{DoxyCode}
345 \{
346     uint32\_t index;
347     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
348     \hyperlink{struct__pd__sink__pdo}{pd\_sink\_pdo\_t} sinkPDO;
349     pdAppInstance->\hyperlink{struct__pd__app_a927a55034c0beae071c028b60cd36290}{partnerSinkCapNumber} = caps->
      \hyperlink{struct__pd__capabilities_a240b859a2ffe7e634479a22c3f3e4feb}{capabilitiesCount};
350     \textcolor{keywordflow}{for} (index = 0; index < pdAppInstance->\hyperlink{struct__pd__app_a927a55034c0beae071c028b60cd36290}{partnerSinkCapNumber}; ++index)
351     \{
352         sinkPDO.\hyperlink{struct__pd__sink__pdo_a2f3c5aa6d559d35227af11db28c5dac8}{PDOValue} = pdAppInstance->\hyperlink{struct__pd__app_acc42dfe2943d15788312733c25a20073}{partnerSinkCaps}[index].
      \hyperlink{struct__pd__source__pdo_ae7c1220b81dd8506c6731d7a6adc6ac9}{PDOValue} = caps->\hyperlink{struct__pd__capabilities_a559fdae7ddb5376491caf869366e7e71}{capabilities}[index];
353         \textcolor{keywordflow}{switch} (sinkPDO.\hyperlink{struct__pd__sink__pdo_a8f6789929499a63a1326708206e016c5}{commonPDO}.\hyperlink{struct__pd__pdo__common_a5a1a819ee8e548be9b972852c75aa597}{pdoType})
354         \{
355             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggab9f5d08f382b92b55a7f5f224a231dc9a92d0f35b314a01e880e257e5af3c9e62}{kPDO\_Fixed}:
356             \{
357                 PRINTF(\textcolor{stringliteral}{"%d: fixed PDO; "}, index + 1);
358                 PRINTF(\textcolor{stringliteral}{"vol:%dmV, current:%dmA\(\backslash\)r\(\backslash\)n"}, sinkPDO.\hyperlink{struct__pd__sink__pdo_aebd2d1f5078757ee9a4c3d836e0df136}{fixedPDO}.
      \hyperlink{struct__pd__sink__fixed__pdo_a5e095a725455f85faa43a1573e62b798}{voltage} * \hyperlink{group__usb__pd__stack_ga83cbb5a0a1b721ddb0f815077c854e8e}{PD\_PDO\_VOLTAGE\_UNIT},
359                        sinkPDO.\hyperlink{struct__pd__sink__pdo_aebd2d1f5078757ee9a4c3d836e0df136}{fixedPDO}.\hyperlink{struct__pd__sink__fixed__pdo_a264499e662c6bb82e0e25fc3d296b88b}{operateCurrent} * 
      \hyperlink{group__usb__pd__stack_ga63746ad31eee8f5912a846952e6645b6}{PD\_PDO\_CURRENT\_UNIT});
360                 \textcolor{keywordflow}{break};
361             \}
362 
363             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggab9f5d08f382b92b55a7f5f224a231dc9ab2765d7b98d6e0922c4937be6d2ab618}{kPDO\_Variable}:
364             \{
365                 PRINTF(\textcolor{stringliteral}{"%d: variable PDO; "}, index + 1);
366                 PRINTF(\textcolor{stringliteral}{"vol:%dmV ~ %dmV, current:%dmA\(\backslash\)r\(\backslash\)n"}, sinkPDO.\hyperlink{struct__pd__sink__pdo_a15603e339ec84b653f83ee6865c1dfd8}{variablePDO}.
      \hyperlink{struct__pd__sink__variable__pdo_adc5d6a90b282fc222e180b79aef74e65}{maxVoltage} * \hyperlink{group__usb__pd__stack_ga83cbb5a0a1b721ddb0f815077c854e8e}{PD\_PDO\_VOLTAGE\_UNIT},
367                        sinkPDO.\hyperlink{struct__pd__sink__pdo_a15603e339ec84b653f83ee6865c1dfd8}{variablePDO}.\hyperlink{struct__pd__sink__variable__pdo_a0ee666a778180c34bc4e0119ee3f51a3}{minVoltage} * 
      \hyperlink{group__usb__pd__stack_ga83cbb5a0a1b721ddb0f815077c854e8e}{PD\_PDO\_VOLTAGE\_UNIT},
368                        sinkPDO.\hyperlink{struct__pd__sink__pdo_a15603e339ec84b653f83ee6865c1dfd8}{variablePDO}.\hyperlink{struct__pd__sink__variable__pdo_a145ba35b4f033f771ae9b72c018181d5}{operateCurrent} * 
      \hyperlink{group__usb__pd__stack_ga63746ad31eee8f5912a846952e6645b6}{PD\_PDO\_CURRENT\_UNIT});
369                 \textcolor{keywordflow}{break};
370             \}
371 
372             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggab9f5d08f382b92b55a7f5f224a231dc9a42f5a5c21d0523dca99c8e14b2ec23a0}{kPDO\_Battery}:
373             \{
374                 PRINTF(\textcolor{stringliteral}{"%d: battery PDO; "}, index + 1);
375                 PRINTF(\textcolor{stringliteral}{"vol:%dmV ~ %dmV, power:%dmW\(\backslash\)r\(\backslash\)n"}, sinkPDO.\hyperlink{struct__pd__sink__pdo_adb7ddc7d4451cd6fe0f6eb13ebce229e}{batteryPDO}.
      \hyperlink{struct__pd__sink__battery__pdo_a5fe153e249c105e6b8414233ae216710}{maxVoltage} * \hyperlink{group__usb__pd__stack_ga83cbb5a0a1b721ddb0f815077c854e8e}{PD\_PDO\_VOLTAGE\_UNIT},
376                        sinkPDO.\hyperlink{struct__pd__sink__pdo_adb7ddc7d4451cd6fe0f6eb13ebce229e}{batteryPDO}.\hyperlink{struct__pd__sink__battery__pdo_a473824d26b81e000486844b83e32b09d}{minVoltage} * 
      \hyperlink{group__usb__pd__stack_ga83cbb5a0a1b721ddb0f815077c854e8e}{PD\_PDO\_VOLTAGE\_UNIT},
377                        sinkPDO.\hyperlink{struct__pd__sink__pdo_adb7ddc7d4451cd6fe0f6eb13ebce229e}{batteryPDO}.\hyperlink{struct__pd__sink__battery__pdo_aede06aa3716908a68c90828fbfe5cebe}{operatePower} * 
      \hyperlink{group__usb__pd__stack_ga18642aa62f457d8501be4bddf6608e80}{PD\_PDO\_POWER\_UNIT});
378             \}
379 
380             \textcolor{keywordflow}{default}:
381                 \textcolor{keywordflow}{break};
382         \}
383     \}
384 
385     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
386 \}
\end{DoxyCode}
\hypertarget{battery_2pd__command__app_8c_aef2aa35be6feb902cbecde3673322473}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Receive\-Partner\-Src\-Caps\-Callback@{P\-D\-\_\-\-Dpm\-Receive\-Partner\-Src\-Caps\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Receive\-Partner\-Src\-Caps\-Callback@{P\-D\-\_\-\-Dpm\-Receive\-Partner\-Src\-Caps\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Receive\-Partner\-Src\-Caps\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Receive\-Partner\-Src\-Caps\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{{\bf pd\-\_\-capabilities\-\_\-t} $\ast$}]{caps}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_aef2aa35be6feb902cbecde3673322473}

\begin{DoxyCode}
239 \{
240     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
241     uint8\_t index;
242 
243     \textcolor{keywordflow}{if} (pdAppInstance->\hyperlink{struct__pd__app_a5fb16448ac6d446eaf7fc758bff182d0}{commandWait} == 1)
244     \{
245         pdAppInstance->\hyperlink{struct__pd__app_a5fb16448ac6d446eaf7fc758bff182d0}{commandWait} = 0;
246         pdAppInstance->\hyperlink{struct__pd__app_aad9f6262f331cbc8c594dada122c31dd}{commandResult} = \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca41691f050dc39a33f802354eacc3df48}{kCommandResult\_Success};
247     \}
248     pdAppInstance->\hyperlink{struct__pd__app_a7cd2902dee071f9f64b078bd4ac955be}{partnerSourceCapNumber} = caps->
      \hyperlink{struct__pd__capabilities_a240b859a2ffe7e634479a22c3f3e4feb}{capabilitiesCount};
249     \textcolor{keywordflow}{for} (index = 0; index < caps->\hyperlink{struct__pd__capabilities_a240b859a2ffe7e634479a22c3f3e4feb}{capabilitiesCount}; ++index)
250     \{
251         pdAppInstance->\hyperlink{struct__pd__app_ac8c4ef05a14fc26bacd62f1937726488}{partnerSourceCaps}[index].\hyperlink{struct__pd__source__pdo_ae7c1220b81dd8506c6731d7a6adc6ac9}{PDOValue} = caps->
      \hyperlink{struct__pd__capabilities_a559fdae7ddb5376491caf869366e7e71}{capabilities}[index];
252     \}
253 
254     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
255 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{battery_2pd__command__app_8c_aef2aa35be6feb902cbecde3673322473_cgraph}
\end{center}
\end{figure}


\hypertarget{battery_2pd__command__app_8c_adcf04a0dae4086c9517955cf3d447126}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Snk\-Get\-Request\-R\-D\-O\-Callback@{P\-D\-\_\-\-Dpm\-Snk\-Get\-Request\-R\-D\-O\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Snk\-Get\-Request\-R\-D\-O\-Callback@{P\-D\-\_\-\-Dpm\-Snk\-Get\-Request\-R\-D\-O\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Snk\-Get\-Request\-R\-D\-O\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Snk\-Get\-Request\-R\-D\-O\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{{\bf pd\-\_\-rdo\-\_\-t} $\ast$}]{rdo}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_adcf04a0dae4086c9517955cf3d447126}

\begin{DoxyCode}
281 \{
282     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
283     uint32\_t voltage;
284 
285     \textcolor{keywordflow}{if} (\hyperlink{pd__command__app_8c_a320c5867d39cdebb0bc6e98084c6be69}{PD\_DemoFindPDO}(pdAppInstance, rdo, &voltage) != 
      \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success})
286     \{
287         PRINTF(\textcolor{stringliteral}{"cap mismatch\(\backslash\)r\(\backslash\)n"});
288     \}
289     pdAppInstance->\hyperlink{struct__pd__app_aaef3da806ed2695378c7ce5cc01462d5}{sinkRequestVoltage} = voltage;
290     pdAppInstance->\hyperlink{struct__pd__app_ab41fa9c76e29ce689c812cfc7ad55150}{sinkRequestRDO} = *rdo;
291 
292     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
293 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{battery_2pd__command__app_8c_adcf04a0dae4086c9517955cf3d447126_cgraph}
\end{center}
\end{figure}


\hypertarget{battery_2pd__command__app_8c_ad4459653e54df154cb838bea4ccfd4e1}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Snk\-Goto\-Min\-Result\-Callback@{P\-D\-\_\-\-Dpm\-Snk\-Goto\-Min\-Result\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Snk\-Goto\-Min\-Result\-Callback@{P\-D\-\_\-\-Dpm\-Snk\-Goto\-Min\-Result\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Snk\-Goto\-Min\-Result\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Snk\-Goto\-Min\-Result\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{uint8\-\_\-t}]{success, }
\item[{uint8\-\_\-t}]{fail\-Result\-Type}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_ad4459653e54df154cb838bea4ccfd4e1}

\begin{DoxyCode}
340 \{
341     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
342 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{battery_2pd__command__app_8c_ad4459653e54df154cb838bea4ccfd4e1_cgraph}
\end{center}
\end{figure}


\hypertarget{battery_2pd__command__app_8c_a1a5c446f863f9b45b09e5b428c5c2613}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Snk\-R\-D\-O\-Result\-Callback@{P\-D\-\_\-\-Dpm\-Snk\-R\-D\-O\-Result\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Snk\-R\-D\-O\-Result\-Callback@{P\-D\-\_\-\-Dpm\-Snk\-R\-D\-O\-Result\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Snk\-R\-D\-O\-Result\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Snk\-R\-D\-O\-Result\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{uint8\-\_\-t}]{success, }
\item[{uint8\-\_\-t}]{fail\-Result\-Type}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_a1a5c446f863f9b45b09e5b428c5c2613}

\begin{DoxyCode}
296 \{
297     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
298 
299     \textcolor{keywordflow}{if} (pdAppInstance->\hyperlink{struct__pd__app_a5fb16448ac6d446eaf7fc758bff182d0}{commandWait} == 1)
300     \{
301         pdAppInstance->\hyperlink{struct__pd__app_a5fb16448ac6d446eaf7fc758bff182d0}{commandWait} = 0;
302         pdAppInstance->\hyperlink{struct__pd__app_aad9f6262f331cbc8c594dada122c31dd}{commandResult} = (success ? 
      \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca41691f050dc39a33f802354eacc3df48}{kCommandResult\_Success} : failResultType);
303     \}
304 
305     \textcolor{keywordflow}{if} (success)
306     \{
307         pdAppInstance->\hyperlink{struct__pd__app_aa51e69529584a27879d6822e64f6c1c1}{contractValid} = 1;
308         PRINTF(\textcolor{stringliteral}{"sink request %dmV success\(\backslash\)r\(\backslash\)n"}, pdAppInstance->
      \hyperlink{struct__pd__app_aaef3da806ed2695378c7ce5cc01462d5}{sinkRequestVoltage});
309     \}
310     \textcolor{keywordflow}{else}
311     \{
312         \textcolor{keywordflow}{switch} (failResultType)
313         \{
314             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca2037b8a85f98d8d2413d589dbe7ea4fd}{kCommandResult\_Error}:
315                 PRINTF(\textcolor{stringliteral}{"sink request power result: fail\(\backslash\)r\(\backslash\)n"});
316                 \textcolor{keywordflow}{break};
317 
318             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca1f47bf73466bcfd41a0e492b4ee77221}{kCommandResult\_Reject}:
319                 PRINTF(\textcolor{stringliteral}{"sink request power result: reject\(\backslash\)r\(\backslash\)n"});
320                 \textcolor{keywordflow}{break};
321 
322             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045cabbcc951c401dbb830050a5ece204079a}{kCommandResult\_Wait}:
323                 PRINTF(\textcolor{stringliteral}{"sink request power result: wait\(\backslash\)r\(\backslash\)n"});
324                 \textcolor{keywordflow}{break};
325 
326             \textcolor{keywordflow}{default}:
327                 \textcolor{keywordflow}{break};
328         \}
329     \}
330 
331     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
332 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{battery_2pd__command__app_8c_a1a5c446f863f9b45b09e5b428c5c2613_cgraph}
\end{center}
\end{figure}


\hypertarget{battery_2pd__command__app_8c_a9a594323bf987df556436495d9d6dd2a}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Soft\-Reset\-Callback@{P\-D\-\_\-\-Dpm\-Soft\-Reset\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Soft\-Reset\-Callback@{P\-D\-\_\-\-Dpm\-Soft\-Reset\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Soft\-Reset\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Soft\-Reset\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_a9a594323bf987df556436495d9d6dd2a}

\begin{DoxyCode}
61 \{
62     \textcolor{comment}{/* reset soft status */}
63     PRINTF(\textcolor{stringliteral}{"app soft reset\(\backslash\)r\(\backslash\)n"});
64     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
65 \}
\end{DoxyCode}
\hypertarget{battery_2pd__command__app_8c_afcdd95ee527ae1405c5d816317badd5f}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Src\-Goto\-Min\-Result\-Callback@{P\-D\-\_\-\-Dpm\-Src\-Goto\-Min\-Result\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Src\-Goto\-Min\-Result\-Callback@{P\-D\-\_\-\-Dpm\-Src\-Goto\-Min\-Result\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Src\-Goto\-Min\-Result\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Src\-Goto\-Min\-Result\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{uint8\-\_\-t}]{success, }
\item[{uint8\-\_\-t}]{fail\-Result\-Type}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_afcdd95ee527ae1405c5d816317badd5f}

\begin{DoxyCode}
335 \{
336     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
337 \}
\end{DoxyCode}
\hypertarget{battery_2pd__command__app_8c_a098ead626f2b20fb29afb3e8b9d5350b}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Src\-Pre\-Contract\-Still\-Valid\-Callback@{P\-D\-\_\-\-Dpm\-Src\-Pre\-Contract\-Still\-Valid\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Src\-Pre\-Contract\-Still\-Valid\-Callback@{P\-D\-\_\-\-Dpm\-Src\-Pre\-Contract\-Still\-Valid\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Src\-Pre\-Contract\-Still\-Valid\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Src\-Pre\-Contract\-Still\-Valid\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{uint8\-\_\-t $\ast$}]{is\-Still\-Valid}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_a098ead626f2b20fb29afb3e8b9d5350b}

\begin{DoxyCode}
199 \{
200     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
201 
202     \textcolor{comment}{/* if pre contract exist, return true */}
203     \textcolor{keywordflow}{if} (pdAppInstance->\hyperlink{struct__pd__app_aff1ed842707beaa8768ec52f9e22c91b}{partnerRequestRDO}.\hyperlink{struct__pd__rdo_acd03d551b682b870d0e30be5819d013e}{bitFields}.objectPosition != 0)
204     \{
205         *isStillValid = 1;
206     \}
207     \textcolor{keywordflow}{else}
208     \{
209         *isStillValid = 0;
210     \}
211     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
212 \}
\end{DoxyCode}
\hypertarget{battery_2pd__command__app_8c_a0012931c6c686dd4bdab89e0b3c6414d}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Src\-R\-D\-O\-Request\-Callback@{P\-D\-\_\-\-Dpm\-Src\-R\-D\-O\-Request\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Src\-R\-D\-O\-Request\-Callback@{P\-D\-\_\-\-Dpm\-Src\-R\-D\-O\-Request\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Src\-R\-D\-O\-Request\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Src\-R\-D\-O\-Request\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{{\bf pd\-\_\-rdo\-\_\-t}}]{rdo, }
\item[{uint8\-\_\-t $\ast$}]{negotiate\-Result}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_a0012931c6c686dd4bdab89e0b3c6414d}

\begin{DoxyCode}
188 \{
189     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
190 
191     \textcolor{comment}{/* prepare for power supply, The power supply shall be ready to operate at the new power level within}
192 \textcolor{comment}{     * tSrcReady */}
193     pdAppInstance->\hyperlink{struct__pd__app_aff1ed842707beaa8768ec52f9e22c91b}{partnerRequestRDO} = rdo;
194     *negotiateResult = \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca5cbc28129fbc8ef711e9af7a9400d858}{kCommandResult\_Accept};
195     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
196 \}
\end{DoxyCode}
\hypertarget{battery_2pd__command__app_8c_a67ae7c023946ebdcdb306e1e96b3f45e}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Src\-R\-D\-O\-Result\-Callback@{P\-D\-\_\-\-Dpm\-Src\-R\-D\-O\-Result\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Src\-R\-D\-O\-Result\-Callback@{P\-D\-\_\-\-Dpm\-Src\-R\-D\-O\-Result\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Src\-R\-D\-O\-Result\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Src\-R\-D\-O\-Result\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{uint8\-\_\-t}]{success, }
\item[{uint8\-\_\-t}]{fail\-Result\-Type}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_a67ae7c023946ebdcdb306e1e96b3f45e}

\begin{DoxyCode}
215 \{
216     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
217 
218     \textcolor{keywordflow}{if} (success)
219     \{
220         pdAppInstance->\hyperlink{struct__pd__app_aa51e69529584a27879d6822e64f6c1c1}{contractValid} = 1;
221     \}
222     \textcolor{keywordflow}{else}
223     \{
224         \textcolor{keywordflow}{switch} (failResultType)
225         \{
226             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca2037b8a85f98d8d2413d589dbe7ea4fd}{kCommandResult\_Error}:
227                 PRINTF(\textcolor{stringliteral}{"source has error in power negotiation\(\backslash\)r\(\backslash\)n"});
228                 \textcolor{keywordflow}{break};
229 
230             \textcolor{keywordflow}{default}:
231                 \textcolor{keywordflow}{break};
232         \}
233     \}
234 
235     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
236 \}
\end{DoxyCode}
\hypertarget{battery_2pd__command__app_8c_ac9514370755ca84c517e49e833ada971}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Vconn\-Swap\-Request\-Callback@{P\-D\-\_\-\-Dpm\-Vconn\-Swap\-Request\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Vconn\-Swap\-Request\-Callback@{P\-D\-\_\-\-Dpm\-Vconn\-Swap\-Request\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Vconn\-Swap\-Request\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Vconn\-Swap\-Request\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{uint8\-\_\-t $\ast$}]{evaluate\-Result}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_ac9514370755ca84c517e49e833ada971}

\begin{DoxyCode}
136 \{
137     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
138 
139     *evaluateResult = ((pdAppInstance->\hyperlink{struct__pd__app_ad3460ca1eda49e355b0b155671ba2823}{vconnSwapAccept}) ? 
      \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca5cbc28129fbc8ef711e9af7a9400d858}{kCommandResult\_Accept} : \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca1f47bf73466bcfd41a0e492b4ee77221}{kCommandResult\_Reject});
140     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
141 \}
\end{DoxyCode}
\hypertarget{battery_2pd__command__app_8c_a6f9aaba280e24edd2c837cd689d50eeb}{\index{battery/pd\-\_\-command\-\_\-app.\-c@{battery/pd\-\_\-command\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Vconn\-Swap\-Result\-Callback@{P\-D\-\_\-\-Dpm\-Vconn\-Swap\-Result\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Vconn\-Swap\-Result\-Callback@{P\-D\-\_\-\-Dpm\-Vconn\-Swap\-Result\-Callback}!battery/pd_command_app.c@{battery/pd\-\_\-command\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Vconn\-Swap\-Result\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Vconn\-Swap\-Result\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{uint8\-\_\-t}]{success, }
\item[{uint8\-\_\-t}]{fail\-Result\-Type}
\end{DoxyParamCaption}
)}}\label{battery_2pd__command__app_8c_a6f9aaba280e24edd2c837cd689d50eeb}

\begin{DoxyCode}
144 \{
145     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
146     uint8\_t roleInfo;
147 
148     \textcolor{keywordflow}{if} (success)
149     \{
150         \hyperlink{group__usb__pd__stack_gac3d77e334213f541028d2da518086ca2}{PD\_Control}(pdAppInstance->\hyperlink{struct__pd__app_a604cb18a01edb2da262e6d53fe41b70e}{pdHandle}, 
      \hyperlink{group__usb__pd__stack_gga0edd2a390d28d96646bc71aac1858af1a157e80a587dd98e5cd78e9927b4c4994}{PD\_CONTROL\_GET\_VCONN\_ROLE}, &roleInfo);
151         \textcolor{keywordflow}{if} (roleInfo == \hyperlink{group__usb__pd__stack_ggab67908aebf6cb10704f4ec6127761e28a239cd9fcbe39abba0bc8959dc1a24e37}{kPD\_IsVconnSource})
152         \{
153             PRINTF(\textcolor{stringliteral}{"vconn swap result: turn as source\(\backslash\)r\(\backslash\)n"});
154         \}
155         \textcolor{keywordflow}{else}
156         \{
157             PRINTF(\textcolor{stringliteral}{"vconn swap result: not vconn source\(\backslash\)r\(\backslash\)n"});
158         \}
159     \}
160     \textcolor{keywordflow}{else}
161     \{
162         \textcolor{keywordflow}{switch} (failResultType)
163         \{
164             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca1f47bf73466bcfd41a0e492b4ee77221}{kCommandResult\_Reject}:
165                 PRINTF(\textcolor{stringliteral}{"vconn swap result: reject\(\backslash\)r\(\backslash\)n"});
166                 \textcolor{keywordflow}{break};
167 
168             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045cabbcc951c401dbb830050a5ece204079a}{kCommandResult\_Wait}:
169                 PRINTF(\textcolor{stringliteral}{"vconn swap result: wait\(\backslash\)r\(\backslash\)n"});
170                 \textcolor{keywordflow}{break};
171 
172             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca2037b8a85f98d8d2413d589dbe7ea4fd}{kCommandResult\_Error}:
173                 PRINTF(\textcolor{stringliteral}{"vconn swap result: fail\(\backslash\)r\(\backslash\)n"});
174                 \textcolor{keywordflow}{break};
175 
176             \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045caa7d52b6983bc63b06da53587776a1664}{kCommandResult\_NotSupported}:
177                 \textcolor{keywordflow}{break};
178 
179             \textcolor{keywordflow}{default}:
180                 \textcolor{keywordflow}{break};
181         \}
182     \}
183 
184     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
185 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{battery_2pd__command__app_8c_a6f9aaba280e24edd2c837cd689d50eeb_cgraph}
\end{center}
\end{figure}


