\hypertarget{source__charger_2pd__app_8c}{\section{demo/pd\-\_\-source\-\_\-charger/pd\-\_\-app.c File Reference}
\label{source__charger_2pd__app_8c}\index{demo/pd\-\_\-source\-\_\-charger/pd\-\_\-app.\-c@{demo/pd\-\_\-source\-\_\-charger/pd\-\_\-app.\-c}}
}
{\ttfamily \#include \char`\"{}usb\-\_\-pd\-\_\-config.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}usb\-\_\-pd.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}string.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Free\-R\-T\-O\-S.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}task.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}queue.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}timers.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pd\-\_\-app.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}fsl\-\_\-device\-\_\-registers.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}fsl\-\_\-lptmr.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}fsl\-\_\-port.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}fsl\-\_\-debug\-\_\-console.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}fsl\-\_\-gpio.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}board.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}pd\-\_\-power\-\_\-interface.\-h\char`\"{}}\\*
Include dependency graph for pd\-\_\-app.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{source__charger_2pd__app_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{source__charger_2pd__app_8c_a955008a65e30d3b860c6cf4f6d7c2e54}{P\-D\-\_\-\-P\-T\-N5110\-\_\-\-G\-P\-I\-O\-\_\-\-I\-N\-T\-E\-R\-R\-U\-P\-T\-\_\-\-P\-R\-I\-O\-R\-I\-T\-Y}~(4)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{source__charger_2pd__app_8c_a0fcfdce4020a6f6d89a1dca22db9736d}{P\-D\-\_\-\-Power\-Board\-Reset} (void)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{source__charger_2pd__app_8c_a336eb892659ecb2d1392ebf1839a0b18}{P\-D\-\_\-\-Dpm\-App\-Command\-Callback} (void $\ast$callback\-Param, uint32\-\_\-t event, void $\ast$param)
\item 
void \hyperlink{source__charger_2pd__app_8c_af2521ef8b447748866a3ad2c818faa92}{P\-O\-R\-T\-B\-\_\-\-P\-O\-R\-T\-C\-\_\-\-P\-O\-R\-T\-D\-\_\-\-P\-O\-R\-T\-E\-\_\-\-I\-R\-Q\-Handler} (void)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{source__charger_2pd__app_8c_a76d0496e2aa1a40759b549a23506f14a}{P\-D\-\_\-\-Dpm\-Connect\-Callback} (void $\ast$callback\-Param, uint32\-\_\-t event, void $\ast$param)
\item 
\hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\-\_\-status\-\_\-t} \hyperlink{source__charger_2pd__app_8c_a648f96eddcd92c89d8908b63ac0f9185}{P\-D\-\_\-\-Dpm\-Demo\-App\-Callback} (void $\ast$callback\-Param, uint32\-\_\-t event, void $\ast$param)
\item 
void \hyperlink{source__charger_2pd__app_8c_ae90a39427d391ee932de4fd9adbcde6a}{P\-D\-\_\-\-App\-Init} (void)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{pd__app_8h_a43bb8eb90b29f6cc276fd6368cef34c2}{pd\-\_\-app\-\_\-t} \hyperlink{source__charger_2pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\-\_\-\-P\-D\-App\-Instance}
\item 
\hyperlink{group__usb__pd__stack_ga1897a14a90aea9e4b0e7cf1e5b4ea449}{pd\-\_\-power\-\_\-port\-\_\-config\-\_\-t} \hyperlink{source__charger_2pd__app_8c_a31ad0b046935918c7fa0fed8885192c8}{g\-\_\-\-Power\-Port\-Config}
\item 
\hyperlink{group__usb__pd__stack_gafa6034f9e204836697da1f2fc996cbad}{pd\-\_\-instance\-\_\-config\-\_\-t} \hyperlink{source__charger_2pd__app_8c_a33272daf4c2c919c757e12106af7ffd5}{g\-\_\-\-P\-D\-Config}
\item 
\hyperlink{group__usb__pd__stack_gaf1142461de7d7dcc6268c286ba956265}{pd\-\_\-power\-\_\-handle\-\_\-callback\-\_\-t} \hyperlink{source__charger_2pd__app_8c_a306f9b8029582dfb8c64f163fea3cf65}{callback\-Functions}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{source__charger_2pd__app_8c_a955008a65e30d3b860c6cf4f6d7c2e54}{\index{source\-\_\-charger/pd\-\_\-app.\-c@{source\-\_\-charger/pd\-\_\-app.\-c}!P\-D\-\_\-\-P\-T\-N5110\-\_\-\-G\-P\-I\-O\-\_\-\-I\-N\-T\-E\-R\-R\-U\-P\-T\-\_\-\-P\-R\-I\-O\-R\-I\-T\-Y@{P\-D\-\_\-\-P\-T\-N5110\-\_\-\-G\-P\-I\-O\-\_\-\-I\-N\-T\-E\-R\-R\-U\-P\-T\-\_\-\-P\-R\-I\-O\-R\-I\-T\-Y}}
\index{P\-D\-\_\-\-P\-T\-N5110\-\_\-\-G\-P\-I\-O\-\_\-\-I\-N\-T\-E\-R\-R\-U\-P\-T\-\_\-\-P\-R\-I\-O\-R\-I\-T\-Y@{P\-D\-\_\-\-P\-T\-N5110\-\_\-\-G\-P\-I\-O\-\_\-\-I\-N\-T\-E\-R\-R\-U\-P\-T\-\_\-\-P\-R\-I\-O\-R\-I\-T\-Y}!source_charger/pd_app.c@{source\-\_\-charger/pd\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-P\-T\-N5110\-\_\-\-G\-P\-I\-O\-\_\-\-I\-N\-T\-E\-R\-R\-U\-P\-T\-\_\-\-P\-R\-I\-O\-R\-I\-T\-Y}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\-D\-\_\-\-P\-T\-N5110\-\_\-\-G\-P\-I\-O\-\_\-\-I\-N\-T\-E\-R\-R\-U\-P\-T\-\_\-\-P\-R\-I\-O\-R\-I\-T\-Y~(4)}}\label{source__charger_2pd__app_8c_a955008a65e30d3b860c6cf4f6d7c2e54}


\subsection{Function Documentation}
\hypertarget{source__charger_2pd__app_8c_ae90a39427d391ee932de4fd9adbcde6a}{\index{source\-\_\-charger/pd\-\_\-app.\-c@{source\-\_\-charger/pd\-\_\-app.\-c}!P\-D\-\_\-\-App\-Init@{P\-D\-\_\-\-App\-Init}}
\index{P\-D\-\_\-\-App\-Init@{P\-D\-\_\-\-App\-Init}!source_charger/pd_app.c@{source\-\_\-charger/pd\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-App\-Init}]{\setlength{\rightskip}{0pt plus 5cm}void P\-D\-\_\-\-App\-Init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{source__charger_2pd__app_8c_ae90a39427d391ee932de4fd9adbcde6a}

\begin{DoxyCode}
177 \{
178     \hyperlink{pd__app_8c_a31ad0b046935918c7fa0fed8885192c8}{g\_PowerPortConfig}.\hyperlink{struct__pd__power__port__config_a12847f31ee382d4bdee4067c9ee177f4}{sourceCaps} = (uint32\_t *)&
      \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_ad908e0fab5fa09248c7412253ce41095}{selfSourcePdo1}, \textcolor{comment}{/* source caps */}
179         \hyperlink{pd__app_8c_a31ad0b046935918c7fa0fed8885192c8}{g\_PowerPortConfig}.\hyperlink{struct__pd__power__port__config_a7cf6689616437623deb3b42e5467e26f}{sourceCapCount} = 2;
180     \hyperlink{pd__app_8c_a31ad0b046935918c7fa0fed8885192c8}{g\_PowerPortConfig}.\hyperlink{struct__pd__power__port__config_ab247068e26ad76b2670eb96da39969e1}{sinkCaps} = NULL, \textcolor{comment}{/* self sink caps */}
181         \hyperlink{pd__app_8c_a31ad0b046935918c7fa0fed8885192c8}{g\_PowerPortConfig}.\hyperlink{struct__pd__power__port__config_aa1d58bf75fbebad4b8c7e29b0cc4c64e}{sinkCapCount} = 0;
182     if (\hyperlink{group__usb__pd__stack_ga3ab001290dc934fd6a45ad93916f5140}{PD\_InstanceInit}(&\hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_a604cb18a01edb2da262e6d53fe41b70e}{pdHandle}, 
      \hyperlink{pd__app_8c_a648f96eddcd92c89d8908b63ac0f9185}{PD\_DpmDemoAppCallback}, &\hyperlink{pd__app_8c_a306f9b8029582dfb8c64f163fea3cf65}{callbackFunctions}, &
      \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance},
183                         &\hyperlink{pd__app_8c_a33272daf4c2c919c757e12106af7ffd5}{g\_PDConfig}) != \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success})
184     \{
185         PRINTF(\textcolor{stringliteral}{"pd init fail\(\backslash\)r\(\backslash\)n"});
186     \}
187 
188     \textcolor{comment}{/* initialize port interrupt */}
189     PORT\_SetPinInterruptConfig(\hyperlink{pd__app_8h_ad99e5c127ff695f7b579400ef1062e76}{BOARD\_PTN5110\_GPIO\_PORT}, 
      \hyperlink{pd__app_8h_ac0976521bb8bc7a1e4724ec1188e7f46}{BOARD\_PTN5110\_GPIO\_PIN}, kPORT\_InterruptLogicZero);
190     \hyperlink{pd__app_8h_a1fcc7374a2ec203aceb85355f3118f3d}{BOARD\_PTN5110\_GPIO}->PDDR &= ~(1U << \hyperlink{pd__app_8h_ac0976521bb8bc7a1e4724ec1188e7f46}{BOARD\_PTN5110\_GPIO\_PIN});   
       \textcolor{comment}{/* gpio set as input */}
191     \hyperlink{pd__app_8h_a77241910fa3175fcb0afaea8fe32077d}{PD\_EXTRA\_EN\_SRC\_GPIO}->PDDR |= (1U << 
      \hyperlink{pd__app_8h_a07b7d368c8bae862deab6d5fc4c1ead5}{PD\_EXTRA\_EN\_SRC\_GPIO\_PIN}); \textcolor{comment}{/* as output */}
192 
193     NVIC\_SetPriority((IRQn\_Type)\hyperlink{pd__app_8h_ae0efede5c9bfe4dfe7351a4759b5ae61}{BOARD\_PTN5110\_GPIO\_IRQ}, 
      \hyperlink{source__charger_2pd__app_8c_a955008a65e30d3b860c6cf4f6d7c2e54}{PD\_PTN5110\_GPIO\_INTERRUPT\_PRIORITY});
194 
195     \hyperlink{pd__app_8c_a0fcfdce4020a6f6d89a1dca22db9736d}{PD\_PowerBoardReset}();
196 
197     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_a2fc0a3061498fda37106d3d16aec10c8}{msgSop} = \hyperlink{group__usb__pd__stack_gga7a924235403e0acab44d01e720091aa1a5c5082dee0eb49208cd4a5c728ff7fce}{kPD\_MsgSOP};
198     \textcolor{comment}{/* PDO1: fixed supply: dual-role power; Externally Powered; no USB communication; dual-role data; 5V;
       2.7A */}
199     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_ad908e0fab5fa09248c7412253ce41095}{selfSourcePdo1}.\hyperlink{struct__pd__source__pdo_ae7c1220b81dd8506c6731d7a6adc6ac9}{PDOValue} = 0;
200     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_ad908e0fab5fa09248c7412253ce41095}{selfSourcePdo1}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_a9965da25ad2e4b58fd579e5a0632145a}{dualRoleData} = 0;
201     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_ad908e0fab5fa09248c7412253ce41095}{selfSourcePdo1}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_afcce88f5e0b229d32e79297566e80dfd}{dualRolePower} = 0;
202     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_ad908e0fab5fa09248c7412253ce41095}{selfSourcePdo1}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_aa1715617698b348913227183195ae8f5}{externalPowered} = 1;
203     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_ad908e0fab5fa09248c7412253ce41095}{selfSourcePdo1}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_a2375dc4363d49f14521f1f7f6adffcde}{fixedSupply} = \hyperlink{group__usb__pd__stack_ggab9f5d08f382b92b55a7f5f224a231dc9a92d0f35b314a01e880e257e5af3c9e62}{kPDO\_Fixed};
204     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_ad908e0fab5fa09248c7412253ce41095}{selfSourcePdo1}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_a1bb1756a3f7fe82e0395efac18eb8f41}{maxCurrent} = (27 * 10);
205     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_ad908e0fab5fa09248c7412253ce41095}{selfSourcePdo1}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_a1a27fc2753ab60196afd3813e158d413}{peakCurrent} = 0;
206 \textcolor{preprocessor}{#if ((defined PD\_CONFIG\_REVISION) && (PD\_CONFIG\_REVISION >= PD\_SPEC\_REVISION\_30))}
207 \textcolor{preprocessor}{}    \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_ad908e0fab5fa09248c7412253ce41095}{selfSourcePdo1}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_a6e793acf2c695c57030e59f28dc5b65a}{unchunkedSupported} = 1;
208 \textcolor{preprocessor}{#endif}
209 \textcolor{preprocessor}{}    \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_ad908e0fab5fa09248c7412253ce41095}{selfSourcePdo1}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_a0e2f3fc73e269168132defedb85f9d9f}{usbCommunicationsCapable} = 0;
210     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_ad908e0fab5fa09248c7412253ce41095}{selfSourcePdo1}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_aa836f41dcaaafe17d4ff65eeb3729b6d}{usbSuspendSupported} = 0;
211     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_ad908e0fab5fa09248c7412253ce41095}{selfSourcePdo1}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_abba8fe6a9f4c4f6ac33cbfe075945e6a}{voltage} = (5 * 1000 / 50);
212     \textcolor{comment}{/* PDO2: fixed Supply: 9V - 1.5A */}
213     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_a49087b316d085ddf2be9d4ab093a0088}{selfSourcePdo2}.\hyperlink{struct__pd__source__pdo_ae7c1220b81dd8506c6731d7a6adc6ac9}{PDOValue} = 0;
214     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_a49087b316d085ddf2be9d4ab093a0088}{selfSourcePdo2}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_a2375dc4363d49f14521f1f7f6adffcde}{fixedSupply} = \hyperlink{group__usb__pd__stack_ggab9f5d08f382b92b55a7f5f224a231dc9a92d0f35b314a01e880e257e5af3c9e62}{kPDO\_Fixed};
215     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_a49087b316d085ddf2be9d4ab093a0088}{selfSourcePdo2}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_a1bb1756a3f7fe82e0395efac18eb8f41}{maxCurrent} = (15 * 10);
216     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_a49087b316d085ddf2be9d4ab093a0088}{selfSourcePdo2}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_a1a27fc2753ab60196afd3813e158d413}{peakCurrent} = 0;
217 \textcolor{preprocessor}{#if ((defined PD\_CONFIG\_REVISION) && (PD\_CONFIG\_REVISION >= PD\_SPEC\_REVISION\_30))}
218 \textcolor{preprocessor}{}    \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_a49087b316d085ddf2be9d4ab093a0088}{selfSourcePdo2}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_a6e793acf2c695c57030e59f28dc5b65a}{unchunkedSupported} = 1;
219 \textcolor{preprocessor}{#endif}
220 \textcolor{preprocessor}{}    \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_a49087b316d085ddf2be9d4ab093a0088}{selfSourcePdo2}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_a0e2f3fc73e269168132defedb85f9d9f}{usbCommunicationsCapable} = 0;
221     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_a49087b316d085ddf2be9d4ab093a0088}{selfSourcePdo2}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_aa836f41dcaaafe17d4ff65eeb3729b6d}{usbSuspendSupported} = 0;
222     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_a49087b316d085ddf2be9d4ab093a0088}{selfSourcePdo2}.\hyperlink{struct__pd__source__pdo_a2405f8ee75a370cba4a48b94080958b1}{fixedPDO}.
      \hyperlink{struct__pd__source__fixed__pdo_abba8fe6a9f4c4f6ac33cbfe075945e6a}{voltage} = (9 * 1000 / 50);
223     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_a7356b8ec554edd5c580b8b2310e3fed0}{selfSouceCapNumber} = 2;
224 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{source__charger_2pd__app_8c_ae90a39427d391ee932de4fd9adbcde6a_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{source__charger_2pd__app_8c_ae90a39427d391ee932de4fd9adbcde6a_icgraph}
\end{center}
\end{figure}


\hypertarget{source__charger_2pd__app_8c_a336eb892659ecb2d1392ebf1839a0b18}{\index{source\-\_\-charger/pd\-\_\-app.\-c@{source\-\_\-charger/pd\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-App\-Command\-Callback@{P\-D\-\_\-\-Dpm\-App\-Command\-Callback}}
\index{P\-D\-\_\-\-Dpm\-App\-Command\-Callback@{P\-D\-\_\-\-Dpm\-App\-Command\-Callback}!source_charger/pd_app.c@{source\-\_\-charger/pd\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-App\-Command\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-App\-Command\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{uint32\-\_\-t}]{event, }
\item[{void $\ast$}]{param}
\end{DoxyParamCaption}
)}}\label{source__charger_2pd__app_8c_a336eb892659ecb2d1392ebf1839a0b18}

\begin{DoxyCode}
65 \{
66     \hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\_status\_t} status = \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073a4d58370b8ee8d3d2a4c477f7a3f84dda}{kStatus\_PD\_Error};
67 
68     \textcolor{keywordflow}{switch} (event)
69     \{
70         \textcolor{comment}{/* hard reset */}
71         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a65ddff38ff9b959107bdabc53a1d1713}{PD\_DPM\_SNK\_HARD\_RESET\_REQUEST}:
72         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a64e92f523589e05e41df27ce310855ae}{PD\_DPM\_SRC\_HARD\_RESET\_REQUEST}:
73             status = \hyperlink{pd__command__app_8c_a34306bb735461e522c573f87e8a4049b}{PD\_DpmHardResetCallback}(callbackParam);
74             \textcolor{keywordflow}{break};
75 
76         \textcolor{comment}{/* pr\_swap */}
77         \textcolor{comment}{/* fast role swap */}
78         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a92e06fee7178623887fe1d895ae3ffa3}{PD\_DPM\_PR\_SWAP\_REQUEST}:
79         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8ab8e9c9690239a89c37d446bf4b35122c}{PD\_DPM\_FR\_SWAP\_REQUEST}:
80             status =
81                 \hyperlink{pd__command__app_8c_a1d232a97d0a852565547c1952e83faa6}{PD\_DpmPowerRoleSwapRequestCallback}(callbackParam, (event 
      == \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8ab8e9c9690239a89c37d446bf4b35122c}{PD\_DPM\_FR\_SWAP\_REQUEST}), (uint8\_t *)param);
82             \textcolor{keywordflow}{break};
83         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a97a7759c15d78fc8c7a1e53f522c7799}{PD\_DPM\_PR\_SWAP\_SUCCESS}:
84         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a2d0a8b5453cd82a137805d3b023b264d}{PD\_DPM\_FR\_SWAP\_SUCCESS}:
85             status = \hyperlink{pd__command__app_8c_a3d92f8202fc73da16faf6d8496bae858}{PD\_DpmPowerRoleSwapResultCallback}(callbackParam, 1, 0
      );
86             \textcolor{keywordflow}{break};
87         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a34537a7fbc8f9182d14d4ef32607f7c5}{PD\_DPM\_PR\_SWAP\_FAIL}:
88         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a410336358bacd4292bc294c26d850275}{PD\_DPM\_FR\_SWAP\_FAIL}:
89             status = \hyperlink{pd__command__app_8c_a3d92f8202fc73da16faf6d8496bae858}{PD\_DpmPowerRoleSwapResultCallback}(callbackParam, 0, *
      ((uint8\_t *)param));
90             \textcolor{keywordflow}{break};
91 
92         \textcolor{comment}{/* dr swap */}
93         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a5f42f19b50481c9b5819e556fba25b94}{PD\_DPM\_DR\_SWAP\_REQUEST}:
94             status = \hyperlink{pd__command__app_8c_af8c3a76d7c2de000c0546a9939d8583a}{PD\_DpmDataRoleSwapRequestCallback}(callbackParam, (
      uint8\_t *)param);
95             \textcolor{keywordflow}{break};
96         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a6e361b395106973070aef142ed93a6f8}{PD\_DPM\_DR\_SWAP\_SUCCESS}:
97             status = \hyperlink{pd__command__app_8c_a826803f4b1f9fdf80c90234ce290e881}{PD\_DpmDataRoleSwapResultCallback}(callbackParam, 1, 0);
98             \textcolor{keywordflow}{break};
99         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8ac43a8c3be37b3c4c33dd213e2bb1662d}{PD\_DPM\_DR\_SWAP\_FAIL}:
100             status = \hyperlink{pd__command__app_8c_a826803f4b1f9fdf80c90234ce290e881}{PD\_DpmDataRoleSwapResultCallback}(callbackParam, 0, *((
      uint8\_t *)param));
101             \textcolor{keywordflow}{break};
102 
103         \textcolor{comment}{/* vconn swap */}
104         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8ab62a576276285565837d94af7a289378}{PD\_DPM\_VCONN\_SWAP\_REQUEST}:
105             status = \hyperlink{pd__command__app_8c_ac9514370755ca84c517e49e833ada971}{PD\_DpmVconnSwapRequestCallback}(callbackParam, (uint8\_t 
      *)param);
106             \textcolor{keywordflow}{break};
107         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a599ef1b2e4b2ac816d5eebb00afc6bd6}{PD\_DPM\_VCONN\_SWAP\_SUCCESS}:
108             status = \hyperlink{pd__command__app_8c_a6f9aaba280e24edd2c837cd689d50eeb}{PD\_DpmVconnSwapResultCallback}(callbackParam, 1, 0);
109             \textcolor{keywordflow}{break};
110         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a7d1d0c1a00df8f90177fef2eaf7f1831}{PD\_DPM\_VCONN\_SWAP\_FAIL}:
111             status = \hyperlink{pd__command__app_8c_a6f9aaba280e24edd2c837cd689d50eeb}{PD\_DpmVconnSwapResultCallback}(callbackParam, 0, *((
      uint8\_t *)param));
112             \textcolor{keywordflow}{break};
113 
114         \textcolor{comment}{/* rdo request and power negotiation */}
115         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a49dbf9ff2b5fba3ef05e0bf4da9ee7f6}{PD\_DPM\_SRC\_RDO\_REQUEST}:
116             status = \hyperlink{pd__command__app_8c_a0012931c6c686dd4bdab89e0b3c6414d}{PD\_DpmSrcRDORequestCallback}(callbackParam, ((
      \hyperlink{struct__pd__negotiate__power__request}{pd\_negotiate\_power\_request\_t} *)param)->rdo,
117                                                  &(((
      \hyperlink{struct__pd__negotiate__power__request}{pd\_negotiate\_power\_request\_t} *)param)->negotiateResult));
118             \textcolor{keywordflow}{break};
119         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a2ec99737c513a5308eaf1dabf39b7486}{PD\_DPM\_SRC\_CONTRACT\_STILL\_VALID}:
120             status = \hyperlink{pd__command__app_8c_a098ead626f2b20fb29afb3e8b9d5350b}{PD\_DpmSrcPreContractStillValidCallback}(
      callbackParam, (uint8\_t *)param);
121             \textcolor{keywordflow}{break};
122         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a1811ccedaf6c42290ef3311d01d3be92}{PD\_DPM\_SRC\_SEND\_SRC\_CAP\_FAIL}:
123             status = \hyperlink{pd__command__app_8c_a67ae7c023946ebdcdb306e1e96b3f45e}{PD\_DpmSrcRDOResultCallback}(callbackParam, 0, 
      \hyperlink{group__usb__pd__stack_ggaa0c9fbfbfb4442ef9d805438bfeb045ca2037b8a85f98d8d2413d589dbe7ea4fd}{kCommandResult\_Error});
124             \textcolor{keywordflow}{break};
125         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a212a13db5a2a86d25d5e4e9bd9bd9d40}{PD\_DPM\_SRC\_RDO\_SUCCESS}:
126             status = \hyperlink{pd__command__app_8c_a67ae7c023946ebdcdb306e1e96b3f45e}{PD\_DpmSrcRDOResultCallback}(callbackParam, 1, 0);
127             \textcolor{keywordflow}{break};
128         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a83108cfc7a063655541fa36c59b8ace8}{PD\_DPM\_SRC\_RDO\_FAIL}:
129             status = \hyperlink{pd__command__app_8c_a67ae7c023946ebdcdb306e1e96b3f45e}{PD\_DpmSrcRDOResultCallback}(callbackParam, 0, *((uint8\_t *)
      param));
130             \textcolor{keywordflow}{break};
131         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a73f52811ed1d7307f82f21ec46a09f24}{PD\_DPM\_SNK\_RECEIVE\_PARTNER\_SRC\_CAP}:
132             status = \hyperlink{pd__command__app_8c_aef2aa35be6feb902cbecde3673322473}{PD\_DpmReceivePartnerSrcCapsCallback}(callbackParam, 
      (\hyperlink{struct__pd__capabilities}{pd\_capabilities\_t} *)param);
133             \textcolor{keywordflow}{break};
134         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a7ae766d14391a18afed566fc89aab26a}{PD\_DPM\_SNK\_GET\_RDO}:
135             status = \hyperlink{pd__command__app_8c_adcf04a0dae4086c9517955cf3d447126}{PD\_DpmSnkGetRequestRDOCallback}(callbackParam, (
      \hyperlink{struct__pd__rdo}{pd\_rdo\_t} *)param);
136             \textcolor{keywordflow}{break};
137         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a1439b92e5316a3eac87950f7ee737890}{PD\_DPM\_SNK\_RDO\_SUCCESS}:
138             status = \hyperlink{pd__command__app_8c_a1a5c446f863f9b45b09e5b428c5c2613}{PD\_DpmSnkRDOResultCallback}(callbackParam, 1, 0);
139             \textcolor{keywordflow}{break};
140         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8aa3476563b037797a05c3aeaeb347dc7c}{PD\_DPM\_SNK\_RDO\_FAIL}:
141             status = \hyperlink{pd__command__app_8c_a1a5c446f863f9b45b09e5b428c5c2613}{PD\_DpmSnkRDOResultCallback}(callbackParam, 0, *((uint8\_t *)
      param));
142             \textcolor{keywordflow}{break};
143 
144         \textcolor{comment}{/* get source cap */}
145         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8aee9e5991d19424456884d183c3892e84}{PD\_DPM\_GET\_PARTNER\_SRC\_CAP\_FAIL}:
146             status = \hyperlink{pd__command__app_8c_a5043c66ba7fcf337c4333144f43ed630}{PD\_DpmGetPartnerSrcCapsFailCallback}(callbackParam, 
      *((uint8\_t *)param));
147             \textcolor{keywordflow}{break};
148         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8aad63fc26b7c90d0b0882d09609f03c82}{PD\_DPM\_GET\_PARTNER\_SRC\_CAP\_SUCCESS}:
149             status = \hyperlink{pd__command__app_8c_aef2aa35be6feb902cbecde3673322473}{PD\_DpmReceivePartnerSrcCapsCallback}(callbackParam, 
      (\hyperlink{struct__pd__capabilities}{pd\_capabilities\_t} *)param);
150             \textcolor{keywordflow}{break};
151 
152         \textcolor{comment}{/* goto min */}
153         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8af4df2566f7dfb5614eab4183fd49d3bb}{PD\_DPM\_SRC\_GOTOMIN\_FAIL}:
154             status = \hyperlink{pd__command__app_8c_afcdd95ee527ae1405c5d816317badd5f}{PD\_DpmSrcGotoMinResultCallback}(callbackParam, 0, *((
      uint8\_t *)param));
155             \textcolor{keywordflow}{break};
156         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a818c91e1b20cc978318777720f2c7a3b}{PD\_DPM\_SRC\_GOTOMIN\_SUCCESS}:
157             status = \hyperlink{pd__command__app_8c_afcdd95ee527ae1405c5d816317badd5f}{PD\_DpmSrcGotoMinResultCallback}(callbackParam, 1, 0);
158             \textcolor{keywordflow}{break};
159         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8ae8334e4d49acc42ad9f6365c19f4cad1}{PD\_DPM\_SNK\_GOTOMIN\_SUCCESS}:
160             status = \hyperlink{pd__command__app_8c_ad4459653e54df154cb838bea4ccfd4e1}{PD\_DpmSnkGotoMinResultCallback}(callbackParam, 1, 0);
161             \textcolor{keywordflow}{break};
162         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8ac8eef85341e9ed1414592961c242e1e2}{PD\_DPM\_SNK\_GOTOMIN\_FAIL}:
163             status = \hyperlink{pd__command__app_8c_ad4459653e54df154cb838bea4ccfd4e1}{PD\_DpmSnkGotoMinResultCallback}(callbackParam, 0, *((
      uint8\_t *)param));
164             \textcolor{keywordflow}{break};
165 
166         \textcolor{comment}{/* get sink cap */}
167         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8acf7e85712657f05298823cf3cbb530dd}{PD\_DPM\_GET\_PARTNER\_SNK\_CAP\_SUCCESS}:
168             status = \hyperlink{pd__command__app_8c_adfab2b7d8a3ba6b4a8e138ac138d2398}{PD\_DpmReceivePartnerSnkCapsCallback}(callbackParam, 
      (\hyperlink{struct__pd__capabilities}{pd\_capabilities\_t} *)param);
169             \textcolor{keywordflow}{break};
170         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a2b5e3e788da63ca93c05e4723fbd6046}{PD\_DPM\_GET\_PARTNER\_SNK\_CAP\_FAIL}:
171             status = \hyperlink{pd__command__app_8c_ac82c79e04c70ce07454c8549666b7d5f}{PD\_DpmGetPartnerSnkCapsFailCallback}(callbackParam, 
      *((uint8\_t *)param));
172             \textcolor{keywordflow}{break};
173 
174         \textcolor{comment}{/* soft reset */}
175         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8ad1d3a3dd48dcbb93d29eee4e09093770}{PD\_DPM\_SOFT\_RESET\_SUCCESS}:
176         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a55e5b428b44bfbcef61a8fc137370c60}{PD\_DPM\_SOFT\_RESET\_REQUEST}:
177             status = \hyperlink{pd__command__app_8c_a9a594323bf987df556436495d9d6dd2a}{PD\_DpmSoftResetCallback}(callbackParam);
178             \textcolor{keywordflow}{break};
179         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a0c22065d3fb71fbfef9abe1a385dd661}{PD\_DPM\_SOFT\_RESET\_FAIL}:
180             \textcolor{comment}{/* in normal situation, app don't need process it PD stack will do hard\_reset if soft\_reset
       fail. */}
181             \textcolor{keywordflow}{break};
182 
183         \textcolor{comment}{/* structured vdm */}
184         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a3780d17cd0d9e3a4dea59cc37d6b21f5}{PD\_DPM\_STRUCTURED\_VDM\_REQUEST}:
185             status = \hyperlink{pd__command__app_8c_a93eda98ed9ea76dfbf9975269a20907f}{PD\_DpmSVDMRequestCallback}(callbackParam, (
      \hyperlink{struct__pd__svdm__request}{pd\_svdm\_command\_request\_t} *)param);
186             \textcolor{keywordflow}{break};
187         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a86c746ea102e63e889d538d6f705d161}{PD\_DPM\_STRUCTURED\_VDM\_SUCCESS}:
188             status = \hyperlink{pd__command__app_8c_a292e6cc1ce06e7dc3d0e194747dfa5de}{PD\_DpmSVDMResultCallback}(callbackParam, 1, (
      \hyperlink{struct__pd__svdm__command__result}{pd\_svdm\_command\_result\_t} *)param);
189             \textcolor{keywordflow}{break};
190         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a695e8a864e1ec8d4af67e207ff4a3496}{PD\_DPM\_STRUCTURED\_VDM\_FAIL}:
191             status = \hyperlink{pd__command__app_8c_a292e6cc1ce06e7dc3d0e194747dfa5de}{PD\_DpmSVDMResultCallback}(callbackParam, 0, (
      \hyperlink{struct__pd__svdm__command__result}{pd\_svdm\_command\_result\_t} *)param);
192             \textcolor{keywordflow}{break};
193 
194         \textcolor{comment}{/* unstructured vdm */}
195         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8aba865ebaa6f459beeada24269d03d60c}{PD\_DPM\_UNSTRUCTURED\_VDM\_RECEIVED}:
196             status = \hyperlink{pd__command__app_8c_a508772bcb38cf6f15fecc3933c2ad798}{PD\_DpmUnstructuredVDMReceivedCallback}(
      callbackParam, (\hyperlink{struct__pd__unstructured__vdm__param}{pd\_unstructured\_vdm\_command\_param\_t} *)param);
197             \textcolor{keywordflow}{break};
198         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a94f2566e98cfbdc0652b66b36042699e}{PD\_DPM\_SEND\_UNSTRUCTURED\_VDM\_SUCCESS}:
199             status = \hyperlink{pd__command__app_8c_a8e743ef12b8722d742d7eeae4f9b476d}{PD\_DpmUnstructuredVDMSendResultCallback}(
      callbackParam, 1, 0);
200             \textcolor{keywordflow}{break};
201         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8ad3a77273432ced03f24d234487c6f072}{PD\_DPM\_SEND\_UNSTRUCTURED\_VDM\_FAIL}:
202             status = \hyperlink{pd__command__app_8c_a8e743ef12b8722d742d7eeae4f9b476d}{PD\_DpmUnstructuredVDMSendResultCallback}(
      callbackParam, 0, *((uint8\_t *)param));
203             \textcolor{keywordflow}{break};
204 
205 \textcolor{preprocessor}{#if ((defined PD\_CONFIG\_REVISION) && (PD\_CONFIG\_REVISION >= PD\_SPEC\_REVISION\_30))}
206 \textcolor{preprocessor}{}        \textcolor{comment}{/* get source extended cap */}
207         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a670316f4975a4e2731f51ee420b99ba6}{PD\_DPM\_GIVE\_SRC\_EXT\_CAP}:
208             status = \hyperlink{pd__command__app_8c_a4719e49373052976ae6c146751657246}{PD\_DpmGetInfoRequestCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dba615accd0475ed93fbf2810f7ee13feab}{kInfoType\_SrcExtCap}, (\hyperlink{struct__pd__command__data__param}{pd\_command\_data\_param\_t} *)param);
209             \textcolor{keywordflow}{break};
210         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a767e582b283be0e9c85a03a8fa2a7ad7}{PD\_DPM\_GET\_SRC\_EXT\_CAP\_SUCCESS}:
211             status =
212                 \hyperlink{pd__command__app_8c_aeacfe9453f3f249dc48453104fba98fe}{PD\_DpmGetInfoResultCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dba615accd0475ed93fbf2810f7ee13feab}{kInfoType\_SrcExtCap}, 1, (\hyperlink{struct__pd__command__data__param}{pd\_command\_data\_param\_t} *)param, 0);
213             \textcolor{keywordflow}{break};
214         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a616a08f0f899286d5e61d8b56ceb8fc2}{PD\_DPM\_GET\_SRC\_EXT\_CAP\_FAIL}:
215             status = \hyperlink{pd__command__app_8c_aeacfe9453f3f249dc48453104fba98fe}{PD\_DpmGetInfoResultCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dba615accd0475ed93fbf2810f7ee13feab}{kInfoType\_SrcExtCap}, 0, NULL, *((uint8\_t *)param));
216             \textcolor{keywordflow}{break};
217 
218         \textcolor{comment}{/* get status */}
219         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a20b164e82d99ac69c299ad7cd634e1af}{PD\_DPM\_GIVE\_STATUS}:
220             status = \hyperlink{pd__command__app_8c_a4719e49373052976ae6c146751657246}{PD\_DpmGetInfoRequestCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dbad7eb2376a1248d3be2006ed470e69d6d}{kInfoType\_Status}, (\hyperlink{struct__pd__command__data__param}{pd\_command\_data\_param\_t} *)param);
221             \textcolor{keywordflow}{break};
222         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a8e8ad1c091c6bd98f7d0b2d081ecba93}{PD\_DPM\_GET\_STATUS\_SUCCESS}:
223             status =
224                 \hyperlink{pd__command__app_8c_aeacfe9453f3f249dc48453104fba98fe}{PD\_DpmGetInfoResultCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dbad7eb2376a1248d3be2006ed470e69d6d}{kInfoType\_Status}, 1, (\hyperlink{struct__pd__command__data__param}{pd\_command\_data\_param\_t} *)param, 0);
225             \textcolor{keywordflow}{break};
226         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a440bbb508768a0bccca64ebc450a001b}{PD\_DPM\_GET\_STATUS\_FAIL}:
227             status = \hyperlink{pd__command__app_8c_aeacfe9453f3f249dc48453104fba98fe}{PD\_DpmGetInfoResultCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dbad7eb2376a1248d3be2006ed470e69d6d}{kInfoType\_Status}, 0, NULL, *((uint8\_t *)param));
228             \textcolor{keywordflow}{break};
229 
230         \textcolor{comment}{/* get battery cap */}
231         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a5e3c5980f5866884637cef416af45ab2}{PD\_DPM\_GIVE\_BATTERY\_CAP}:
232             status =
233                 \hyperlink{pd__command__app_8c_a4719e49373052976ae6c146751657246}{PD\_DpmGetInfoRequestCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dba53d96445d22ade3b89427bdd4145306e}{kInfoType\_BatteryCap}, (\hyperlink{struct__pd__command__data__param}{pd\_command\_data\_param\_t} *)param);
234             \textcolor{keywordflow}{break};
235         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a22fb818c8b5aacce85cfdc2e713901cb}{PD\_DPM\_GET\_BATTERY\_CAP\_SUCCESS}:
236             status = \hyperlink{pd__command__app_8c_aeacfe9453f3f249dc48453104fba98fe}{PD\_DpmGetInfoResultCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dba53d96445d22ade3b89427bdd4145306e}{kInfoType\_BatteryCap}, 1,
237                                                  (\hyperlink{struct__pd__command__data__param}{pd\_command\_data\_param\_t} *)param, 0
      );
238             \textcolor{keywordflow}{break};
239         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a728741dabfcf75b6187b16075e644879}{PD\_DPM\_GET\_BATTERY\_CAP\_FAIL}:
240             status = \hyperlink{pd__command__app_8c_aeacfe9453f3f249dc48453104fba98fe}{PD\_DpmGetInfoResultCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dba53d96445d22ade3b89427bdd4145306e}{kInfoType\_BatteryCap}, 0, NULL, *((uint8\_t *)param));
241             \textcolor{keywordflow}{break};
242 
243         \textcolor{comment}{/* get battery status */}
244         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a884eedc8a4ed6f0d1cdbf6c582a0dc36}{PD\_DPM\_GIVE\_BATTERY\_STATUS}:
245             status =
246                 \hyperlink{pd__command__app_8c_a4719e49373052976ae6c146751657246}{PD\_DpmGetInfoRequestCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dbad66b35525e912af71d9fa55661cd42f2}{kInfoType\_BatteryStatus}, (\hyperlink{struct__pd__command__data__param}{pd\_command\_data\_param\_t} *)param);
247             \textcolor{keywordflow}{break};
248         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a9e1518da0f1b44c13a019abc96cedfbe}{PD\_DPM\_GET\_BATTERY\_STATUS\_SUCCESS}:
249             status = \hyperlink{pd__command__app_8c_aeacfe9453f3f249dc48453104fba98fe}{PD\_DpmGetInfoResultCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dbad66b35525e912af71d9fa55661cd42f2}{kInfoType\_BatteryStatus}, 1,
250                                                  (\hyperlink{struct__pd__command__data__param}{pd\_command\_data\_param\_t} *)param, 0
      );
251             \textcolor{keywordflow}{break};
252         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8ae9bc65c9f7dad30f80fddc56d0d9b3b9}{PD\_DPM\_GET\_BATTERY\_STATUS\_FAIL}:
253             status = \hyperlink{pd__command__app_8c_aeacfe9453f3f249dc48453104fba98fe}{PD\_DpmGetInfoResultCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dbad66b35525e912af71d9fa55661cd42f2}{kInfoType\_BatteryStatus}, 0, NULL, *((uint8\_t *)param));
254             \textcolor{keywordflow}{break};
255 
256         \textcolor{comment}{/* get manufacturer info */}
257         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a4eaf5fd4f50a711d55543fd52d58218a}{PD\_DPM\_GIVE\_MANUFACTURER\_INFO}:
258             status = \hyperlink{pd__command__app_8c_a4719e49373052976ae6c146751657246}{PD\_DpmGetInfoRequestCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dba478e1a721488bbe50bbeb2f77b3951e4}{kInfoType\_ManufacturerInfo},
259                                                   (\hyperlink{struct__pd__command__data__param}{pd\_command\_data\_param\_t} *)param);
260             \textcolor{keywordflow}{break};
261         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a425eb7f716e1240fccc53e3b1bbb7ab7}{PD\_DPM\_GET\_MANUFACTURER\_INFO\_SUCCESS}:
262             status = \hyperlink{pd__command__app_8c_aeacfe9453f3f249dc48453104fba98fe}{PD\_DpmGetInfoResultCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dba478e1a721488bbe50bbeb2f77b3951e4}{kInfoType\_ManufacturerInfo}, 1,
263                                                  (\hyperlink{struct__pd__command__data__param}{pd\_command\_data\_param\_t} *)param, 0
      );
264             \textcolor{keywordflow}{break};
265         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8aaf6af38ecf21f44fbd95f190eb8bee7c}{PD\_DPM\_GET\_MANUFACTURER\_INFO\_FAIL}:
266             status =
267                 \hyperlink{pd__command__app_8c_aeacfe9453f3f249dc48453104fba98fe}{PD\_DpmGetInfoResultCallback}(callbackParam, 
      \hyperlink{pd__command__interface_8h_a16038928d210292250ce3f9d972ac1dba478e1a721488bbe50bbeb2f77b3951e4}{kInfoType\_ManufacturerInfo}, 0, NULL, *((uint8\_t *)param));
268             \textcolor{keywordflow}{break};
269 
270         \textcolor{comment}{/* alert */}
271         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a2ca776167fbab779a679639add785fcd}{PD\_DPM\_ALERT\_RECEIVED}:
272             status = \hyperlink{pd__command__app_8c_a29fdeaa67097b0b29462ddc1ec0b539f}{PD\_DpmReceiveAlertCallback}(callbackParam, (
      \hyperlink{struct__pd__command__data__param}{pd\_command\_data\_param\_t} *)param);
273             \textcolor{keywordflow}{break};
274         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a7a58d683f0a94b0634aca4ea76df7800}{PD\_DPM\_SEND\_ALERT\_SUCCESS}:
275             status = \hyperlink{pd__command__app_8c_a1439dc2a791941fe3b5fb170c30b04f9}{PD\_DpmSendAlertCallback}(callbackParam, 1, 0);
276             \textcolor{keywordflow}{break};
277         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a0cbb394fa1a8c85368a4d84c1e5647c2}{PD\_DPM\_SEND\_ALERT\_FAIL}:
278             status = \hyperlink{pd__command__app_8c_a1439dc2a791941fe3b5fb170c30b04f9}{PD\_DpmSendAlertCallback}(callbackParam, 0, *((uint8\_t *)param));
279             \textcolor{keywordflow}{break};
280 \textcolor{preprocessor}{#endif}
281 \textcolor{preprocessor}{}
282         \textcolor{comment}{/* cable reset */}
283         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a1f1fc746fd209a7967641a63e602ac01}{PD\_DPM\_CABLE\_RESET\_REQUEST}:
284             status = \hyperlink{pd__command__interface_8h_a60cf9e5a2abca00ad8b5b1eb9c926028}{PD\_DpmCableResetRquestCallback}(callbackParam, 1);
285             \textcolor{keywordflow}{break};
286         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a52cfbc0c6ae3aea354fbfcbe10572be7}{PD\_DPM\_CABLE\_RESET\_COMPLETE}:
287             status = \hyperlink{pd__command__interface_8h_a60cf9e5a2abca00ad8b5b1eb9c926028}{PD\_DpmCableResetRquestCallback}(callbackParam, 0);
288             \textcolor{keywordflow}{break};
289 
290 \textcolor{preprocessor}{#if 0}
291 \textcolor{preprocessor}{}        \textcolor{comment}{/* security request */}
292         \textcolor{keywordflow}{case} PD\_DPM\_RESPONSE\_SECURITY\_REQUEST:
293         \textcolor{keywordflow}{case} PD\_DPM\_SECURITY\_REQUEST\_SUCCESS:
294         \textcolor{keywordflow}{case} PD\_DPM\_SECURITY\_RESPONSE\_RECEIVED:
295         \textcolor{keywordflow}{case} PD\_DPM\_SECURITY\_REQUEST\_FAIL:
296             status = PD\_DpmSecurityRequestCallback(callbackParam, event, param);
297             \textcolor{keywordflow}{break};
298 \textcolor{preprocessor}{#endif}
299 \textcolor{preprocessor}{}
300         \textcolor{keywordflow}{default}:
301             \textcolor{keywordflow}{break};
302     \}
303     \textcolor{keywordflow}{return} status;
304 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{source__charger_2pd__app_8c_a336eb892659ecb2d1392ebf1839a0b18_cgraph}
\end{center}
\end{figure}


\hypertarget{source__charger_2pd__app_8c_a76d0496e2aa1a40759b549a23506f14a}{\index{source\-\_\-charger/pd\-\_\-app.\-c@{source\-\_\-charger/pd\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Connect\-Callback@{P\-D\-\_\-\-Dpm\-Connect\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Connect\-Callback@{P\-D\-\_\-\-Dpm\-Connect\-Callback}!source_charger/pd_app.c@{source\-\_\-charger/pd\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Connect\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Connect\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{uint32\-\_\-t}]{event, }
\item[{void $\ast$}]{param}
\end{DoxyParamCaption}
)}}\label{source__charger_2pd__app_8c_a76d0496e2aa1a40759b549a23506f14a}

\begin{DoxyCode}
119 \{
120     \hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\_status\_t} status = \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073a4d58370b8ee8d3d2a4c477f7a3f84dda}{kStatus\_PD\_Error};
121     \hyperlink{struct__pd__app}{pd\_app\_t} *pdAppInstance = (\hyperlink{struct__pd__app}{pd\_app\_t} *)callbackParam;
122 
123     \textcolor{keywordflow}{switch} (event)
124     \{
125         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8ac8d3cd4dd7fa3432e364a9a3d6602563}{PD\_DISCONNECTED}:
126             \hyperlink{pd__app_8c_a0fcfdce4020a6f6d89a1dca22db9736d}{PD\_PowerBoardReset}();
127             PRINTF(\textcolor{stringliteral}{"disconnect\(\backslash\)r\(\backslash\)n"});
128             status = \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
129             \textcolor{keywordflow}{break};
130 
131         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8afb6d14742fec55ac288edda0d928683a}{PD\_CONNECT\_ROLE\_CHANGE}:
132         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8adbefad204068244fdf75ba1ff211fbfc}{PD\_CONNECTED}:
133         \{
134             uint8\_t roleInfo;
135 
136             \hyperlink{group__usb__pd__stack_gac3d77e334213f541028d2da518086ca2}{PD\_Control}(pdAppInstance->\hyperlink{struct__pd__app_a604cb18a01edb2da262e6d53fe41b70e}{pdHandle}, 
      \hyperlink{group__usb__pd__stack_gga0edd2a390d28d96646bc71aac1858af1a04f2cae987c5f93bcd07bcffd679548e}{PD\_CONTROL\_GET\_POWER\_ROLE}, &roleInfo);
137             \textcolor{keywordflow}{if} (roleInfo == \hyperlink{group__usb__pd__stack_gga46146487374ddc31d48f33b2b6a26f8ba9fdae65ce89c7d877981a3abef33a2cb}{kPD\_PowerRoleSource})
138             \{
139                 PRINTF(\textcolor{stringliteral}{"provide default 5V vbus\(\backslash\)r\(\backslash\)n"});
140             \}
141 
142             status = \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
143             \textcolor{keywordflow}{break};
144         \}
145 
146         \textcolor{keywordflow}{default}:
147             \textcolor{keywordflow}{break};
148     \}
149 
150     \textcolor{keywordflow}{return} status;
151 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{source__charger_2pd__app_8c_a76d0496e2aa1a40759b549a23506f14a_cgraph}
\end{center}
\end{figure}


\hypertarget{source__charger_2pd__app_8c_a648f96eddcd92c89d8908b63ac0f9185}{\index{source\-\_\-charger/pd\-\_\-app.\-c@{source\-\_\-charger/pd\-\_\-app.\-c}!P\-D\-\_\-\-Dpm\-Demo\-App\-Callback@{P\-D\-\_\-\-Dpm\-Demo\-App\-Callback}}
\index{P\-D\-\_\-\-Dpm\-Demo\-App\-Callback@{P\-D\-\_\-\-Dpm\-Demo\-App\-Callback}!source_charger/pd_app.c@{source\-\_\-charger/pd\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Dpm\-Demo\-App\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Dpm\-Demo\-App\-Callback (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{callback\-Param, }
\item[{uint32\-\_\-t}]{event, }
\item[{void $\ast$}]{param}
\end{DoxyParamCaption}
)}}\label{source__charger_2pd__app_8c_a648f96eddcd92c89d8908b63ac0f9185}

\begin{DoxyCode}
154 \{
155     \hyperlink{group__usb__pd__stack_ga04a1f331d9807a70ab9bb753f5ed1c80}{pd\_status\_t} status = \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073a4d58370b8ee8d3d2a4c477f7a3f84dda}{kStatus\_PD\_Error};
156 
157     \textcolor{keywordflow}{switch} (event)
158     \{
159         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8a65d5475667c8b5d17a217f8fc3f8a870}{PD\_FUNCTION\_DISABLED}:
160             \textcolor{comment}{/* need hard or software reset */}
161             status = \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
162             \textcolor{keywordflow}{break};
163 
164         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8adbefad204068244fdf75ba1ff211fbfc}{PD\_CONNECTED}:
165         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8afb6d14742fec55ac288edda0d928683a}{PD\_CONNECT\_ROLE\_CHANGE}:
166         \textcolor{keywordflow}{case} \hyperlink{group__usb__pd__stack_gga6e10571af6af1a42760ea442ab580eb8ac8d3cd4dd7fa3432e364a9a3d6602563}{PD\_DISCONNECTED}:
167             status = \hyperlink{pd__app_8c_a76d0496e2aa1a40759b549a23506f14a}{PD\_DpmConnectCallback}(callbackParam, event, param);
168             \textcolor{keywordflow}{break};
169 
170         \textcolor{keywordflow}{default}:
171             status = \hyperlink{pd__app_8c_a336eb892659ecb2d1392ebf1839a0b18}{PD\_DpmAppCommandCallback}(callbackParam, event, param);
172     \}
173     \textcolor{keywordflow}{return} status;
174 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{source__charger_2pd__app_8c_a648f96eddcd92c89d8908b63ac0f9185_cgraph}
\end{center}
\end{figure}


\hypertarget{source__charger_2pd__app_8c_a0fcfdce4020a6f6d89a1dca22db9736d}{\index{source\-\_\-charger/pd\-\_\-app.\-c@{source\-\_\-charger/pd\-\_\-app.\-c}!P\-D\-\_\-\-Power\-Board\-Reset@{P\-D\-\_\-\-Power\-Board\-Reset}}
\index{P\-D\-\_\-\-Power\-Board\-Reset@{P\-D\-\_\-\-Power\-Board\-Reset}!source_charger/pd_app.c@{source\-\_\-charger/pd\-\_\-app.\-c}}
\subsubsection[{P\-D\-\_\-\-Power\-Board\-Reset}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-status\-\_\-t} P\-D\-\_\-\-Power\-Board\-Reset (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{source__charger_2pd__app_8c_a0fcfdce4020a6f6d89a1dca22db9736d}

\begin{DoxyCode}
70 \{
71     \hyperlink{struct__pd__ptn5110__ctrl__pin}{pd\_ptn5110\_ctrl\_pin\_t} phyPowerPinCtrl;
72 
73     \textcolor{comment}{//Question: reset的时候设置为0，什么时候会设置为其他值？}
74     \hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_abcf864ac3f98a5cb50592cd6110be6a0}{sourceVbusVoltage} = 0u;
75     phyPowerPinCtrl.\hyperlink{struct__pd__ptn5110__ctrl__pin_ace741c1da1ba78c0e1068f69a4a8f9d5}{enSRC} = 0;
76     phyPowerPinCtrl.\hyperlink{struct__pd__ptn5110__ctrl__pin_aa46e27b5322119661fe8081a042478f7}{enSNK1} = 0;
77     \textcolor{comment}{// (base, pin, output), 设置output为0}
78     \textcolor{comment}{// PTA13 on MCU <-> J403 pin5 EXTRA\_EN\_SRC, source 9V, disable extra source}
79     GPIO\_WritePinOutput(\hyperlink{pd__app_8h_a77241910fa3175fcb0afaea8fe32077d}{PD\_EXTRA\_EN\_SRC\_GPIO}, 
      \hyperlink{pd__app_8h_a07b7d368c8bae862deab6d5fc4c1ead5}{PD\_EXTRA\_EN\_SRC\_GPIO\_PIN}, 0);
80     \textcolor{comment}{//g\_PDAppInstance.pdHandle指向PD\_Instance}
81     \textcolor{comment}{//PD\_Control中，大部分case将获得的结果存进第三个参数变量}
82     \textcolor{comment}{//if enSRC & enSNK1都为0，则会通过register command to disable source vbus and disable sink vbus}
83     \hyperlink{group__usb__pd__stack_gac3d77e334213f541028d2da518086ca2}{PD\_Control}(\hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_a604cb18a01edb2da262e6d53fe41b70e}{pdHandle}, 
      \hyperlink{group__usb__pd__stack_gga0edd2a390d28d96646bc71aac1858af1a219d3fe217c5bf11a8126d09ee9fdb0c}{PD\_CONTROL\_PHY\_POWER\_PIN}, &phyPowerPinCtrl);
84     \hyperlink{group__usb__pd__stack_gac3d77e334213f541028d2da518086ca2}{PD\_Control}(\hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.\hyperlink{struct__pd__app_a604cb18a01edb2da262e6d53fe41b70e}{pdHandle}, 
      \hyperlink{group__usb__pd__stack_gga0edd2a390d28d96646bc71aac1858af1ab4baaafc5cca20f365d103a948261b1f}{PD\_CONTROL\_DISCHARGE\_VBUS}, NULL);
85     \textcolor{keywordflow}{return} \hyperlink{group__usb__pd__stack_ggaaad4cd00dd02567c6169429e3a895073acf06f954f9c52f560cea34df48c63555}{kStatus\_PD\_Success};
86 \}
\end{DoxyCode}
\hypertarget{source__charger_2pd__app_8c_af2521ef8b447748866a3ad2c818faa92}{\index{source\-\_\-charger/pd\-\_\-app.\-c@{source\-\_\-charger/pd\-\_\-app.\-c}!P\-O\-R\-T\-B\-\_\-\-P\-O\-R\-T\-C\-\_\-\-P\-O\-R\-T\-D\-\_\-\-P\-O\-R\-T\-E\-\_\-\-I\-R\-Q\-Handler@{P\-O\-R\-T\-B\-\_\-\-P\-O\-R\-T\-C\-\_\-\-P\-O\-R\-T\-D\-\_\-\-P\-O\-R\-T\-E\-\_\-\-I\-R\-Q\-Handler}}
\index{P\-O\-R\-T\-B\-\_\-\-P\-O\-R\-T\-C\-\_\-\-P\-O\-R\-T\-D\-\_\-\-P\-O\-R\-T\-E\-\_\-\-I\-R\-Q\-Handler@{P\-O\-R\-T\-B\-\_\-\-P\-O\-R\-T\-C\-\_\-\-P\-O\-R\-T\-D\-\_\-\-P\-O\-R\-T\-E\-\_\-\-I\-R\-Q\-Handler}!source_charger/pd_app.c@{source\-\_\-charger/pd\-\_\-app.\-c}}
\subsubsection[{P\-O\-R\-T\-B\-\_\-\-P\-O\-R\-T\-C\-\_\-\-P\-O\-R\-T\-D\-\_\-\-P\-O\-R\-T\-E\-\_\-\-I\-R\-Q\-Handler}]{\setlength{\rightskip}{0pt plus 5cm}void P\-O\-R\-T\-B\-\_\-\-P\-O\-R\-T\-C\-\_\-\-P\-O\-R\-T\-D\-\_\-\-P\-O\-R\-T\-E\-\_\-\-I\-R\-Q\-Handler (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{source__charger_2pd__app_8c_af2521ef8b447748866a3ad2c818faa92}

\begin{DoxyCode}
107 \{
108     \textcolor{keywordflow}{if} (\hyperlink{pd__app_8h_ad99e5c127ff695f7b579400ef1062e76}{BOARD\_PTN5110\_GPIO\_PORT}->ISFR & (1U << 
      \hyperlink{pd__app_8h_ac0976521bb8bc7a1e4724ec1188e7f46}{BOARD\_PTN5110\_GPIO\_PIN}))
109     \{
110         \hyperlink{pd__app_8h_ad99e5c127ff695f7b579400ef1062e76}{BOARD\_PTN5110\_GPIO\_PORT}->ISFR = 1U << 
      \hyperlink{pd__app_8h_ac0976521bb8bc7a1e4724ec1188e7f46}{BOARD\_PTN5110\_GPIO\_PIN};
111         \textcolor{keywordflow}{if} (!(\hyperlink{pd__app_8h_a1fcc7374a2ec203aceb85355f3118f3d}{BOARD\_PTN5110\_GPIO}->PDIR & (1U << BOARD\_PTN5110\_GPIO\_PIN)))
112         \{
113             \hyperlink{group__usb__pd__stack_gadc10377ece46e63b966463e501451e33}{PD\_PTN5110IsrFunction}(\hyperlink{pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{g\_PDAppInstance}.
      \hyperlink{struct__pd__app_a604cb18a01edb2da262e6d53fe41b70e}{pdHandle});
114         \}
115     \}
116 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{source__charger_2pd__app_8c_af2521ef8b447748866a3ad2c818faa92_cgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\hypertarget{source__charger_2pd__app_8c_a306f9b8029582dfb8c64f163fea3cf65}{\index{source\-\_\-charger/pd\-\_\-app.\-c@{source\-\_\-charger/pd\-\_\-app.\-c}!callback\-Functions@{callback\-Functions}}
\index{callback\-Functions@{callback\-Functions}!source_charger/pd_app.c@{source\-\_\-charger/pd\-\_\-app.\-c}}
\subsubsection[{callback\-Functions}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-power\-\_\-handle\-\_\-callback\-\_\-t} callback\-Functions}}\label{source__charger_2pd__app_8c_a306f9b8029582dfb8c64f163fea3cf65}
{\bfseries Initial value\-:}
\begin{DoxyCode}
= \{
    \hyperlink{pd__power__interface_8c_a9f8cada612c26ee29a2eaf595f412284}{PD\_PowerSrcTurnOnDefaultVbus},
    \hyperlink{pd__power__interface_8c_a19f863f127ba9c21cacaa20e050ce6c7}{PD\_PowerSrcTurnOnRequestVbus},
    \hyperlink{pd__power__interface_8c_afe3b9450467437d5e8a0c25f98bba588}{PD\_PowerSrcTurnOffVbus},
    \hyperlink{pd__power__interface_8c_af5d8c2098e03abadbba62c5306754135}{PD\_PowerSrcGotoMinReducePower},
    NULL,
    NULL,
    NULL,
    NULL,
    \hyperlink{pd__power__interface_8c_a289ac80f85e197e355f467df8a726640}{PD\_PowerControlVconn},
\}
\end{DoxyCode}
\hypertarget{source__charger_2pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}{\index{source\-\_\-charger/pd\-\_\-app.\-c@{source\-\_\-charger/pd\-\_\-app.\-c}!g\-\_\-\-P\-D\-App\-Instance@{g\-\_\-\-P\-D\-App\-Instance}}
\index{g\-\_\-\-P\-D\-App\-Instance@{g\-\_\-\-P\-D\-App\-Instance}!source_charger/pd_app.c@{source\-\_\-charger/pd\-\_\-app.\-c}}
\subsubsection[{g\-\_\-\-P\-D\-App\-Instance}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-app\-\_\-t} g\-\_\-\-P\-D\-App\-Instance}}\label{source__charger_2pd__app_8c_a4c95db98c2e53feffacac68c5c3abd80}
\hypertarget{source__charger_2pd__app_8c_a33272daf4c2c919c757e12106af7ffd5}{\index{source\-\_\-charger/pd\-\_\-app.\-c@{source\-\_\-charger/pd\-\_\-app.\-c}!g\-\_\-\-P\-D\-Config@{g\-\_\-\-P\-D\-Config}}
\index{g\-\_\-\-P\-D\-Config@{g\-\_\-\-P\-D\-Config}!source_charger/pd_app.c@{source\-\_\-charger/pd\-\_\-app.\-c}}
\subsubsection[{g\-\_\-\-P\-D\-Config}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-instance\-\_\-config\-\_\-t} g\-\_\-\-P\-D\-Config}}\label{source__charger_2pd__app_8c_a33272daf4c2c919c757e12106af7ffd5}
{\bfseries Initial value\-:}
\begin{DoxyCode}
= \{
    \hyperlink{group__usb__pd__stack_gga922338772b41ceba51f7881c74b9e20aaf6c770c6cd3614cd0cd48acee1124063}{kDeviceType\_NormalPowerPort},  
    PORTB\_PORTC\_PORTD\_PORTE\_IRQn, 
    \hyperlink{group__usb__pd__stack_gga8bd01601105e164bc0e0bb538aaa5c1ca6f0eabe71ca45162254c941b34558d2c}{kPD\_PhyPTN5110},
    \hyperlink{group__usb__pd__stack_gga4aed694f998da91dea8d218596d65c1eaf78fb0f4bdd4db6e8a2e5dab05ba59d2}{kInterface\_i2c1},
    0x50u,
    &\hyperlink{pd__app_8c_a31ad0b046935918c7fa0fed8885192c8}{g\_PowerPortConfig},
\}
\end{DoxyCode}
\hypertarget{source__charger_2pd__app_8c_a31ad0b046935918c7fa0fed8885192c8}{\index{source\-\_\-charger/pd\-\_\-app.\-c@{source\-\_\-charger/pd\-\_\-app.\-c}!g\-\_\-\-Power\-Port\-Config@{g\-\_\-\-Power\-Port\-Config}}
\index{g\-\_\-\-Power\-Port\-Config@{g\-\_\-\-Power\-Port\-Config}!source_charger/pd_app.c@{source\-\_\-charger/pd\-\_\-app.\-c}}
\subsubsection[{g\-\_\-\-Power\-Port\-Config}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pd\-\_\-power\-\_\-port\-\_\-config\-\_\-t} g\-\_\-\-Power\-Port\-Config}}\label{source__charger_2pd__app_8c_a31ad0b046935918c7fa0fed8885192c8}
{\bfseries Initial value\-:}
\begin{DoxyCode}
= \{
    NULL,                    
    NULL,                    
    0,                       
    0,                       
    \hyperlink{group__usb__pd__stack_ggaffef947540aace08ecf6fd25f69720a9a38da91c9c7115f0e6866a557601ad9b0}{kPowerConfig\_SourceOnly}, 
    \hyperlink{group__usb__pd__stack_ggaf956bb4d3d27df52fb694311b8219b0ead84bbcae527b6cfc2e9a5fd96648af74}{kCurrent\_1A5},            
    \hyperlink{group__usb__pd__stack_gga4794fa8903a011ba6f0be0f04925411eaff14c5fbf053f7e1292cd753ca873a0f}{kTypecTry\_None},          
    \hyperlink{group__usb__pd__stack_ggacc3677fc21b76efa77ae5f744194394aa0ab32890019239bbad8863e42e90e827}{kDataConfig\_DFP},         
    1,                       
    0,                       
    NULL,
    NULL,
    NULL,
\}
\end{DoxyCode}
